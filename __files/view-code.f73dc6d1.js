(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-code"],{"065b":function(t,e,i){},"07cd":function(t,e,i){},"0803":function(t,e,i){},"09cc":function(t,e,i){},"0acb":function(t,e,i){"use strict";i("a6c3")},1252:function(t,e,i){},"197d":function(t,e,i){"use strict";i("a13c")},"1ea1":function(t,e,i){"use strict";i("09cc")},"22a3":function(t,e,i){"use strict";i("8759")},"22db":function(t,e,i){"use strict";i("e56b")},"27a8":function(t,e,i){"use strict";i("adef")},"29aa":function(t,e,i){},"29e0":function(t,e,i){"use strict";i("1252")},"2ac6":function(t,e,i){"use strict";var o=i("6022"),a=i("4a75"),s=i("005c"),r=i("131c");const n=t=>{let e;if(""!=t.preview_url.value)e=t.preview_url.value;else{const i=t.video_url.value.split("/");e=`http://qiniu-nc.clewm.net/climinavideoposter/${i[i.length-1]}&imageView2/1/w/200/h/200`}return e},c=()=>{WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",()=>{WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})})};e["a"]=async t=>{const e=Object(a["B"])()?window.location.href:window.initUrl||window.location.href,i=await o["f"].getWxConfig(encodeURIComponent(e)),l=i;if(l&&1===l.status){const i={debug:!1,appId:l.data.appId,timestamp:l.data.timestamp,nonceStr:l.data.nonceStr,signature:l.data.signature,jsApiList:l.data.jsApiList,openTagList:["wx-open-launch-weapp"]};let o={};t.qiYeConfig&&(o={beta:!0,debug:!1,appId:t.qiYeConfig.corpid,timestamp:t.qiYeConfig.timestamp,nonceStr:t.qiYeConfig.nonceStr,signature:t.qiYeConfig.signature,jsApiList:t.qiYeConfig.jsApiList});const a=Object(s["r"])()&&t.qiYeConfig?o:i;wx.config(a),wx.error(t=>{console.error("微信分享配置出错"),console.error(t)}),wx.ready(()=>{if(t&&t.callback&&t.callback(),!Object(s["r"])()&&t&&t.data){const o=t.data.qrcode_compontent,a=t.data.qrcode_top_component,s=Number(t.data.show_share),c=Number(t.data.show_collect);let l=e,d="https://blogcdnimg.clewm.net/2019/09/weixin-link.png",p=t.data.qrcode_record.list_name;if(o.length){const t=o.filter(t=>"text"===t.component_code);if(t.length){const e=Object(r["k"])(t,t=>{const e=Object(r["C"])(t,"attribute_list.0.content_html.value","").replace(/<[^>]+>/gi,"").replace(/&nbsp;/g,"");return""!==e});e&&(l=e.attribute_list[0].content_html.value.replace(/<[^>]+>/gi,"").replace(/&nbsp;/g,""))}if("video"===o[0].component_code)d=n(o[0].attribute_list[0]);else{const t=o.filter(t=>"image"===t.component_code);t.length&&t[0].attribute_list.length&&t[0].attribute_list[0].image_url&&(d=t[0].attribute_list[0].image_url.value+"?x-oss-process=image/resize,m_fill,h_200,w_200")}}if(a&&a.length){const e=a.filter(t=>"text"===t.component_code);var i;if(e.length&&e[0].attribute_list.length)if(e[0].attribute_list[0].content_html)p=(null!==(i=e[0].attribute_list[0].content_html.value)&&void 0!==i?i:"").replace(/<a.*?>.*?<\/a>/gi,"")||t.data.qrcode_record.list_name;const o=a.filter(t=>"image"===t.component_code);o.length&&o[0].attribute_list.length&&o[0].attribute_list[0].image_url&&(d=o[0].attribute_list[0].image_url.value+"?x-oss-process=image/resize,m_fill,h_200,w_200")}s||wx.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:wechat","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone"]}),c||wx.hideMenuItems({menuList:["menuItem:favorite"]}),wx.updateAppMessageShareData&&wx.updateAppMessageShareData({title:p,desc:l||e,link:e+"&from=timeline",imgUrl:d}),wx.updateTimelineShareData&&wx.updateTimelineShareData({title:p,link:e+"&from=timeline",imgUrl:d})}})}"object"===typeof WeixinJSBridge&&"function"===typeof WeixinJSBridge.invoke?c():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c))}},"2d38":function(t,e,i){"use strict";i("efa1")},3094:function(t,e,i){},3294:function(t,e,i){"use strict";e["a"]=()=>{const t=navigator.userAgent.toLowerCase(),e=t?t.match(/BeStore/i):"",i=/android/i.test(t),o=/iphone|ipad|ipod/i.test(t),a="bestore"===e.toString();window.WeixinJSBridge?window.WeixinJSBridge.call("closeWindow"):window.AlipayJSBridge?window.AlipayJSBridge.call("closeWebview"):a&&i?window.obj.closePageLppzRequest(""):a&&o?window.webkit.messageHandlers.closePageLppzRequest.postMessage(""):window.close()}},3359:function(t,e,i){"use strict";i("61ea")},"38cb":function(t,e,i){},"39d8":function(t,e,i){},"3d40":function(t,e,i){},4148:function(t,e,i){},4538:function(t,e,i){"use strict";i("6a70")},"4af8":function(t,e,i){"use strict";i("de35")},"4d7d":function(t,e,i){},"51d2":function(t,e,i){},"5c40":function(t,e,i){},"61ea":function(t,e,i){},6485:function(t,e,i){"use strict";i("39d8")},"6a70":function(t,e,i){},"6b0c":function(t,e,i){"use strict";i("4148")},"6d4f":function(t,e,i){"use strict";i("3094")},"6de8":function(t,e,i){},7154:function(t,e,i){},7189:function(t,e,i){"use strict";i("7154")},"726c":function(t,e,i){"use strict";i("29aa")},"772e":function(t,e,i){},"7a79":function(t,e,i){"use strict";i("81a1")},"7b1b":function(t,e,i){"use strict";i("0803")},"7e2f":function(t,e,i){},"7ec0":function(t,e,i){"use strict";i("fe7b")},8090:function(t,e,i){"use strict";i("51d2")},8126:function(t,e,i){"use strict";i("065b")},"81a1":function(t,e,i){},8211:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"remindWrap"},[i("page-header",{attrs:{bg:"#f4f4f4",color:"rgba(0, 0, 0, 0.87)",title:t.pageTitle,hideIcon:!!t.c}}),t.loading?i("div",{staticClass:"loading",style:"min-height: "+t.minLoadingH+"px; text-align:center; padding-top:"+t.$$u(20)},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):t._e(),t.loading?t._e():i("div",[t.hasDel?i("div",{style:"min-height: "+t.minLoadingH+"px;"},[i("div",{staticClass:"deleted"},[i("img",{staticClass:"deleted-image",attrs:{src:"https://static.clewm.net/cli/images/mina-cli/mina_is_deleted@2x.png"}}),i("span",{staticClass:"deleted-tips"},[t._v("记录在 "+t._s(t.delTime)+" 被 管理员 删除")])]),i("div",{staticClass:"bottom-tip",on:{click:t.viewRecord}},[t._v("记录快照能做什么？")])]):i("div",[i("div",{staticClass:"remindContent",style:"min-height: "+t.minContentH+"px"},[i("group",{attrs:{data:t.recordInfo,isPaidUser:t.isPaidUser,isFromRecordRemind:!0}})],1),t.showPowerBy?i("div",{staticClass:"powerBy __powerBy__"},[t._v(" 由 "),i("span",{on:{click:t.viewCli}},[t._v("草料二维码")]),t._v(" 提供技术支持 ")]):t._e()])])],1)},a=[],s=i("9ab4"),r=i("1b40"),n=i("6022"),c=i("005c"),l=i("f28c"),d=i("c3d1"),p=i("131c"),h=i("2ac6");let u=class extends r["d"]{constructor(){super(...arguments),this.loading=!0,this.showPowerBy=!1,this.hasDel=!1,this.delTime="",this.recordInfo={},this.minContentH=0,this.minLoadingH=0,this.isPaidUser=0,this.pageTitle="",this.targetXcxAppId="",this.c=""}async mounted(){this.getRecord(),this.getMinContentHeight();let t="记录快照";const e=Object(c["r"])()&&Object(c["p"])()&&this.isCliCode(this.url);if(e){var i;const e=null===(i=this.url)||void 0===i?void 0:i.split("/");if(Object(p["I"])(["record","task","state"],null===e||void 0===e?void 0:e.pop())){var o;const i=e.pop(),{c:a}=null!==(o=Object(c["t"])(window.location.href))&&void 0!==o?o:{};if(a){t="正在跳转小程序...",this.c=a;const e=await n["c"].getWxCorpIdByOrgCode({orgCode:i,env:"wxwork"});if(1===e.code){const t=Object(p["C"])(e,"data.corp_id",0),i=Object(p["C"])(e,"data.suite_id",0);this.targetXcxAppId=Object(p["C"])(e,"data.xcx_app_id",""),t&&this.getAllJsConfig({corpId:t,suiteId:i})}}}}this.pageTitle=t}async getWxJsConfig({corpId:t,suiteId:e}){const i=await n["c"].getJsConfig({corpId:t,suiteId:e,url:encodeURIComponent(window.location.href),isAgent:0});return i}async getWorkWxJsConfig({corpId:t,suiteId:e}){const i=await n["c"].getJsConfig({corpId:t,suiteId:e,url:encodeURIComponent(window.location.href),isAgent:1});return i}qiYeWeixinAgentConfig(t){wx&&wx.agentConfig&&wx.agentConfig({corpid:t.appId,agentid:t.agentId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList,success:()=>{if(wx&&wx.invoke){let t=`${this.url}?c=${this.c}`;wx.invoke("launchMiniprogram",{appid:this.targetXcxAppId,path:"pages/code/code.html?q="+encodeURIComponent(t)},t=>{"launchMiniprogram:ok"===t.err_msg?wx.closeWindow&&setTimeout(()=>{wx.closeWindow()},500):console.error("企业微信打开小程序错误",t)})}},fail:t=>{console.error("企业微信agentConfig错误了",t)}})}async getAllJsConfig({corpId:t,suiteId:e}){const i=await this.getWxJsConfig({corpId:t,suiteId:e}),o=await this.getWorkWxJsConfig({corpId:t,suiteId:e});if(1===i.code&&1===o.code){const t=i.data,e=o.data;try{await this.$$logic.h5(async()=>{await Object(h["a"])({qiYeConfig:{corpid:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList},callback:()=>{this.qiYeWeixinAgentConfig(e)}})})}catch(a){console.error("获取微信分享配置以及设置微信分享失败"),console.error(a)}}}isCliCode(t){t||(t=this.url);const e=t.indexOf("qr61.cn")>-1&&-1===t.indexOf("h.qr61.cn")||t.indexOf("qr46.cn")>-1&&-1===t.indexOf("h.qr46.cn"),i=t.indexOf("qr71.cn")>-1&&-1===t.indexOf("h.qr71.cn"),o=e||i;return o}padStart(t,e,i=""){return t.length>=e?t:`${new Array(e-t.length+1).join(i)}${t}`}getTime(t){t=JSON.parse(JSON.stringify(t)),t.update_time<1e10&&(t.update_time*=1e3);const e=new Date(t.update_time),i=e.getFullYear();return`${i}/${this.padStart((e.getMonth()+1).toString(),2,"0")}/${this.padStart(e.getDate().toString(),2,"0")} ${this.padStart(e.getHours().toString(),2,"0")}:${this.padStart(e.getMinutes().toString(),2,"0")}`}async getRecord(){const t=await n["c"].getRecord(this.url),e=await n["c"].getQrcodeOrgMsg(this.url);if(1===t.code){let e="";this.$$getValue(t,"data.is_del")&&(e=this.getTime(t.data)),this.loading=!1,this.recordInfo=this.$$getValue(t,"data",{}),this.showPowerBy=!!this.$$getValue(t,"data.show_powered_by",0),this.hasDel=1===this.$$getValue(t,"data.is_del"),this.delTime=e}1===e.code&&(this.isPaidUser=this.$$getValue(e,"data.edition_msg.is_paid_user",0)),this.getMinContentHeight()}getMinContentHeight(){const{clientHeight:t}=document.documentElement,e=document.querySelector(".__page_header__");let i=0;e&&(i=parseInt(Object(c["e"])(e,"height"),10)),this.minLoadingH=t-i,this.minContentH=this.showPowerBy?t-i-88:this.minLoadingH}viewCli(){this.$$logic.h5(()=>{window.open(`${window.location.protocol}//${window.location.host}?url=https://qr61.cn/o2eikt/q12CFJV`)})}viewRecord(){this.$$logic.h5(()=>{window.open(`${window.location.protocol}//${window.location.host}?url=https://qr71.cn/o2eikt/qeRX60k`)})}};Object(s["a"])([Object(r["c"])({type:String,default:""})],u.prototype,"url",void 0),u=Object(s["a"])([Object(r["a"])({components:{Group:l["a"],PageHeader:d["a"]}})],u);var m=u,g=m,_=(i("ecca"),i("2877")),f=Object(_["a"])(g,o,a,!1,null,"6560f414",null);e["a"]=f.exports},"821b":function(t,e,i){},"83a9":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isH5?t._e():i("page-header",{attrs:{"hide-icon":t.isH5,bg:t.headerbg,color:t.pageHeaderColor,title:t.headerTitle}}),t.recordShow?t._e():i("view-code-comp",{ref:"viewCodeComp",attrs:{url:t.url,pwd:t.pwd,validInfo:t.validInfo,needShow:t.needShow,alipay:t.alipay,showToMinaTips:t.showToMinaTips&&!t.errorPage&&!t.lockedPage&&!t.validPage,categoryType:t.categoryType,orgName:t.orgName,errorCode:t.codeData.code},on:{loaded:t.codeLoaded}}),i("error-page",{attrs:{errorCode:t.codeData.code,auditReason:t.codeData.audit_reason,url:t.url,errorTips:t.errorTips,needShow:t.errorPage,isNotaryError:t.isNotaryError}}),i("locked-page",{attrs:{url:t.url,codeId:t.codeId,reminder:t.reminder,code:t.codeData.code,needShow:t.lockedPage,renderPwd:t.renderPwd,rememberPsw:t.rememberPsw},on:{confirmed:t.codeReloaded,checkboxChange:t.checkboxChange}}),i("valid-page",{attrs:{codeData:t.codeData,validInfo:t.validInfo,validCode:t.validInfo.validCode,show:t.validPage}}),t.recordShow?i("record-remind",{attrs:{url:t.url}}):t._e(),t.isScan?i("div",{staticClass:"scanContent"},[i("div",{staticClass:"outScan scanNext",on:{click:t.scanNext}},[i("i",{staticClass:"clifont anticon-cli-angle-right scanIcon"})]),i("div",{staticClass:"outScan scanPrev",on:{click:t.scanPrev}},[i("i",{staticClass:"clifont anticon-cli-angle-left scanIcon"})]),t.isUserCode?t._e():i("div",{staticClass:"outScan scanUser",on:{click:t.scanUserinfo}},[i("i",{staticClass:"clifont anticon-user scanIcon"})])]):t._e()],1)},a=[],s=i("9ab4"),r=i("1b40"),n=i("6022"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.needShow?i("div",{style:t.isBgImgMode||t.isTopImg()?"margin-top:-"+t.$$u(t.bodypt)+";":""},[t.showQiYeWxLoading?i("div",{staticClass:"work-weixin-wrap"},[t.showOpenQiYeWxLoading?i("div",{staticClass:"work-weixin-wrap-box"},[i("img",{attrs:{src:"https://static.clewm.net/cli/images/cli-loading@2x.gif",alt:"loading"}}),i("span",{staticClass:"text"},[t._v("正在打开小程序")])]):i("div",{staticClass:"loading",style:"text-align:center; padding-top:"+t.$$u(20)},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})])]):i("div",[t.needShow&&!t.toMinaFail||t.showGroupInfo?i("div",{staticClass:"view-code"},[i("Modal",{ref:"wechatErrorTipModal",attrs:{content:t.wechatErrorTipModalConfig.content,showCancel:!1,"confirm-name":t.scanPara.confirmName}}),i("Modal",{ref:"modal",attrs:{content:t.isWechatScanError?"由于微信扫码服务器不稳定，当前表单功能无法正常使用，请稍后再试。":t.scanPara.content,tip:t.scanPara.tip,showCancel:!t.isWechatScanError&&t.scanPara.showCancel,"confirm-name":t.scanPara.confirmName,"cancel-name":t.scanPara.cancelName,"confirm-content":t.scanPara.confirmContent,"cancel-content":t.scanPara.cancelContent,slotContent:t.scanPara.slotContent,noConfirmBtn:t.scanPara.noConfirmBtn},on:{onHide:t.onModalHide}},[this.slotUrlSchema?i("a",{staticStyle:{position:"relative",width:"100%",heiht:"100%",display:"flex","align-items":"center","justify-content":"center","text-decoration":"none"},attrs:{slot:"confirmSlot",href:this.slotUrlSchema},slot:"confirmSlot"},[i("span",{staticStyle:{color:"#4caf50"}},[t._v("前往小程序")])]):t._e(),t.slotToMina?i("div",{staticStyle:{position:"relative",width:"100%",heiht:"100%",display:"flex","align-items":"center","justify-content":"center","text-decoration":"none"},attrs:{slot:"confirmSlot",id:"confirm-btn"},slot:"confirmSlot"},[i("span",{staticStyle:{color:"#4caf50"}},[t._v("前往小程序")]),i("to-mina",{attrs:{username:t.originalId,path:t.scanPara.slotPath,type:t.scanPara.type,"parent-id":"confirm-btn","is-watch-parent":""}})],1):t._e()]),t.showGroupInfo?i("group-info-page",{attrs:{info:t.codeCheckAuth,org_msg:t.codeData.org_msg},on:{showTip:t.tip}}):[t.loading?i("div",{staticClass:"loading"},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):t._e(),i("div",{staticClass:"empty-module",style:Object.assign({},{background:t.backgroundColor},t.isBgImgMode||t.isTopImg()?{height:0,marginTop:0}:null)}),t.code40206&&!t.loading?i("div",{staticClass:"missingTip"},[t._v(" 当前访问量过大，部分功能暂不可用，请刷新重试。 ")]):t._e(),t.loading?t._e():i("div",{class:"\n            page-wrapper\n            "+(t.$$getValue(t.codeData,"hasOpenMsg")?"has-msg-list":"no-msg-list")+"\n            "+(t.hasCodeContent?"has-code-content":"no-code-content")+"\n            "+(t.isBgImgMode?"is-bg-img-mode":"")+"\n            "+(t.isColorExtend?"is-color-extend":"")+"\n          ",style:{background:t.getBGColor(),paddingTop:t.isBgImgMode&&!t.isTopImg()?t.$$u(t.bodypt):void 0}},[t.isBgImgMode?i("div",{staticClass:"outer-container",style:t.outerContainerStyle},[i("div",{style:t.innerContainerStyle},[i("div",{style:t.bgImageWrapperStyle},[i("div",{style:t.smallBgImageStyle}),i("div",{staticClass:"bg-image",style:t.bgImageStyle})]),i("div",{style:t.gradientStyle}),i("div",{style:t.maskStyle})])]):t.isColorExtend?i("div",{staticClass:"outer-container",style:t.outerContainerStyle}):t._e(),i("div",{staticClass:"__code_module-content",class:{"is-card-style":t.isCardStyle,"is-vertical-center":t.headCmpInfo.isVerticalCenter},style:t.$$setStyle({common:Object.assign({},t.minHeight?{minHeight:t.minHeight+"px"}:{},t.needFlexCenter()?{justifyContent:"center",position:"relative"}:{})})},[i("div",{staticClass:"head-wrapper",style:{background:t.commonInfo.isCompEmpty?"":"pure"===t.commonInfo.codeColorInfo.type||t.isColorExtend?t.commonInfo.codeColorInfo.themeColor:t.$$getValue(t.commonInfo,"codeColorInfo.gradient.gradientCSS")}},[t.isTopImg()||"summary"===t.codeType?t._e():i("tempate",[i("code-title",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.codeHeaderTitleComputed,statusList:t.statusList,currentFontSize:t.currentFontSize,headCmpInfo:t.headCmpInfo,isCardStyle:t.isCardStyle,codeTitleFormat:t.codeTitleFormat}}),i("notary-card",{attrs:{"code-data":t.codeData,headCmpInfo:t.headCmpInfo},on:{tip:t.tip}})],1),i("head-module",{attrs:{codeData:t.codeData,qrcodeTopComponentI:t.qrcodeTopComponentI,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),codeColorInfo:t.commonInfo.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,title:t.codeHeaderTitleComputed,swiperBgColor:t.swiperBgColor,allImgs:t.allImgs,bottomColor:t.bottomColor,showRecordView:t.showRecordExceptFloat,hasStatusOrTask:!!t.tasksList.length||!!t.statusList.length,headCmpInfo:t.headCmpInfo,currentFontSize:t.currentFontSize,isCardStyle:t.isCardStyle,hasOpenMsg:t.$$getValue(t.codeData,"hasOpenMsg"),isColorExtend:t.isColorExtend},on:{fileReadToMina:t.onFileReadToMina}}),t.isTopImg()?[i("code-title",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.codeHeaderTitleComputed,statusList:t.statusList,headCmpInfo:t.headCmpInfo,codeTitleFormat:t.codeTitleFormat}}),i("notary-card",{attrs:{"code-data":t.codeData,headCmpInfo:t.headCmpInfo},on:{tip:t.tip}})]:t._e(),i("code-status",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,url:t.url,codeData:t.codeData,statusList:t.statusList,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),hasBottomBorder:t.commonInfo.showRecordView||!!t.tasksList.length,currentFontSize:t.currentFontSize,headCmpInfo:t.headCmpInfo,wxTips:t.wxTips},on:{showTip:t.tip}}),i("code-tasks",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.codeHeaderTitleComputed,url:t.url,codeData:t.codeData,tasksList:t.tasksList,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),hasBottomBorder:t.commonInfo.showRecordView,hasStatusList:!!t.statusList.length,headCmpInfo:t.headCmpInfo}}),!t.noRecord&&"summary"!==t.codeType&&t.commonInfo.isRecordCode&&(t.commonInfo.hasOpenRecordView&&!t.richShowRecordView||t.commonInfo.hasOpenRecordLog||1===t.$$getValue(t.codeData,"qrcode_record.log_msg")&&t.$$getValue(t.codeData,"operateData.length"))&&t.isRecordOperateTop?i("RecordPreview",{attrs:{"code-data":t.codeData,showToMinaTips:t.showToMinaTips,originalId:t.originalId,wxConfigReady:t.wxConfigReady,isH5FromWeixin:t.isH5FromWeixin,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),noNewestRecord:t.richShowRecordView,hasOpenRecordLog:t.commonInfo.hasOpenRecordLog,title:t.codeHeaderTitleComputed,showOperatePanel:t.operatePos===t.Operate_Pos.Head,showDynamic:t.dynamicPos===t.DynamicPos.Head,fontSizeMsg:t.fontSizeMsg,currentFontSize:t.currentFontSize,cmpInfo:t.headCmpInfo,dataType:t.codeType},on:{showTip:t.tip}}):t._e()],2),i("div",{class:"content-wrapper "+(t.frompc&&"normal_new"===t.categoryType?"summary-pc-wrapper":"")+" "+(t.isDarkBgColor?"is-dark-bg-color":"")},["summary"===t.codeType?i("summary-action",{attrs:{title:t.codeHeaderTitleComputed,sort:t.summaryCodeSort,categoryType:t.categoryType,qrcodeCount:t.qrcodeCount},on:{search:t.onSummaryCodeSearch,sort:t.onSummaryCodeSort,changeCategoryType:t.changeCategoryType,setIsSearching:t.setIsSearching}}):t._e(),t._l(t.codeDataQrcodeCompontentComputed,(function(e){return i("div",{key:e.id},["audio"===e.component_code&&(!e.is_empty_component||3!==t.$$getValue(t.codeData,"qrcode_record.tpl_qrcode_status")||(0===t.$$getValue(t.codeData,"soncode_edit_position")||3===t.$$getValue(t.codeData,"soncode_edit_position"))&&t.subCodeEdit_frompc&&5!==t.editAuthType)||"batchAudio"===e.component_code?i("div",{staticClass:"comp-wrap audio-wrap",attrs:{"data-type":e.component_code}},[i("audio-module",{attrs:{audioApply:e,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),currentFontSize:t.currentFontSize}})],1):t._e(),"video"!==e.component_code||e.is_empty_component&&3===t.$$getValue(t.codeData,"qrcode_record.tpl_qrcode_status")&&(0!==t.$$getValue(t.codeData,"soncode_edit_position")&&3!==t.$$getValue(t.codeData,"soncode_edit_position")||!t.subCodeEdit_frompc||5===t.editAuthType)?t._e():i("div",{staticClass:"comp-wrap video-wrap",attrs:{"data-type":e.component_code}},[i("video-module",{attrs:{data:e,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),currentFontSize:t.currentFontSize}})],1),"batchVideo"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-video",{attrs:{data:e,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1)}})],1):t._e(),"excelTable"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-table",{attrs:{data:e}})],1):t._e(),"batchTable"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-table",{attrs:{data:e}})],1):t._e(),"contactus"===e.component_code&&(t.$$getValue(e,"attribute_list.0.title.value")||t.$$getValue(e,"attribute_list.0.contact_phone.value")||t.$$getValue(e,"attribute_list.0.contact_mail.value")||t.$$getValue(e,"attribute_list.0.address.value")||t.$$getValue(e,"attribute_list.0.work_time.value"))?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("contact-module",{attrs:{data:e}})],1):t._e(),"address"===e.component_code&&t.$$getValue(e,"attribute_list.0.address.value")?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("address-module",{attrs:{data:e}})],1):t._e(),"batchImage"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-image",{attrs:{data:e,allImgs:t.allImgs}})],1):t._e(),"batchLocate"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-location",{attrs:{data:e}})],1):t._e(),"file"===e.component_code&&(!e.is_empty_component||3!==t.$$getValue(t.codeData,"qrcode_record.tpl_qrcode_status")||(0===t.$$getValue(t.codeData,"soncode_edit_position")||3===t.$$getValue(t.codeData,"soncode_edit_position"))&&t.subCodeEdit_frompc&&5!==t.editAuthType)||"batchFile"===e.component_code?i("div",{staticClass:"comp-wrap file-wrap",attrs:{"data-type":e.component_code}},[i("file-module",{attrs:{data:e,currentFontSize:t.currentFontSize}})],1):t._e(),"text"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("text-module",{attrs:{data:e,codeData:t.codeData,dataType:t.codeType,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),isDarkBgColor:t.isDarkBgColor,isColorExtend:t.isColorExtend},on:{showTip:t.tip,showToOtherMinaTip:t.toOtherMina,showToCliMina:t.toCliMina}})],1):t._e(),"batchText"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-text",{attrs:{data:e}})],1):t._e(),"redirect"===e.component_code?i("div",{staticClass:"comp-wrap",class:"summary"===t.codeType?"skip-preview-summary":"",attrs:{"data-type":e.component_code}},[t.summaryLoading?i("div",{staticClass:"loading"},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):i("redirect-module",{attrs:{data:e,dataType:t.codeType,summaryFilter:t.summaryFilter,url:t.url,pwd:t.pwd,codeData:t.codeData,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),summaryCodeCurPage:t.summaryCodeCurPage,originalId:t.originalId,orgValidParams:t.orgValidParams,categoryType:t.categoryType,isSearching:t.isSearching},on:{showTip:t.tip,asyncRenderCompManual:t.asyncRenderManual}})],1):t._e(),"image"!==e.component_code||e.is_empty_component&&3===t.$$getValue(t.codeData,"qrcode_record.tpl_qrcode_status")&&(0!==t.$$getValue(t.codeData,"soncode_edit_position")&&3!==t.$$getValue(t.codeData,"soncode_edit_position")||!t.subCodeEdit_frompc||5===t.editAuthType)?t._e():i("div",{staticClass:"no-padding-wrap img-wrap"},[i("image-module",{attrs:{data:e,codeColorInfo:t.commonInfo.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,allImgs:t.allImgs,currentFontSize:t.currentFontSize,isColorExtend:t.isColorExtend}})],1),"table"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("table-module",{attrs:{data:e}})],1):t._e()])}))],2),!t.noRecord&&"summary"!==t.codeType&&t.commonInfo.isRecordCode&&(t.commonInfo.hasOpenRecordView&&!t.richShowRecordView||t.commonInfo.hasOpenRecordLog||1===t.$$getValue(t.codeData,"qrcode_record.log_msg")&&t.$$getValue(t.codeData,"operateData.length"))&&t.isRecordOperateBottom?i("RecordPreview",{attrs:{"code-data":t.codeData,showToMinaTips:t.showToMinaTips,originalId:t.originalId,wxConfigReady:t.wxConfigReady,isH5FromWeixin:t.isH5FromWeixin,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),noNewestRecord:t.richShowRecordView,hasOpenRecordLog:t.commonInfo.hasOpenRecordLog,title:t.codeHeaderTitleComputed,showOperatePanel:t.operatePos===t.Operate_Pos.BodyBottom,showDynamic:t.dynamicPos===t.DynamicPos.Body,placeBottom:"",currentFontSizeWithoutApply:t.currentFontSize,fontSizeMsg:t.fontSizeMsg,currentFontSize:t.currentFontSize,afterContent:t.hasContent&&!t.isColorExtend,cmpInfo:t.footCmpInfo,isBgImgMode:t.isBgImgMode,hasCodeContent:t.hasCodeContent,dataType:t.codeType,isColorExtend:t.isColorExtend,isCompEmpty:t.commonInfo.isCompEmpty},on:{showTip:t.tip}}):t._e(),t.codeData.hasOpenMsg&&!t.commonInfo.isCompEmpty?i("div",{staticClass:"footer-padding-el",style:"padding-top:"+t.$$u(40)+";"}):t._e()],1),!t.headCmpInfo.isVerticalCenter&&t.codeData.hasOpenMsg?i("div",{staticClass:"placeholder",style:"height: "+t.$$u(12)+";width: 100%;background-color:#ededed"}):t._e(),i("message-list",{attrs:{"code-data":t.codeData,fontSizeMsg:t.fontSizeMsg},on:{showTip:t.tip}}),t.noBottomContent?t._e():i("div",{staticClass:"__code_bottom-content"},[i("div",{staticClass:"pd16"},[i("code-bottom-content",{attrs:{"code-data":t.codeData,isRecordCode:t.commonInfo.isRecordCode,validInfo:t.validInfo,bottomColor:t.bottomColor,isEnableToMina:t.isEnableToMina,originalId:t.originalId},on:{showTip:t.tip}})],1)]),i("message",{attrs:{"code-data":t.codeData},on:{showTip:t.tip}}),t.showExpandBtn||t.showToMinaTips?i("div",{staticClass:"bottom-btn-placeholder",style:(t.codeData.hasOpenMsg?"background-color:#ededed;":"")+t.calcHeight()}):t._e()],1)]],2):t._e(),t.showToMinaTips&&t.$$appStore.wxConfigReady?i("div",{staticClass:"tipsWrapper",style:t.calcMinaBottom()},[i("div",{staticClass:"tipsTitle"},[t._v(" "+t._s(t.commonInfo.isRecordCode?"表单仅支持在微信小程序中填写":"草料二维码小程序查看，效果更佳")+" ")]),i("div",{staticClass:"minaBtn"},[t._v("打开")]),i("div",{staticStyle:{position:"absolute",left:"0",top:"0",bottom:"0",right:"0"}},[i("wx-open-launch-weapp",{staticClass:"union-launch-btn",staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{"data-type":"topToMina",username:t.originalId,path:"/pages/code/code.html?q="+t.$$appStore.h5QueryString.url}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 270px; background: #000; color: #fff; visibility: hidden }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1)]):t._e()]),t.toMinaFail?i("wxwork-error-page",{attrs:{isWorkWatched:t.isWorkWatched,orgName:t.orgName,isNotSameCompany:t.isNotSameCompany}}):t._e(),i("Modal",{ref:"tipModal",attrs:{content:t.wxTips,showCancel:!1,tip:"请使用微信扫一扫","confirm-name":"我知道了","confirm-content":"","cancel-content":""}}),3===t.$$getValue(t.codeData,"qrcode_record.tpl_qrcode_status")&&1===t.$$getValue(t.codeData,"soncode_edit_position")&&t.subCodeEdit_frompc&&5!==t.editAuthType?i("div",{staticClass:"subCodeEditIcon",on:{click:t.showSubCodeEditTip}},[i("i",{staticClass:"clifont anticon-edit"}),t._v(" 编辑 ")]):t._e()],1):t._e()},l=[],d=(i("13d5"),i("caad"),i("2ac6")),p=i("005c"),h=i("4a75"),u=i("2173"),m=i("1599"),g=i("08f7"),_=i("cac3"),f=i("1949");const v=t=>{const{auth_type:e,group_list:i=[]}=Object(g["a"])(t,"auth_list.0")||{};if(e===_["b"].WxWork)return!0;let o=!0;return Object(f["a"])(i,t=>{5!==t.group_type&&(o=!1)}),e===_["b"].Group&&o};var y=i("f1d0"),b=i("131c"),w=i("03d1"),C=i("d197"),$=i("8e05");class O{constructor({project:t,position:e,statusList:i,tasksList:o,preData:a,stateShowMode:s,qrcodeTopComponent:r,qrcodeCompontent:n,recordSummaryStatus:c,expandLog:l,qrcodeRecord:d,formData:p,isEditor:h,soncodeEditPosition:u,enableEditMode:m,recordMsg:g,hasDynamicViewAuth:_,operateMsg:f,isBgImgMode:v}){var w,$,O,S,j,I,T;const x=Object(b["r"])(g),k=Object(b["w"])(g),M=x===C["d"].Head||k===C["i"].Head,D=x===C["d"].Body||k===C["i"].BodyBottom,P=x===C["d"].Head,V=x===C["d"].Body,L=k===C["i"].Head,R=k===C["i"].BodyBottom,q=Object(b["k"])(null===g||void 0===g||null===(w=g.auth_info)||void 0===w?void 0:w.auth_list,t=>{const{data_type:e,privi_type:i}=t;return 7===e&&"visible"===i}),{log_status:E}=null!==d&&void 0!==d?d:{},F=Object(b["I"])([1,"1"],E),z=Object(b["j"])(n,t=>{const{component_code:e}=t;return!Object(b["I"])(["recordlog","recordview"],e)});let B=!0;Object(b["m"])(r,t=>{const{component_code:e,status:i}=t;if(Object(b["I"])(["audio","video","image","file"],e)&&!Object(b["I"])([1,"1"],i))return B=!1,!1});const H=!z.length,A=H&&B,W=F&&!(null===f||void 0===f||!f.length)||!c;Object(b["a"])(this,{project:t,position:e,statusList:i,tasksList:o,preData:a,stateShowMode:s,qrcodeTopComponent:r,qrcodeCompontent:n,recordSummaryStatus:c,expandLog:l,qrcodeRecord:d,formData:p,isEditor:h,soncodeEditPosition:u,enableEditMode:m,recordMsg:g,hasDynamicViewAuth:_,operateMsg:f,isBgImgMode:v,dynamicShowPos:x,operateShowPos:k,isRecordOperateTop:M,isRecordOperateBottom:D,recordViewAuth:q,isRecordCode:F,isCodeEmpty:H,isComponentEmpty:A,showRecordOperate:W,isDynamicPanelTop:P,isDynamicPanelBottom:V,isOperatePanelTop:L,isOperatePanelBottom:R});let N=[];const U=this.getHeadImage();if(U){const{attribute_list:t}=U;N=Object(b["j"])(t,t=>{var e;return!(null===(e=t.image_url)||void 0===e||!e.value)})}const Q=(null===($=N[0])||void 0===$||null===(O=$.image_style)||void 0===O?void 0:O.value)||y["e"].IMAGE_STYLE_1,G=(null===(S=N[0])||void 0===S||null===(j=S.is_gradient)||void 0===j?void 0:j.value)||y["d"].NONE,Y=(null===(I=N[0])||void 0===I||null===(T=I.prew_type)||void 0===T?void 0:T.value)||"1",J=N.length>1;Object(b["a"])(this,{headImgStyle:Q,headImgGradient:G,headImgPrewType:Y,headImgIsMultiple:J,isTopImg:Q===y["e"].IMAGE_STYLE_3})}isOnlyTitleShow(){const{preData:t,isRecordCode:e,isComponentEmpty:i}=this,{codeHeaderTitleInfo:o}=null!==t&&void 0!==t?t:{},{title:a}=null!==o&&void 0!==o?o:{};return a&&i&&!e}isTitleVerticalCenter(){const{statusList:t,tasksList:e,isRecordCode:i,isCodeEmpty:o}=this;return!(null!==t&&void 0!==t&&t.length)&&!(null!==e&&void 0!==e&&e.length)&&o&&!i}isHistoryContentShow(){const{preData:t,isRecordCode:e,isComponentEmpty:i}=this,{codeHeaderTitleInfo:o}=null!==t&&void 0!==t?t:{},{title:a}=null!==o&&void 0!==o?o:{};return(a||!i||e)&&!(a&&i&&!e)}isHistoryContentVerticalCenter(){const{isCodeEmpty:t,showRecordOperate:e}=this;return t&&!e}isVerticalCenter(){const{isTopImg:t,headImgPrewType:e,headImgIsMultiple:i,statusList:o,tasksList:a}=this;return this.isOnlyTitleShow()&&this.isTitleVerticalCenter()||this.isHistoryContentShow()&&this.isHistoryContentVerticalCenter()&&!t&&!("1"===e&&i)&&!(null!==o&&void 0!==o&&o.length)&&!(null!==a&&void 0!==a&&a.length)}hasStatus(){const{statusList:t}=this;return!(null===t||void 0===t||!t.length)}isHistoryNameShow(){const{preData:t,isTopImg:e}=this,{codeHeaderTitleInfo:i}=null!==t&&void 0!==t?t:{},{title:o}=null!==i&&void 0!==i?i:{};return o&&!e}isTitle3Show(){const t=this.isHistoryContentShow(),e=this.hasStatus(),i=this.isHistoryNameShow();return t&&!e&&i}isTitle4Show(){const{isTopImg:t,preData:e}=this,{codeHeaderTitleInfo:i}=null!==e&&void 0!==e?e:{},{title:o}=null!==i&&void 0!==i?i:{},a=this.isHistoryContentShow();return a&&t&&o}isTitleShow(){const t=this.isOnlyTitleShow(),e=this.isSpcTitleShow(),i=this.isHistoryNameShow(),o=this.isTitle3Show(),a=this.isTitle4Show();return t||e&&i||o||a}hasStatusOrTask(){const{statusList:t,tasksList:e}=this;return!!(null!==t&&void 0!==t&&t.length||null!==e&&void 0!==e&&e.length)}isSpcTitleShow(){const{statusList:t,preData:e,isRecordCode:i,isComponentEmpty:o}=this,{codeHeaderTitleInfo:a}=null!==e&&void 0!==e?e:{},{title:s}=null!==a&&void 0!==a?a:{};return!(null===t||void 0===t||!t.length)&&(s||!o||i)&&!(s&&o&&!i)}getTitles(){const{preData:t}=this,{codeHeaderTitleInfo:e}=null!==t&&void 0!==t?t:{},{title:i}=null!==e&&void 0!==e?e:{};return i?Object(b["V"])(i.split(/(\n|\r\n)/g),t=>{if(t.length<=0)return t;if(t.length<=6)return{prefix:t};const e=t.substring(0,t.length-5),i=t.slice(-5);return{prefix:e,suffix:i}}):[]}hasTitlePlaceholder(){const{preData:t}=this,{codeHeaderTitleInfo:e}=null!==t&&void 0!==t?t:{},{title:i}=null!==e&&void 0!==e?e:{};return!!i&&(Object(b["E"])(i,"placeholder-wrapper")||Object(b["E"])(i,"placeholder-edit-nav")||Object(b["E"])(i,"placeholder-no-edit-nav"))}isCardStyle(){var t,e,i,o;const{qrcodeTopComponent:a}=this,s=Object(b["k"])(a,t=>"file"===(null===t||void 0===t?void 0:t.component_code)),r=null!==(t=null===s||void 0===s||null===(e=s.attribute_list)||void 0===e||null===(i=e[0])||void 0===i||null===(o=i.file_style)||void 0===o?void 0:o.value)&&void 0!==t?t:"";return"1"===r}getTitleGap(){const{preData:t,isTopImg:e,headImgGradient:i,headImgPrewType:o,headImgIsMultiple:a,isBgImgMode:s}=this,{codeHeaderTitleInfo:r}=null!==t&&void 0!==t?t:{},{title:n}=null!==r&&void 0!==r?r:{},c={},l=this.isOnlyTitleShow(),d=this.hasStatus(),p=this.isSpcTitleShow(),h=this.isHistoryNameShow(),u=this.isHistoryContentShow(),m=this.isRecordOperationShow(),g=this.isRecordCheckShow(),_=this.isTitle3Show(),f=this.isVerticalCenter(),v=this.isCardStyle();if(l)Object(b["a"])(c,{top:0,bottom:0}),(d||m&&g)&&Object(b["a"])(c,{top:12,bottom:16});else if(p&&h||u&&!d&&h)Object(b["a"])(c,{top:16,bottom:24}),d&&Object(b["a"])(c,{top:12,bottom:16});else if(u&&e){Object(b["a"])(c,{top:0,bottom:0}),n&&Object(b["a"])(c,{top:16,bottom:16});const t=this.getTitles(),e=this.hasTitlePlaceholder();d&&(t.length||e)&&Object(b["a"])(c,{top:12,bottom:16})}return e&&Object(b["I"])([y["d"].BOTTOM,y["d"].TOP_BOTTOM],i)&&("1"!==o&&a?Object(b["a"])(c,{offset:-16,topSwiperDotsOffset:-6}):Object(b["a"])(c,{top:12})),f&&!v?Object(b["a"])(c,{top:0}):s&&_&&Object(b["a"])(c,{top:32}),c}getNotaryGap(){return{top:0,bottom:12}}getStatusGap(){const{stateShowMode:t}=this,e=t===y["b"].TwoCol,i=!1;return{top:e&&i?8:0,bottom:12}}getTaskGap(){const{preData:t}=this,{codeHeaderTitleInfo:e}=null!==t&&void 0!==t?t:{},{title:i}=null!==e&&void 0!==e?e:{},o=this.getHeadModule(),a=this.hasStatus();return{top:i||o||a?0:12,bottom:12}}getHeadModule(){const{qrcodeTopComponent:t}=this;return Object(b["k"])(t,t=>{const{component_code:e,status:i}=t;return Object(b["I"])(["audio","video","image","file"],e)&&!Object(b["I"])([1,"1"],i)})}getHeadImage(){const t=this.getHeadModule(),{component_code:e}=null!==t&&void 0!==t?t:{};return"image"===e?t:null}isHeadImageEmpty(){const{qrcodeRecord:t,formData:e,isEditor:i,soncodeEditPosition:o,enableEditMode:a,project:s}=this,{tpl_qrcode_status:r}=null!==t&&void 0!==t?t:{},n=this.getHeadModule(),{component_code:c,is_empty_component:l}=null!==n&&void 0!==n?n:{},{id:d,fieldId:p}=Object(b["A"])(n);let h;if(s===y["h"].WXA){const t=Object(b["s"])(e),{canEdit:s}=t[p]||{},r=Object(b["z"])({soncodeEditPosition:o,enableEditMode:a});h=i&&r&&s}else s===y["h"].MPCLI&&(h=i);return"image"===c&&d&&(l||4===r)&&4!==r&&!(3===r&&h)}isRecordOperateWrapperShow(){const{position:t,isRecordOperateTop:e,isRecordOperateBottom:i,showRecordOperate:o}=this;return o&&("top"===t&&e||"bottom"===t&&i)}isHeadModuleLast(){const{preData:t,isTopImg:e}=this,{codeHeaderTitleInfo:i}=null!==t&&void 0!==t?t:{},{title:o}=null!==i&&void 0!==i?i:{},a=this.hasStatusOrTask();let s;return s=e?!o&&!a:!a,s}isRecordOperationShow(){const{recordSummaryStatus:t}=this,e=this.isRecordItemContentShow();return!t||e}isDynamicShow(){const{dynamicShowPos:t,position:e}=this;return Object(b["I"])(["top","formList"],e)&&t===C["d"].Head||"bottom"===e&&t===C["d"].Body}isCodeRecordCheckShow(){return this.isRecordCheckShow(!0)}isRecordCheckShow(t=!1){const{recordSummaryStatus:e,dynamicShowPos:i,hasDynamicViewAuth:o,recordViewAuth:a,project:s}=this,{hide_nopower:r=0}=null!==a&&void 0!==a?a:{},n=this.isDynamicShow();return!e&&i!==C["d"].Hide&&(s===y["h"].WXA&&(o||1!==r)||s===y["h"].MPCLI)&&(n||t)}isRecordItemPanelShowInPage(){const{expandLog:t,operateMsg:e}=this;return!Object(b["I"])([$["b"].Bottom,$["b"].Hide],t)&&!(null===e||void 0===e||!e.length)}isRecordItemContentShow(){var t,e,i;const{expandLog:o,operateShowPos:a,position:s,operateMsg:r}=this;let n=!1;return"top"===s?n=Object(b["I"])([$["b"].Bottom,$["b"].Hide],o)||a===C["i"].BodyBottom:"bottom"===s&&(n=Object(b["I"])([$["b"].Bottom,$["b"].Hide],o)||a===C["i"].Head),null!==r&&void 0!==r&&r.length&&(o!==$["b"].Expand||1!==r.length||null!==(t=r[0])&&void 0!==t&&null!==(e=t.operation_msg)&&void 0!==e&&null!==(i=e.element_list)&&void 0!==i&&i.length)||(n=!0),!n}isRecordContentEmpty(){const t=this.isRecordOperationShow(),e=this.isRecordCheckShow(),i=this.isRecordItemContentShow(),o=t&&(e||i);return!o}getHeadModuleGap(){const{recordSummaryStatus:t=1,expandLog:e,preData:i,isCodeEmpty:o,showRecordOperate:a,headImgStyle:s}=this,r=this.isHeadImageEmpty(),n=this.hasStatusOrTask(),c=!t,{codeColorInfo:l,codeHeaderTitleInfo:d}=null!==i&&void 0!==i?i:{},{themeColor:p="",type:h="",foreColor:u=""}=null!==l&&void 0!==l?l:{},{title:m}=null!==d&&void 0!==d?d:{},g=c||e!==$["b"].Bottom;let _,f=!1;if(s===y["e"].IMAGE_STYLE_3&&m?_=0:a&&g||n?(_=12,f=!0):s!==y["e"].IMAGE_STYLE_1||o?_=0:(_=28,(Object(b["I"])(p,"#fff")||"gradient"===h&&Object(b["I"])(["#000","#000000"],u))&&(_=16)),o&&!a&&s!==y["e"].IMAGE_STYLE_1&&(_=32),f){const t=this.isHeadModuleLast(),e=this.isRecordContentEmpty(),i=this.isRecordOperateWrapperShow();(t&&Object(b["I"])([y["e"].IMAGE_STYLE_2,y["e"].IMAGE_STYLE_3],s)&&!i||t&&Object(b["I"])([y["e"].IMAGE_STYLE_2,y["e"].IMAGE_STYLE_3],s)&&i&&e)&&(_=0)}return r&&(_=0),{top:0,bottom:_}}getRecordOperateWrapperGapTop(){const{preData:t,statusList:e,tasksList:i}=this,{codeHeaderTitleInfo:o}=null!==t&&void 0!==t?t:{},{title:a}=null!==o&&void 0!==o?o:{},s=this.getHeadModule();let r=0;return a||s||null!==e&&void 0!==e&&e.length||null!==i&&void 0!==i&&i.length||(r=12),r}getRecordOperationGapTop(){const{preData:t,qrcodeCompontent:e,position:i}=this;let o=0;const a=Object(b["j"])(e,t=>{const{component_code:e}=t;return"recordlog"!==e}),s=a.length>0&&t;return"bottom"===i&&s&&(o=16),o}fixedRecordOperateBottom(){let t=null;const{position:e,isCodeEmpty:i,isDynamicPanelTop:o,isDynamicPanelBottom:a,isOperatePanelTop:s,isOperatePanelBottom:r,project:n}=this;return"top"===e&&i&&o&&this.isCodeRecordCheckShow()&&r&&this.isRecordItemPanelShowInPage()&&(t=n===y["h"].WXA?0:12),"top"===e&&i&&s&&this.isRecordItemPanelShowInPage()&&a&&this.isCodeRecordCheckShow()&&(t=n===y["h"].WXA?0:12),{operateBottom:t}}getRecordOperationGapBottom(){const{expandLog:t,preData:e}=this,{codeColorInfo:i}=null!==e&&void 0!==e?e:{},{themeColor:o,type:a}=null!==i&&void 0!==i?i:{},s=this.isRecordContentEmpty();let r=Object(b["I"])(["#fff","#ffffff"],o)||"gradient"===a?16:28;t!==$["b"].BlockList&&s&&(r=0);const{operateBottom:n}=this.fixedRecordOperateBottom();return null!=n&&(r=n),r}getRecordCheckGap(){const t=this.getRecordOperateWrapperGapTop(),e=this.getRecordOperationGapTop(),i=this.getRecordOperationGapBottom(),o=this.isRecordItemContentShow();return{top:t+e,bottom:o?0:i}}getRecordItemContentGap(){var t;const{recordViewAuth:e,recordMsg:i,project:o}=this,{hide_nopower:a=0}=null!==e&&void 0!==e?e:{},s=this.isRecordCheckShow(),r=this.isDynamicShow(),n=1===a&&(null===i||void 0===i||null===(t=i.auth_info)||void 0===t?void 0:t.power_status)!==C["n"].HAS,c=(o===y["h"].WXA&&!n||o===y["h"].MPCLI)&&r;let l=0;if(s&&c)l=12;else if(!s){const t=this.getRecordOperateWrapperGapTop(),e=this.getRecordOperationGapTop();l=t+e}const d=this.getRecordOperationGapBottom();return{top:l,bottom:d}}getData(){const{isTopImg:t}=this,e=this.isVerticalCenter(),i=this.isOnlyTitleShow(),o=this.isHistoryContentShow(),a=this.hasStatus(),s=this.isHistoryNameShow(),r=this.isTitle3Show(),n=this.isTitle4Show(),c=this.isTitleShow(),l=this.hasStatusOrTask(),d=this.isSpcTitleShow(),p=this.isRecordOperateWrapperShow(),h=this.isRecordOperationShow(),u=this.isRecordCheckShow(),m=this.isRecordItemContentShow(),g=this.getTitleGap(),_=this.getNotaryGap(),f=this.getStatusGap(),v=this.getTaskGap(),y=this.getHeadModuleGap(),b=this.getRecordCheckGap(),w=this.getRecordItemContentGap();return{isTopImg:t,isVerticalCenter:e,isOnlyTitleShow:i,isHistoryContentShow:o,hasStatus:a,isHistoryNameShow:s,isTitle3Show:r,isTitle4Show:n,isTitleShow:c,hasStatusOrTask:l,isSpcTitleShow:d,isRecordOperateWrapperShow:p,isRecordOperationShow:h,isRecordCheckShow:u,isRecordItemContentShow:m,title:{gap:g},notary:{gap:_},status:{gap:f},task:{gap:v},headModule:{gap:y},recordCheck:{gap:b},recordItemContent:{gap:w}}}}var S=O,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"title-wrapper "+(t.title?"":"x-noTitle")},[t.title&&t.titleIsPlaceholder?i("pre",{class:"common-title x-title-is-placeholder "+t.titleType+" "+(t.statusList.length?"common-title-ForStatus":"")+"\n    font-size-"+(t.codeTitleFormat.fontSize||"20")+"-"+t.currentFontSize+"\n    ",style:Object.assign({},{color:t.codeTitleFormat.color||t.color,whiteSpace:t.$$appStore.codeStatus.length?"normal":"pre-wrap",fontStyle:t.codeTitleFormat.italics?"italic":"",textDecoration:t.codeTitleFormat.underline?"underline":"",fontWeight:t.codeTitleFormat.cancelBold?"normal":"",paddingTop:t.$$u(t.headCmpInfo.title.gap.top),paddingBottom:t.$$u(t.headCmpInfo.title.gap.bottom)},t.headCmpInfo.title.gap.offset?{marginTop:t.$$u(t.headCmpInfo.title.gap.offset)}:null)},t._l(t.titleList,(function(e,o){return i("span",{key:e,domProps:{innerHTML:t._s(o%2===1?e:t.htmlEnd6Text(e))}})})),0):t.title?i("pre",{class:"\n      common-title\n      "+t.titleType+"\n      "+(t.statusList.length?"common-title-ForStatus":"")+"\n      font-size-"+(t.codeTitleFormat.fontSize||"20")+"-"+t.currentFontSize+"\n      "+(t.isIos?"common-title-ios":"")+"\n    ",style:Object.assign({},{color:t.codeTitleFormat.color||t.color,whiteSpace:"pre-wrap",fontStyle:t.codeTitleFormat.italics?"italic":"",textDecoration:t.codeTitleFormat.underline?"underline":"",fontWeight:t.codeTitleFormat.cancelBold?"normal":"",paddingTop:t.$$u(t.headCmpInfo.title.gap.top),paddingBottom:t.$$u(t.headCmpInfo.title.gap.bottom)},t.headCmpInfo.title.gap.offset?{marginTop:t.$$u(t.headCmpInfo.title.gap.offset)}:null),domProps:{innerHTML:t._s(t.htmlEnd6Text(t.title))}}):t._e(),t._v(" "),t.title||"top-title"!==t.titleType?t._e():i("div",{staticClass:"virtual-title",style:{backgroundColor:t.bg}})])},I=[];let T=class extends r["d"]{constructor(){super(...arguments),this.titleType="code-title",this.titleIsPlaceholder=!1,this.titleList=[],this.excludePlaceholderTitle="",this.isIos=Object(p["s"])()}titleChange(){this.updateData()}bgChange(){this.updateData()}colorChange(){this.updateData()}beforeMount(){this.updateData()}htmlEscape(t){return t?t.replace(/</g,"&lt").replace(/>/g,"&gt"):t}htmlEnd6Text(t){if(!t)return t;const{htmlEscape:e}=this,i=Object(h["L"])(t.split(/(\n|\r\n)/g),t=>{if(t.length<=6)return t;const i=t.substring(0,t.length-6),o=t.slice(-6);return`${e(i)}<span style='white-space: nowrap;'>${e(o)}</span>`});return i.join("")}updateData(){const{codeInfo:t}=this.$$appStore;this.statusList.length&&t.isCompEmpty&&!t.isHeadCode&&!t.isRecordCode?this.titleType="top-title":!t.isCompEmpty||t.isHeadCode||t.isRecordCode?"file"!==t.headType&&"audio"!==t.headType||!t.isHeadCode||t.isRecordCode||!t.isCompEmpty||(this.titleType="top-title"):this.titleType="middle-title";const{title:e}=this;if(e&&(this.titleIsPlaceholder=Object(h["w"])(e,"placeholder-wrapper")||Object(h["w"])(e,"placeholder-edit-nav")||Object(h["w"])(e,"placeholder-no-edit-nav"),this.titleIsPlaceholder)){const t=Object(h["s"])();this.titleList=e.split(t),this.excludePlaceholderTitle=e.replace(t,"")}}};Object(s["a"])([Object(r["c"])({default:"",type:String})],T.prototype,"title",void 0),Object(s["a"])([Object(r["e"])("title")],T.prototype,"titleChange",null),Object(s["a"])([Object(r["c"])({type:Array,default:[]})],T.prototype,"statusList",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:{}})],T.prototype,"codeTitleFormat",void 0),Object(s["a"])([Object(r["c"])({default:"white",type:String})],T.prototype,"bg",void 0),Object(s["a"])([Object(r["e"])("bg")],T.prototype,"bgChange",null),Object(s["a"])([Object(r["c"])({default:"rgba(0, 0, 0, 0.87)",type:String})],T.prototype,"color",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],T.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],T.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],T.prototype,"isCardStyle",void 0),Object(s["a"])([Object(r["e"])("color")],T.prototype,"colorChange",null),T=Object(s["a"])([r["a"]],T);var x=T,k=x,M=(i("c803"),i("2877")),D=Object(M["a"])(k,j,I,!1,null,"107f54d0",null),P=D.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{ref:"launchPlaceholder",staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},[i("wx-open-launch-weapp",{staticClass:"launch-btn",staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{"data-type":t.type,username:t.originalId,path:t.path}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(" \x3c!-- 真正的手机端的跳转区域是由这块div高度撑起,调试的时候可以去掉 visibility:hidden 看效果 --\x3e <style>.btn {display: block; width: 100%; height: "+t._s(t.openLaunchHeight)+'px; background: rgba(0,0,0,0.5); color: #fff; visibility:hidden; }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1):t._e()},L=[],R=i("8f21");let q=class extends r["d"]{constructor(){super(...arguments),this.parentHeight="",this.observer=null,this.win=window}get isEnableToMina(){return Object(p["q"])()}get originalId(){return this.$$appStore.xcxOriginalId}get toMinaEnvReady(){return this.$$appStore.wxConfigReady&&this.originalId}mounted(){console.info(this.height)}beforeDestory(){this.observer&&(this.observer.disconnect(),this.observer.takeRecords(),this.observer=null)}getParent(){let t=0;const e=()=>{if(t+=1,!this.parentId)return null;const i=document.querySelector("#"+this.parentId);return i||(t>3?null:new Promise(t=>{setTimeout(()=>{t(e())},500)}))};return e()}async watchParentHeight(){const t=await this.getParent();if(!t)return;const e={childList:!0},i=()=>{const e=getComputedStyle(t).getPropertyValue("height");if(e===this.parentHeight)return;this.parentHeight=e;const i=t.getElementsByClassName("launch-placeholder")[0],{type:o,originalId:a,path:s}=this;i.innerHTML=`\n        <wx-open-launch-weapp\n          class="launch-btn"\n          data-type="${o}"\n          style="display:block;width:100%;height:100%;"\n          username="${a}"\n          path="${s}"\n        >\n          <template>\n            <style>.btn {display: block; width: 100%; height: ${e}; background: #000; color: #fff; visibility:hidden; }</style>\n            <div class="btn">打开小程序${a}</div>\n          </template>\n        </wx-open-launch-weapp>\n      `,this.addOpenLaunchListener()},{win:o}=this,a=o.MutationObserver||o.WebKitMutationObserver||o.MozMutationObserver;this.observer=new a(i),this.observer.observe(t,e)}async addOpenLaunchListener(){const t=this.$refs.launchPlaceholder;if(!t)return;const e=t.getElementsByClassName("launch-btn")[0],{type:i}=this;let o=0;const a={cvid:(new R["a"]).id};"topRecordHistory"===i?o=146063:"goRecordFormPage"===i&&(o=146056,a.expandLog=0),e.addEventListener("launch",()=>{console.log("launch"),n["a"].logClick(104,o,"",a)}),e.addEventListener("error",t=>{console.log("error");try{a.errMsg=JSON.stringify(t.detail),n["a"].logClick(104,o,"",a)}catch(e){console.log(e)}})}};Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],q.prototype,"type",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],q.prototype,"path",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],q.prototype,"parentId",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:50})],q.prototype,"height",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],q.prototype,"isWatchParent",void 0),q=Object(s["a"])([Object(r["a"])({computed:{show(){const{toMinaEnvReady:t,isEnableToMina:e,isWatchParent:i}=this,o=t&&e;return o&&(setTimeout(()=>{this.addOpenLaunchListener()},500),i&&this.watchParentHeight()),o},openLaunchHeight(){const{height:t,win:e}=this,i=Object(h["R"])(t),o=e.hotcss.rem2px(i,e.innerWidth);return o}}})],q);var E=q,F=E,z=Object(M["a"])(F,V,L,!1,null,null,null),B=z.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("i",{staticClass:"clifont anticon-about"}),t.isNotSameCompany||t.isWorkWatched?i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]):t._e(),t.isNotSameCompany||t.isWorkWatched?t._e():i("div",{staticClass:"tips"},[t._v(" 请联系管理员，为你开通「草料二维码」应用的权限 ")]),t.isNotSameCompany||t.isWorkWatched?i("div",{staticClass:"btn",staticStyle:{background:"#f2f2f2",color:"rgba(0, 0, 0, 0.85)"},on:{click:t.closePage}},[t._v(" 关闭 ")]):i("div",{staticClass:"btn",on:{click:t.goManagerTips}},[t._v(" 联系管理员开通 ")])])},A=[],W=i("3294");let N=class extends r["d"]{constructor(){super(...arguments),this.title=""}mounted(){if(console.log(this.isNotSameCompany),console.log(this.isWorkWatched),!this.isNotSameCompany)return this.isWorkWatched?(console.log(this.orgName),void(this.title=`仅限「${this.orgName}」内部员工，使用企业微信查看`)):void(this.title="你没有查看数据的权限");this.title=`该二维码仅限「${this.orgName}」内部员工查看`}goManagerTips(){const{href:t}=window.location;console.log(t),t.indexOf("exp-")>-1?window.location.href="https://app.wecom.work/595859":t.indexOf("cliim.net")>-1?window.location.href="https://app.wecom.work/121686":t.indexOf("cliim.com")>-1?window.location.href="https://app.wecom.work/255188":window.location.href="https://app.wecom.work/932263"}closePage(){Object(W["a"])()}};Object(s["a"])([Object(r["c"])({type:String,default:"未知企业"})],N.prototype,"orgName",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],N.prototype,"isNotSameCompany",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],N.prototype,"isWorkWatched",void 0),N=Object(s["a"])([Object(r["a"])({components:{}})],N);var U=N,Q=U,G=(i("29e0"),Object(M["a"])(Q,H,A,!1,null,"4fca8fca",null)),Y=G.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("i",{staticClass:"clifont anticon-about"}),t.authInfo.group_list&&t.authInfo.group_list.length?i("div",{staticClass:"title"},[t._v(" 只有"),13===t.authInfo.auth_type?i("span",[t._v("组织成员")]):t._l(t.authInfo.group_list,(function(e,o){return i("span",{key:e.id,staticClass:"group"},[e.wxwork_deptid?i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:e.corp_id,openid:e.wxwork_deptid,type:"departmentName"}}):i("span",[t._v(t._s(e.group_name))]),t.showSpit(o)?i("span",{staticClass:"split"},[t._v("、")]):t._e()],1)})),t._v("可查看 ")],2):t._e(),i("div",{staticClass:"desc"},[t._v(t._s(t.subTitle))]),t.btnText?i("div",{staticClass:"btn",on:{click:t.toCliMina}},[t._v(t._s(t.btnText))]):t._e(),i("Modal",{ref:"modal",attrs:{content:"该内容仅支持在微信中操作",showCancel:!1,tip:"请使用微信扫一扫","confirm-name":"我知道了","confirm-content":"","cancel-content":""}})],1)},X=[],K=i("ecb3");let Z=class extends r["d"]{constructor(){super(...arguments),this.subTitle="",this.btnText="",this.authInfo={}}showSpit(t){return t<this.$$getValue(this.authInfo,"group_list.length",0)-1}mounted(){const t=Object(b["C"])(this.info,"auth_list.0");this.authInfo=t;const{group_list:e,auth_type:i}=t,o=Object(h["g"])(e,t=>t.allow_join);o&&o.length?this.subTitle=13===i?"如果你属于该组织，请先加入":"如果你属于以上身份组，请先加入":this.subTitle="如有需要，请联系管理员开通权限",this.btnText=[1,13].includes(i)?"验证我的身份":""}toCliMina(){this.$$appStore.h5QueryString.frompc?this.$refs.modal.showModal():this.$emit("showTip","toMina","normal")}};Object(s["a"])([Object(r["c"])({type:Object,default:{}})],Z.prototype,"info",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:!1})],Z.prototype,"org_msg",void 0),Z=Object(s["a"])([Object(r["a"])({components:{Modal:K["a"]}})],Z);var tt=Z,et=tt,it=(i("fffd"),Object(M["a"])(et,J,X,!1,null,"066eb9ff",null)),ot=it.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 5!==t.stateShowMode&&t.statusList.length?i("div",{class:"codeStatusWrapper wrapper_"+t.stateShowMode+" "+(t.hasBottomBorder?"hasBottomBorder":"")+" "+(2===t.stateShowMode?"codeStatusWrapperCard":""),style:{marginTop:t.$$u(t.headCmpInfo.status.gap.top),marginBottom:t.$$u(t.headCmpInfo.status.gap.bottom)}},[t._l(t.statusList,(function(e,o){return i("div",{key:o,class:"statusItem_"+t.stateShowMode+" "+(3===t.stateShowMode?"twoColWrap":"statusItem "+(t.frompc?"has-active-status":"")),style:3===t.stateShowMode&&(t.statusList.length%2===0&&(o===t.statusList.length-1||o===t.statusList.length-2)||t.statusList.length%2===1&&o===t.statusList.length-1)?"margin-bottom:0;":"",attrs:{"data-id":e.state_id},on:{click:function(e){t.frompc?t.tip("edit"):t.showTip("toMina","normal")}}},[3===t.stateShowMode?[i("div",{staticClass:"title",class:"font-size-13-"+t.currentFontSize},[t._v(" "+t._s(e.state_name)+" ")]),i("div",{staticClass:"status",class:"font-size-18-"+t.currentFontSize,style:"color: "+(e.color||"#999")},[t._v(" "+t._s(e.text)+" ")]),i("div",{staticClass:"time",class:"font-size-12-"+t.currentFontSize},[t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 ")])]:1===t.stateShowMode?[i("div",{staticClass:"itemLeft"},[i("div",{staticClass:"itemTitle"},[i("span",{staticClass:"stateName",class:"font-size-17-"+t.currentFontSize},[t._v(t._s(e.state_name))]),i("span",{staticClass:"stateText",class:"font-size-17-"+t.currentFontSize,style:"color: "+(e.color||"rgba(0, 0, 0, 0.85)")},[t._v(" "+t._s(e.text)+" ")])])]),i("div",{staticClass:"itemRight"},[i("div",{staticClass:"updateTime",class:"font-size-12-"+t.currentFontSize},[t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 ")]),i("i",{staticClass:"clifont anticon-gengduo",class:"font-size-12-"+t.currentFontSize})])]:4===t.stateShowMode?[i("div",{staticClass:"cardItemWrap"},[i("div",{staticClass:"topItem",class:"font-size-15-"+t.currentFontSize},[i("div",{staticClass:"name-text"},[t._v(t._s(e.state_name))])]),i("div",{staticClass:"contItem",class:"font-size-20-"+t.currentFontSize},[i("div",{style:"color: "+(e.color||"#999")},[t._v(" "+t._s(e.text)+" ")])]),i("div",{staticClass:"otherItem",class:"font-size-12-"+t.currentFontSize},[t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 "),e.tplType7State&&e.tplType7State.remark.imgs.length?i("span",[i("i",{staticClass:"remarkImgIcon clifont anticon-youcetubiao2"}),t._v(t._s(e.tplType7State.remark.imgs.length)+" ")]):t._e()])]),i("div",{staticClass:"btnAction",class:"font-size-14-"+t.currentFontSize},[i("i",{staticClass:"clifont anticon-shuaxinzhuangtai"}),t._v(" 更新 ")])]:[i("div",{staticClass:"cardItemWrap"},[i("div",{staticClass:"topItem",class:"font-size-17-"+t.currentFontSize},[i("div",{staticClass:"name-text"},[t._v(t._s(e.state_name))])]),i("div",{staticClass:"contItem",class:"font-size-20-"+t.currentFontSize},[i("div",{style:"color: "+(e.color||"#999")},[t._v(" "+t._s(e.text)+" ")])]),i("div",{staticClass:"otherItem",class:"font-size-13-"+t.currentFontSize},[e.state_change_log&&e.state_change_log[0]?[e.state_change_log[0].wxWorkMsg&&e.state_change_log[0].wxWorkMsg.corp_id&&e.state_change_log[0].wxWorkMsg.user_id&&t.$$appStore.h5QueryString.frompc?[i("ww-open-data",{staticStyle:{display:"inline-block",color:"#333"},attrs:{corpid:e.state_change_log[0].wxWorkMsg.corp_id,openid:e.state_change_log[0].wxWorkMsg.user_id,type:"userName"}})]:i("span",{staticClass:"name"},[t._v(" "+t._s(e.state_change_log[0].opereater_name)+" ")])]:t._e(),t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 "),e.tplType7State&&e.tplType7State.remark.imgs.length?i("span",[i("i",{staticClass:"remarkImgIcon clifont anticon-youcetubiao2",class:"font-size-14-"+t.currentFontSize}),t._v(" "+t._s(e.tplType7State.remark.imgs.length)+" ")]):t._e()],2)])]],2)})),i("Modal",{ref:"modal",attrs:{content:t.wxTips,showCancel:!1,tip:"请使用微信扫一扫","confirm-name":"我知道了","confirm-content":"","cancel-content":""}})],2):t._e()},st=[];let rt=class extends r["d"]{constructor(){super(...arguments),this.frompc=!!this.$$appStore.h5QueryString.frompc,this.isFontWhite=!1,this.stateShowMode=C["c"]}beforeMount(){const t=Object(b["C"])(this.codeData,"codeCommonInfo.codeColorInfo.foreColor")||"";this.isFontWhite=Object(h["A"])(t,"#fff"),this.stateShowMode=Object(b["C"])(this.codeData,"state_show_mode",C["c"])}tip(t){const e=()=>{};t&&this.$refs.modal.showModal(e)}showTip(t,e){this.$emit("showTip",t,e)}goStatusLog({currentTarget:{dataset:{id:t}}}){if(this.$$appStore.h5QueryString.frompc&&t){const{url:e,codeData:i,isPaidUser:o}=this,a=Object(b["C"])(i,"qrcode_record.id"),s={qrocdeId:a,qrcodeRoute:e,stateId:t,isPaidUser:o};this.$$go("/pages/status-log-list/main",s)}}};Object(s["a"])([Object(r["c"])({default:"",type:String})],rt.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],rt.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],rt.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:1})],rt.prototype,"statusList",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],rt.prototype,"hasBottomBorder",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],rt.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],rt.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"该内容仅支持在微信中打开"})],rt.prototype,"wxTips",void 0),rt=Object(s["a"])([Object(r["a"])({components:{Modal:K["a"]}})],rt);var nt=rt,ct=nt,lt=(i("eda5"),Object(M["a"])(ct,at,st,!1,null,"3b6bfda6",null)),dt=lt.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.tasksList.length?i("div",{class:"codeTasksWrapper "+(t.hasBottomBorder?"hasBottomBorder":"")+" "+(t.hasStatusList?"noTopMargin":"")+" "+(t.$$appStore.h5QueryString.frompc?"fromPc":""),style:{marginTop:t.$$u(t.headCmpInfo.task.gap.top),marginBottom:t.$$u(t.headCmpInfo.task.gap.bottom)}},[i("div",{staticClass:"title"},[t._v(" 最新计划完成情况 ")]),t._l(t.tasksList,(function(e,o){return i("div",{key:o,staticClass:"item"},[i("div",{staticClass:"taskItem"},[i("div",{class:"status status-"+(0===t.$$getValue(e,"qrcode_task_record.task_filter_status")?t.$$getValue(e,"qrcode_task_record.excute_status"):"5")},[i("div",{staticClass:"status-bg"}),0===t.$$getValue(e,"qrcode_task_record.task_filter_status")?[0===t.$$getValue(e,"qrcode_task_record.excute_status")||3===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-check statusIcon"}):t._e(),1===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-time-circle statusIcon"}):t._e(),4===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-cli-close-1 statusIcon"}):t._e(),2===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-warning-circle statusIcon"}):t._e(),i("div",{staticClass:"statusText"},[t._v(" "+t._s(t.getTaskExcuteNameByStatus(t.$$getValue(e,"qrcode_task_record.excute_status")))+" ")])]:[i("i",{staticClass:"clifont anticon-no-need-circle statusIcon"}),i("div",{staticClass:"statusText"},[t._v(" 无需执行 ")])]],2),i("div",{staticClass:"content"},[i("div",{staticClass:"nameBox"},[i("div",{staticClass:"name"},[i("span",[t._v(t._s(t.$$getValue(e,"task_record.name")))]),i("div",{staticClass:"times"},[t._v(" "+t._s(t.$$getValue(e,"task_record.repeat_text"))+" ")])])]),0===t.$$getValue(e,"qrcode_task_record.task_filter_status")?i("div",[1===t.$$getValue(e,"qrcode_task_record.excute_status")||2===t.$$getValue(e,"qrcode_task_record.excute_status")?i("div",{staticClass:"content-box"},[i("div",[t._v(" 请在 "),i("span",[t._v(t._s(t.$$getValue(e,"task_excute_record.excute_end_time")))]),t._v(" 前完成 ")])]):t._e(),4===t.$$getValue(e,"qrcode_task_record.excute_status")?i("div",{staticClass:"content-box"},[i("div",[t._v(" 应在 "),i("span",[t._v(t._s(t.$$getValue(e,"task_excute_record.excute_end_time")))]),t._v(" 前完成， 已超期 ")])]):t._e(),0===t.$$getValue(e,"qrcode_task_record.excute_status")||3===t.$$getValue(e,"qrcode_task_record.excute_status")?i("div",{staticClass:"content-box"},[i("div",[t._v(" "+t._s(t.$$getValue(e,"qrcode_task_record.opereater_name")||"未命名用户")+"在"+t._s(t.$$getValue(e,"qrcode_task_record.update_time"))+" "+t._s(t.$$getValue(e,"qrcode_task_record.operate_type")||"完成")+" "),t.$$getValue(e,"qrcode_task_record.from_target_result")?[t._v(" ，"),i("span",{staticClass:"nowrap"},[t._v("结果：")]),t._v(t._s(t.$$getValue(e,"qrcode_task_record.from_target_result"))+" ")]:t._e()],2)]):t._e()]):i("div",[t.$$getValue(e,"qrcode_task_record.state_filter_msg_text")?i("div",{staticClass:"content-box"},[i("div",[t._v(" 由于"+t._s(t.$$getValue(e,"qrcode_task_record.state_filter_msg_text"))+"，本周期无需执行 ")])]):t._e()])])])])}))],2):t._e()},ht=[];let ut=class extends r["d"]{formatMsg(){Object(h["j"])(this.tasksList,t=>{t.task_excute_record.excute_end_time=this.formatTime(t.task_excute_record.excute_end_time),t.qrcode_task_record.update_time=this.formatTime(t.qrcode_task_record.update_time);let e=Object(b["C"])(t,"qrcode_task_record.state_filter_msg","");if(e){e=JSON.parse(e);const i=[];Object(h["j"])(e,t=>{i.push(`${t.state_name}为${t.state_option_text}`)}),t.qrcode_task_record.state_filter_msg_text=i.join("、")}let i="";const o=t.task_record||{},a=["日","周","月","年"],s=a[o.repeat_unite-1];i=o.repeat_scope?`每${s}${o.repeat_scope.split(",").length}次`:`每${1===o.repeat_index?"":o.repeat_index}${s}1次`,t.task_record.repeat_text=i})}getTaskExcuteColorByStatus(t){return 0===t?"#20BF64":1===t?"#166BC7":2===t?"#F57C00":3===t||4===t?"#E64340":"#166BC7"}getTaskExcuteNameByStatus(t){return 0===t?"按期完成":1===t?"待完成":2===t?"即将超期":3===t?"超期完成":4===t?"超期未完成":"待完成"}formatTime(t){const e=new Date(1e3*t),i=this.formatNumber(e.getHours()),o=this.formatNumber(e.getMinutes()),a=864e5,s=new Date((new Date).toDateString()).getTime()+a,r=s-1e3*t;if(r>2*a&&r<3*a)return`前天 ${i}:${o}`;if(r>a&&r<2*a)return`昨天 ${i}:${o}`;if(r>0&&r<a)return`今天 ${i}:${o}`;if(r<0&&-r<a)return`明天 ${i}:${o}`;if(r<0&&-r>a&&-r<2*a)return`后天 ${i}:${o}`;const n=new Date,c=n.getFullYear(),l=c!==e.getFullYear();return`${l?e.getFullYear()+"年":""}${this.formatNumber(e.getMonth()+1)}月${this.formatNumber(e.getDate())}日 ${i}:${o}`}formatNumber(t){return t=t.toString(),t[1]?t:"0"+t}};Object(s["a"])([Object(r["c"])({default:"",type:String})],ut.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ut.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],ut.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>[]})],ut.prototype,"tasksList",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ut.prototype,"hasBottomBorder",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ut.prototype,"hasStatusList",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],ut.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["e"])("tasksList")],ut.prototype,"formatMsg",null),ut=Object(s["a"])([r["a"]],ut);var mt=ut,gt=mt,_t=(i("da7e"),Object(M["a"])(gt,pt,ht,!1,null,"ed6bd2ea",null)),ft=_t.exports,vt=i("b347"),yt=i("6522"),bt=i("9f69"),wt=i("6231"),Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contact"},[i("div",{staticClass:"topView"},[t.title?i("div",{staticClass:"contactTitle",domProps:{textContent:t._s(t.title)}}):t._e(),t.note?i("div",{staticClass:"contactNote",domProps:{innerHTML:t._s(t.note.replace(/\n/g,"<br/>"))}}):t._e(),t._l(t.phonesArray,(function(e,o){return i("div",{key:o,staticClass:"contactItemWrapper",attrs:{"data-phone":e},on:{click:t.phoneCall}},[i("div",{staticClass:"contactItem"},[i("i",{staticClass:"clifont anticon-cli-phone"}),i("div",{staticClass:"content",domProps:{textContent:t._s(e)}}),i("div",{staticClass:"operation"},[t._v(" "+t._s(t.$$t("code.call"))+" ")])])])})),t._l(t.mailsArray,(function(e,o){return i("div",{key:o,staticClass:"contactItemWrapper",attrs:{"data-data":e},on:{click:t.mailCopy}},[i("div",{staticClass:"contactItem"},[i("i",{staticClass:"clifont anticon-Contact"}),i("div",{staticClass:"content",domProps:{textContent:t._s(e)}}),i("div",{staticClass:"operation"},[t._v(" "+t._s(t.$$t("code.copy"))+" ")])])])})),t.contactData.address.value?i("div",{staticClass:"contactItemWrapper",on:{click:t.openMap}},[i("div",{class:["contactItem",t.hasLocateImg?" hasLocateImg":""]},[i("i",{staticClass:"clifont anticon-cli-address-o"}),i("div",{staticClass:"content",domProps:{textContent:t._s(t.contactData.address.value)}}),t.contactData.latitude.value&&t.contactData.longitude.value?i("div",{staticClass:"operation"},[t._v(" 导航 ")]):t._e()])]):t._e(),t.hasLocateImg?i("div",{staticClass:"locateMapCard",style:{backgroundImage:"url("+t.contactData.locate_image.value+")"},on:{click:t.openMap}}):t._e()],2)])},$t=[];let Ot=class extends r["d"]{init(){this.contactData=this.data.attribute_list[0]}beforeMount(){this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}phoneCall({currentTarget:{dataset:{phone:t}}}){this.isH5?window.location.href=this.$$makePhoneCall(t):this.$$makePhoneCall({phoneNumber:t})}mailCopy({currentTarget:{dataset:{data:t}}}){this.$$setClipboardData({data:t})}openMap(){if(Object(p["l"])("nomapjump"))return;const{contactData:t}=this;let e=this.$$getValue(t,"latitude.value",""),i=this.$$getValue(t,"longitude.value","");e=parseFloat(e),i=parseFloat(i),Number.isNaN(e)||Number.isNaN(i)||(this.isH5?this.$$openLocation(e,i):this.$$openLocation({latitude:e,longitude:i,name:this.contactData.address.value,scale:14}))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ot.prototype,"data",void 0),Object(s["a"])([Object(r["e"])("data")],Ot.prototype,"refreshData",null),Ot=Object(s["a"])([Object(r["a"])({computed:{title(){const{contactData:t}=this,e=this.$$getValue(t,"title",{}),{id:i,value:o}=e;let a=o;return i||o||(a="联系我们"),a},note(){const{contactData:t}=this;return this.$$getValue(t,"work_time.value","")},color(){const t=this.$$appStore.codeInfo.codeColorInfo.themeColor,e=this.$$appStore.codeInfo.codeColorInfo.foreColor,{lowThemeColor:i}=this.$$appStore.codeInfo.codeColorInfo;return"#ffffff"===t||"#f4f4f4"===t?"#1AAD19":"#000000"===e?i:t},actionIconClass(){return{"font-size":""+(this.title?this.$$u(56):this.$$u(38)),right:this.$$u(-12),color:this.color}},phonesArray(){const{contactData:t}=this,e=this.$$getValue(t,"contact_phone.value",""),i=Object(h["V"])(e,{filterEmptyTels:!0});return i},mailsArray(){const{contactData:t}=this,e=this.$$getValue(t,"contact_mail.value",""),i=Object(h["V"])(e,{filterEmptyTels:!0});return i},isPhoneEmpty(){const{contactData:t}=this,e=this.$$getValue(t,"contact_phone.value","");return Object(h["E"])(e)},hasLocateImg(){const{contactData:t}=this;return t.address.value&&t.latitude.value&&t.longitude.value&&"1"===t.show_type.value&&t.locate_image.value}}})],Ot);var St=Ot,jt=St,It=(i("6485"),Object(M["a"])(jt,Ct,$t,!1,null,null,null)),Tt=It.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.title&&t.latitude&&t.longitude?i("div",["0"!=t.show_type&&t.locate_image?t._e():i("div",{staticClass:"textPreview",on:{click:t.openMap}},[i("i",{staticClass:"itemIcon clifont anticon-cli-address-o"}),i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")])]),"1"==t.show_type&&t.locate_image?i("div",{staticClass:"mapCard",on:{click:t.openMap}},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"address"},[t._v(" "+t._s(t.address)+" ")]),i("div",{staticClass:"mpCard_image",style:{backgroundImage:"url("+t.locate_image+")"}})]):t._e()]):t._e()},kt=[];let Mt=class extends r["d"]{constructor(){super(...arguments),this.addressData={}}init(){this.addressData=this.data.attribute_list[0]}created(){this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}openMap(){if(Object(p["l"])("nomapjump"))return;let t=this.$$getValue(this.addressData,"latitude.value"),e=this.$$getValue(this.addressData,"longitude.value");const i=this.$$getValue(this.addressData,"title.value");t=parseFloat(t),e=parseFloat(e),Number.isNaN(t)||Number.isNaN(e)||(this.isH5?this.$$openLocation(t,e):this.$$openLocation({latitude:t,longitude:e,name:i,scale:14}))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Mt.prototype,"data",void 0),Object(s["a"])([Object(r["e"])("data")],Mt.prototype,"refreshData",null),Mt=Object(s["a"])([Object(r["a"])({computed:{title(){const{addressData:t}=this;return this.$$getValue(t,"title.value","")},address(){const{addressData:t}=this;return this.$$getValue(t,"address.value","")},show_type(){const{addressData:t}=this;return this.$$getValue(t,"show_type.value","")},locate_image(){const{addressData:t}=this;return this.$$getValue(t,"locate_image.value","")},latitude(){const{addressData:t}=this;return this.$$getValue(t,"latitude.value","")},longitude(){const{addressData:t}=this;return this.$$getValue(t,"longitude.value","")}}})],Mt);var Dt=Mt,Pt=Dt,Vt=(i("d3cd"),Object(M["a"])(Pt,xt,kt,!1,null,null,null)),Lt=Vt.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.isSearching||t.summaryFilter.list_name?i("div",{class:("summary"===t.dataType||0!==t.displayStyleValue&&1!==t.displayStyleValue?"":"normalCode")+" "+("summary"===t.dataType?"summaryCode":"")+" "+("summary"===t.dataType&&"normal_new"===t.categoryType?"summaryNewCode":"")+" "+("summary"===t.dataType&&t.isCodeEmpty?"summaryCodeEmpty":"")},[t.isH5?i("div",{class:"summary"!==t.dataType?"listWrapNew":"normal"===t.categoryType?"listWarp":"normal_new"===t.categoryType?"listWarp listWarpNew":"listCardWrap"},t._l(t.stateData.attribute_list,(function(e,o){return i("div",{key:o,staticClass:"list"},["summary"===t.dataType&&"normal"===t.categoryType?i("div",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[i("div",{staticClass:"imgBox"},["qrcode"!==t.$$getValue(e,"type.value")&&"template_child"!==t.$$getValue(e,"type.value")||e.first_image?t._e():i("div",{staticClass:"listImgBox"},[i("i",{staticClass:"clifont anticon-a-outlined-qrcode22 list-code-icon-img"})]),"qrcode"!==t.$$getValue(e,"type.value")&&"template_child"!==t.$$getValue(e,"type.value")||!e.first_image?t._e():i("img",{staticClass:"firstImg",attrs:{src:e.first_image}}),"batch_qrcode"===t.$$getValue(e,"type.value")?i("div",{staticClass:"listImgBox"},[t._v(" "+t._s(e.title.shortTitle)+" ")]):t._e(),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"cateOuterWrapper",style:t.$$getValue(e,"web_url.qrcode_arr.length",0)<=1?"justify-content: center;":""},[t.$$getValue(e,"web_url.qrcode_arr.length",0)>0?i("div",{staticClass:"cateOuterWrapper",style:t.$$getValue(e,"web_url.qrcode_arr.length",0)<=1?"justify-content: center;":""},t._l(e.web_url.qrcode_arr,(function(o,a){return i("div",{key:a,staticClass:"cateOuterIconWrapper",style:{display:a>=4?"none":"block",marginTop:a>=2?t.$$u(-10):t.$$u(-6)}},[e.first_image[a]?i("img",{staticClass:"cateIconImg",style:{width:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25),height:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25)},attrs:{src:e.first_image[a]+"?x-oss-process=image/resize,w_100/quality,Q_100/interlace,1/auto-orient,1"}}):i("div",{staticClass:"cateIconWrapper",style:{width:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25),height:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25),fontSize:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(10):t.$$u(8),lineHeight:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(14):t.$$u(12)}},[i("i",{staticClass:"clifont anticon-a-outlined-qrcode22 list-code-cata-icon-img"})])])})),0):i("div",{staticClass:"emptyCategory"},[t._v("空目录")])]):t._e()]),i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"skipOmitTitle"},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")])]),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"}):t._e()]):t._e(),"summary"===t.dataType&&"normal_new"===t.categoryType?i("div",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[i("div",{staticClass:"imgBox"},["qrcode"===t.$$getValue(e,"type.value")||"template_child"===t.$$getValue(e,"type.value")||"batch_qrcode"===t.$$getValue(e,"type.value")?i("div",{staticClass:"listImgBox"},[i("i",{staticClass:"clifont anticon-a-outlined-qrcode22"})]):t._e(),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"listImgBox"},[i("img",{staticClass:"img",attrs:{src:"https://ncstatic.clewm.net/feres/a9d81c3b_4c91ad15_1668675768.png"}})]):t._e()]),i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"skipOmitTitle"},[i("div",{staticClass:"cataTitle"},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")]),i("div",{staticClass:"qrcodeCount"},[t._v(t._s(e.web_url.qrcode_count))])])]),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"}):t._e()]):t._e(),"summary"!==t.dataType||"card"!==t.categoryType||"qrcode"!==e.type.value&&"template_child"!==e.type.value&&"batch_qrcode"!==e.type.value?t._e():i("div",{staticClass:"cardCodeWrapper",style:{width:t.$$u(t.cardCodeWidth)},on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[e.first_image?i("img",{staticClass:"headerImg",style:{width:t.$$u(t.cardCodeWidth),height:t.$$u(t.cardCodeWidth)},attrs:{src:e.first_image+"?x-oss-process=image/resize,w_400/quality,Q_100/interlace,1/auto-orient,1"}}):i("div",{staticClass:"headerDefaultImg",style:{width:t.$$u(t.cardCodeWidth),height:t.$$u(t.cardCodeWidth)}},[i("i",{staticClass:"clifont anticon-a-outlined-qrcode22"})]),i("div",{staticClass:"cardCodeName"},[i("div",{staticClass:"cardOmitName"},[t._v(" "+t._s(e.title.value)+" ")])])]),"summary"===t.dataType&&"card"===t.categoryType&&"category"===e.type.value?i("div",{staticClass:"cardCategoryWrapper",on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[i("div",{staticClass:"cardInfoWrapper",style:0===e.web_url.qrcode_count?"padding: 8px 4px":""},[i("div",{staticClass:"categoryTitle"},[t._v(" "+t._s(e.title.value||"未命名目录")+" ")]),i("div",{staticClass:"qrcodeCount"},[t._v(" "+t._s(e.web_url.qrcode_count)+" ")]),i("div",{staticClass:"cardIcon weui-cell__ft clifont anticon-cli-angle-right"})]),t.$$getValue(e,"web_url.qrcode_arr.length",0)>0?i("div",{staticClass:"cardImgWrapper"},t._l(e.web_url.qrcode_arr,(function(o,a){return i("div",{key:a,staticClass:"cardAllImgWrapper"},[e.first_image[a]?i("img",{staticClass:"cardIconImg",style:{width:t.$$u(t.cardImgWidth),height:t.$$u(t.cardImgWidth)},attrs:{src:e.first_image[a]+"?x-oss-process=image/resize,w_100/quality,Q_100/interlace,1/auto-orient,1"}}):i("div",{staticClass:"cardIconImgWrapper",style:{width:t.$$u(t.cardImgWidth),height:t.$$u(t.cardImgWidth)}},[i("i",{staticClass:"clifont anticon-a-outlined-qrcode22"})])])})),0):t._e()]):t._e(),"summary"!==t.dataType?i("div",{class:(o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom")+" skipLinkStyle"+t.displayStyleValue,on:{click:function(i){return t.redirectCode(e.web_url.value,e.target_type&&e.target_type.value)}}},[0===t.displayStyleValue||1===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[1===t.displayStyleValue?i("span",{staticClass:"img1"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]):t._e(),i("span",{staticClass:"text"},[t._v(t._s(e.title.value||"未命名链接"))])]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})]):t._e(),2===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("span",{staticClass:"img2"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]),i("div",{staticClass:"arrowWarp",style:e.title.value?"":"background: none"},[i("span",{staticClass:"text"},[t._v(t._s(e.title.value||""))]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})])])]):t._e(),3===t.displayStyleValue||4===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"arrowWarp",style:"color: #"+(3===t.displayStyleValue?e.font_color.value:e.theme_color.value)+";background-color: #"+(3===t.displayStyleValue?e.theme_color.value:"fff")+"; border-color: #"+(3===t.displayStyleValue?"":e.theme_color.value)},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")])])]):t._e(),e.target_type&&"10"===e.target_type.value&&t.isEnableToMina?i("div",{staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"1"},on:{click:function(i){return t.otherMinaClick(e.web_url.value,e.target_type&&e.target_type.value)}}},[t.getMinaInfo(e.web_url.value,"gh_id")?i("wx-open-launch-weapp",{staticClass:"launch-btn",style:"display:block;width:"+t.$$u(240)+";height:100%;margin: 0 auto;",attrs:{"data-type":"ToOtherMina",username:t.getMinaInfo(e.web_url.value,"gh_id")||"",path:t.getMinaInfo(e.web_url.value,"path")||""}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 100px; background: #000; color: #fff; visibility:hidden }</style> <div class="btn">打开小程序'+t._s(t.getMinaInfo(e.web_url.value,"gh_id"))+"</div> ")])]):t._e()],1):t._e(),e.target_type&&"7"===e.target_type.value&&t.isEnableToMina?i("div",{staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"1"}},[i("wx-open-launch-weapp",{staticClass:"launch-btn",style:"display:block;width:"+t.$$u(240)+";height:100%;margin: 0 auto;",attrs:{"data-type":"goFormListPage",username:t.originalId,path:"/pages/code/code.html?q="+t.$$appStore.h5QueryString.url+"&fromH5ListTplId="+e.id}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 100px; background: #000; color: #fff; visibility:hidden }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1):t._e(),e.target_type&&"8"===e.target_type.value&&t.isEnableToMina?i("div",{staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"1"}},[i("wx-open-launch-weapp",{staticClass:"launch-btn",style:"display:block;width:"+t.$$u(240)+";height:100%;margin: 0 auto;",attrs:{"data-type":"goFormListPage",username:t.originalId,path:"/pages/code/code.html?q="+t.$$appStore.h5QueryString.url+"&fromH5RecordCheck=1"}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 100px; background: #000; color: #fff; visibility:hidden }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1):t._e()]):t._e()])})),0):t._e(),t.isWechat?i("div",{staticClass:"listWarp"},t._l(t.stateData.attribute_list,(function(e,o){return i("div",{key:o,staticClass:"list"},["category"===t.dataType?i("navigator",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",attrs:{"open-type":"navigate","hover-class":"none",url:e.web_url.value?"/pages/view-code/main?url="+e.web_url.value:""}},[i("div",{staticClass:"imgBox"},["qrcode"!==t.getCodeTypeByUrl(e.web_url.value)||e.first_image?t._e():i("div",[i("img",{staticClass:"img",attrs:{src:"https://ncstatic.clewm.net/feres/6b2aef83_5be85271_1657777453.png"}})]),"qrcode"===t.getCodeTypeByUrl(e.web_url.value)&&e.first_image?i("img",{staticClass:"firstImg",attrs:{src:e.first_image}}):t._e(),"batch"===t.getCodeTypeByUrl(e.web_url.value)?i("i",{staticClass:"clifont anticon-cli-batchicon"}):t._e(),"category "===t.getCodeTypeByUrl(e.web_url.value)?i("img",{staticClass:"catalogIcon",attrs:{src:t.catalogIcon,alt:""}}):t._e()]),i("div",{staticClass:"skipTitle"},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})]):i("navigator",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",attrs:{"open-type":"navigate","hover-class":"none",url:e.web_url.value?"/pages/view-code/main?url="+e.web_url.value:""}},[0===t.displayStyleValue||1===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[1===t.displayStyleValue?i("span",{staticClass:"img1"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]):t._e(),t._v(" "+t._s(e.title.value||"未命名链接")+" ")]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})]):t._e(),2===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("span",{staticClass:"img2"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]),i("div",{staticClass:"arrowWarp"},[i("span",[t._v(t._s(e.title.value||"未命名链接"))]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})])])]):t._e(),3===t.displayStyleValue||4===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"arrowWarp",style:"color: #"+(3===t.displayStyleValue?e.font_color.value:e.theme_color.value)+";background-color: #"+(3===t.displayStyleValue?e.theme_color.value:"fff")+"; border-color: #"+(3===t.displayStyleValue?"":e.theme_color.value)},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")])])]):t._e()])],1)})),0):t._e(),"summary"===t.dataType&&t.$$getValue(t.stateData,"page_msg.lasted_page")-t.$$getValue(t.stateData,"page_msg.current_page")>0&&t.$$getValue(t.stateData,"page_msg.current_page")-t.summaryCodeCurPage===0?i("div",{staticClass:"goNextPage",on:{click:t.goNextPage}},[t.nextPageLoading&&t.restCount?i("img",{staticClass:"loadingIcon",attrs:{src:t.loadingIcon}}):t._e(),i("span",[t._v(" "+t._s(t.nextPageLoading?"正在加载中...":"剩下"+t.restCount+"个，点击加载更多")+" ")])]):t._e(),"summary"===t.dataType&&t.isCodeEmpty?i("div",{staticClass:"summaryCodeEmptyMsg"},[t.summaryFilter.list_name?i("div",{staticClass:"noSearchCode"},[t._v(" 暂无搜索结果 ")]):[i("img",{staticClass:"summaryCodeEmptyIcon",attrs:{src:t.summaryCodeEmptyIcon,alt:""}}),i("span",[t._v("该目录下暂无内容")])]],2):t._e()]):t._e()},qt=[],Et=i("a7a1");let Ft=class extends r["d"]{constructor(){super(...arguments),this.logMsg={last_desc:{},data_list:[]},this.stateData={},this.catalogIcon=Et["l"]+"/images/mina-cli/file-box@3x.png",this.loadingIcon=Et["l"]+"/images/loading_new.gif",this.summaryCodeEmptyIcon=Et["l"]+"/images/mina-cli/mina_no_summary_code@2x.png",this.nextPageLoading=!1,this.isEnableToMina=!1,this.cardImgWidth=0,this.cardCodeWidth=0}asyncRenderCompManual(t){return t}dataChange(){if(this.data.attribute_list=Object(b["n"])(this.data.attribute_list),this.displayStyleValue=+this.$$getValue(this.data,"attribute_list.0.display_style.value","0"),this.stateData=this.data,this.getCategoryUrl()){const t=Object(b["e"])(this.data.attribute_list);Object(h["j"])(t,t=>{if(this.$$getValue(t,"web_url.attribute_id")){const e=this.$$getValue(t,"web_url.qrcode_count",0)>5?5:this.$$getValue(t,"web_url.qrcode_count",0);t.web_url.qrcode_arr=new Array(e)}const e=this.getShortTitle(this.$$getValue(t,"title.value","未命名链接"));t.title&&(t.title.shortTitle=e)}),this.getFirstImg(this.data),this.data.attribute_list=t}this.$forceUpdate()}getMinaInfo(t,e){return t||this.$emit("showTip","errorLink"),"gh_id"===e?t.split("|")[1]:"path"===e?Object(h["v"])(t.split("|")[2]):t.split("|")[0]}init(){if(this.cardImgWidth=Math.floor(60.6),this.cardCodeWidth=Math.floor(167.5),this.data.attribute_list=Object(b["n"])(this.data.attribute_list),this.displayStyleValue=+this.$$getValue(this.data,"attribute_list.0.display_style.value","0"),this.getCategoryUrl()){const t=Object(b["e"])(this.data.attribute_list);Object(h["j"])(t,t=>{if(this.$$getValue(t,"web_url.attribute_id")){const e=this.$$getValue(t,"web_url.qrcode_count",0)>5?5:this.$$getValue(t,"web_url.qrcode_count",0);t.web_url.qrcode_arr=new Array(e)}const e=this.getShortTitle(this.$$getValue(t,"title.value","未命名链接"));t.title&&(t.title.shortTitle=e)}),this.data.attribute_list=t,this.getFirstImg(this.data)}this.updateDataAndPageMsg(this.data),this.isEnableToMina=Object(p["q"])()}mounted(){this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&(this.getCategoryUrl()||this.init())}getCategoryUrl(){const{href:t}=window.location;return t.indexOf("%2Fsy%2F")>-1}getShortTitle(t){t=t||"未命名链接";const e=t.match(/[\d]|[a-zA-Z]|[\u4e00-\u9fa5]+/g)||[],i=/[\u4e00-\u9fa5]/,o=e.join("");let a;return a=i.test(e[0])?o.substring(0,2):o.substring(0,1),a}getCodeTypeByUrl(t){return Object(b["p"])(t)}otherMinaClick(t){const e=this.getMinaInfo(t,"gh_id")||"";e||this.$$toast("小程序跳转失败，请联系二维码制作者设置小程序原始ID",5e3,!1,"65%")}redirectClickLog(t,e){if(!t)return;if(!e&&0!==e)return;let i=this.$$getValue(this.codeData,"qrcode_record.id","");i=""+i;const o=this.$$getValue(this.codeData,"qrcode_record.coding","");if(0===e)n["a"].logClick(151,124e3,"活码",{qrCodeId:i,coding:o});else if(1===e)n["a"].logClick(151,124001,"模板",{qrCodeId:i,coding:o});else if(2===e)n["a"].logClick(151,124002,"批次",{qrCodeId:i,coding:o});else if(3===e)n["a"].logClick(151,124003,"子码",{qrCodeId:i,coding:o});else if(4===e)n["a"].logClick(151,124004,"目录汇总",{qrCodeId:i,coding:o});else if(5===e)n["a"].logClick(151,124005,"旧版活码",{qrCodeId:i,coding:o});else if(6===e)n["a"].logClick(151,124006,"网址",{qrCodeId:i,coding:o});else if(7===e)n["a"].logClick(151,124007,"表单",{qrCodeId:i,coding:o,recordId:t});else if(8===e)n["a"].logClick(151,124008,"记录汇总",{qrCodeId:i,coding:o});else if(10===e){const e=t,a=e.split("|");n["a"].logClick(151,124010,"其他小程序",{qrCodeId:i,coding:o,appid:a[0],ghid:a[1],path:a[2]})}}redirectCode(t,e){if(!t)return;if(this.isEnableToMina&&(7===+e||8===+e||10===+e))return;this.redirectClickLog(t,+e);const i=this.$$getValue(this.$$appStore,"h5QueryString.frompc",0),o=100,a=i?{frompc:1,msg:1,noimgprev:1,nomapjump:1,nocompjump:1,noScanCount:1,noscroll:1,_time:Date.now(),bodypb:8,bodypt:o,noRecordList:1}:{};if("summary"===this.dataType&&"batch_qrcode"===e||1===+e)window.location.href="/recent-batch-code?qrcode_route="+t;else if(6===+e||5===+e)this.isH5?window.open(t):this.openUrl(t);else if(7===+e)this.gotoRecord(t);else if(8===+e)this.goHistory();else if(2===+e){const e=t.split("|");window.location.href=`/recent-batch-code?qrcode_route=${e[3]}&batch_id=${e[1]}&batchIdx=${e[4]}`}else if(10===+e)this.$emit("showTip","otherMinaNotWx");else{let e=`/?url=${t}&${Object(b["c"])(a)}`;t.indexOf("/sy")>-1&&(e=`/?url=${t}&${Object(b["c"])(a)}&categoryType=${this.categoryType}&fromRedirect=true`),window.location.href=e}}async openUrl(t){if(this.isH5)return;const e=this.$$getValue(t.split("://"),"1");if(e){const i=new RegExp("^qr[0-9][0-9].cn/[ABCDEF].{5}$").test(e),o=new RegExp("^qr[0-9][0-9].cn/[HIJ].{5}$").test(e);if(i){const e=await n["b"].getQrcodeTypeUrl(t);if(!e)return void this.showModal(t);const{data:i,status:o}=e;if(!i||0===o)return void this.showModal(t);if(this.$$getValue(i,"url"))if("jump"===this.$$getValue(i,"type"))this.$$go("/webview/pages/webview/webview?q="+encodeURIComponent(this.$$getValue(i,"url")));else{const e=t.substring(t.length-6,t.length);e&&(t="https://c3.cli.im/"+e,this.$$go("/webview/pages/webview/webview?q="+encodeURIComponent(t)))}else this.showModal(t)}else if(o){const e=t.substring(t.length-6,t.length);e&&(t="https://c3.cli.im/"+e,this.$$go("/webview/pages/webview/webview?q="+encodeURIComponent(t)))}else this.showModal(t)}}showModal(t){this.$$showModal({title:"这是一个外部链接",content:"小程序暂不支持打开外部链接，复制链接后在浏览器中粘贴查看",confirmText:"复制链接",confirmColor:"#586C94",success({confirm:e}){e&&wx.setClipboardData({data:t})}})}gotoRecord(t){const{log_msg:e}=this.codeData,i=this.$$getValue(e,"data_list",[]);let o={};Object(h["j"])(i,e=>{e.tpl_id===+t&&(o=e)}),this.$$appStore.h5QueryString.frompc?o.id?this.$$go("/pages/record-form/main",{org_id:o.org_id,tpl_id:o.tpl_id,token:encodeURIComponent(JSON.stringify(o.record_tpl_token||{}))}):this.$$go("/pages/record-form/main",{noTpl:!0}):this.showTip()}goHistory(){this.$$appStore.h5QueryString.frompc?this.$$go("/pages/record-history/main",{isPaidUser:this.isPaidUser}):this.showTip()}showTip(){this.$emit("showTip")}async goNextPage(){const{position:t}=this.$$appStore,e=this.$$getValue(this.data,"page_msg",{});if(this.$$getValue(e,"lasted_page")-this.$$getValue(e,"current_page")>0){this.nextPageLoading=!0;const i=await n["c"].getSyCodeInfo({url:this.url,lastedId:this.$$getValue(e,"lasted_id"),pageSize:this.$$getValue(e,"list_size"),page:+this.$$getValue(e,"current_page",0)+1,listType:this.$$getValue(e,"list_type"),psw:this.pwd,pos:t,...this.summaryFilter}),o=this.$$getValue(i,"qrcode_compontent.0.page_msg",{});this.nextPageLoading=!1;const a=Object(b["e"])(this.stateData);a.attribute_list=a.attribute_list.concat(this.$$getValue(i,"qrcode_compontent.0.attribute_list",[])),a.page_msg=o,this.stateData=a,this.summaryCodeCurPage=o.current_page,this.data.page_msg=o;const s=Object(b["e"])(this.stateData);Object(h["j"])(s.attribute_list,t=>{if(t.web_url.qrcode_arr=new Array(1),this.$$getValue(t,"web_url.attribute_id")){const e=this.$$getValue(t,"web_url.qrcode_count",0)>5?5:this.$$getValue(t,"web_url.qrcode_count",0);t.web_url.qrcode_arr=new Array(e)}const e=this.getShortTitle(this.$$getValue(t,"title.value","未命名链接"));t.title&&(t.title.shortTitle=e)}),this.data.attribute_list=s,this.displayStyleValue=+this.$$getValue(this.stateData,"attribute_list.0.display_style.value","0"),this.updateDataAndPageMsg(this.stateData),this.getFirstImg(this.stateData)}}async getFirstImg(t){const e=[],i=[],o=this.$$getValue(t,"attribute_list",[]);if(Object(h["j"])(o,t=>{Object(h["A"])(["category"],this.$$getValue(t,"type.value"))&&void 0===t.first_image&&i.push(this.$$getValue(t,"web_url.category_id","")),Object(h["A"])(["qrcode","template_child"],this.$$getValue(t,"type.value"))&&void 0===t.first_image&&e.push(this.$$getValue(t,"web_url.value",""))}),e.length>0||i.length>0){const o=await n["c"].getSyCodImgAll({web_urls:e.join(","),category_ids:i.join(","),org_id:this.$$getValue(this.orgValidParams,"org_id"),org_time:this.$$getValue(this.orgValidParams,"org_time"),org_publickey:this.$$getValue(this.orgValidParams,"org_publickey")});1===o.code&&Object(h["j"])(o.data,e=>{Object(h["j"])(t.attribute_list,t=>{if(this.$$getValue(t,"web_url.value","")===e.web_url)return t.first_image=e.header_first_image||e.body_first_image,!1;if(+this.$$getValue(t,"web_url.category_id","")===+e.category_ids){const i=this.getShortTitle(this.$$getValue(e,"list_name","未命名链接"));return this.$$getValue(t,"first_image.length",0)>0?(Object(h["C"])(t.shortTitle)&&t.shortTitle.push(i),Object(h["C"])(t.first_image)&&t.first_image.push(e.header_first_image||e.body_first_image)):(t.shortTitle=[i],t.first_image=[e.header_first_image||e.body_first_image]),!1}return!0})})}this.stateData=Object(b["e"])(t)}updateDataAndPageMsg(t){t&&Object(b["Q"])(t)&&(this.stateData=Object(b["e"])(t),this.displayStyleValue=+this.$$getValue(this.stateData,"attribute_list.0.display_style.value","0"),this.$forceUpdate())}get restCount(){const t=this.$$getValue(this.data,"page_msg");let e=+t.record_total-+t.current_page*+t.list_size;return e>=0||(e=0),e}get isCodeEmpty(){const t=this.$$getValue(this.data,"page_msg.lasted_page",0);return 0===+this.$$getValue(this.data,"attribute_list.length",0)&&0===+t}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ft.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],Ft.prototype,"originalId",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"qrcode"})],Ft.prototype,"dataType",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Ft.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Ft.prototype,"pwd",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ft.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:()=>1})],Ft.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],Ft.prototype,"summaryCodeCurPage",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:{}})],Ft.prototype,"summaryFilter",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:{}})],Ft.prototype,"orgValidParams",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Ft.prototype,"categoryType",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Ft.prototype,"isSearching",void 0),Object(s["a"])([Object(r["b"])("asyncRenderCompManual")],Ft.prototype,"asyncRenderCompManual",null),Object(s["a"])([Object(r["e"])("data")],Ft.prototype,"dataChange",null),Object(s["a"])([Object(r["e"])("data")],Ft.prototype,"refreshData",null),Ft=Object(s["a"])([r["a"]],Ft);var zt=Ft,Bt=zt,Ht=(i("2d38"),Object(M["a"])(Bt,Rt,qt,!1,null,null,null)),At=Ht.exports,Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"normal_new"!==t.categoryType||t.isSearch?"wrapper":"summaryNewCode wrapper"},[t.isSearch?i("div",{staticClass:"search-form"},[i("i",{staticClass:"searchIcon clifont anticon-cli-search"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:this.$$t("code.search")},domProps:{value:t.search},on:{blur:t._confirmSearch,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.search?i("div",{staticClass:"closeIcon",on:{click:t._clearSearch}},[i("i",{staticClass:"clifont anticon-cli-close"})]):t._e()]):t._e(),t.isSearch?t._e():i("div",{staticClass:"title"},[i("div",{staticClass:"title-text"},[t._v(" "+t._s(t.title)+" ")])]),"normal_new"!==t.categoryType||t.isSearch?i("block",[i("div",{staticClass:"old-action-wrap"},[t.isSearch?t._e():i("i",{staticClass:"sortIcon clifont anticon-cli-search",on:{click:t._openSearch}}),t.isSearch?t._e():i("i",{staticClass:"sortIcon clifont anticon-paixu2",on:{click:t._sortAction}}),t.isSearch?t._e():i("div",{staticClass:"splitLine"}),t.isSearch||"normal"!==t.categoryType?t._e():i("i",{staticClass:"sortIcon clifont anticon-liebiaozhanshi",on:{click:t._viewTypeAction}}),t.isSearch||"card"!==t.categoryType?t._e():i("i",{staticClass:"normal-card-icon-new clifont anticon-kapianzhanshi",on:{click:t._viewTypeAction}})])]):i("block",[i("div",{staticClass:"qrcode-count"},[t._v(" "+t._s(t.$$t("code.total"))+t._s(t.qrcodeCount)+" "),1===t.qrcodeCount?i("block",[t._v(" "+t._s(t.$$t("code.singularCode"))+" ")]):i("block",[t._v(" "+t._s(t.$$t("code.pluralCode"))+" ")])],1),i("div",{staticClass:"search-wrap",on:{click:t._openSearch}},[t.isSearch?t._e():i("i",{staticClass:"clifont anticon-cli-search",on:{click:t._openSearch}}),t._v(" "+t._s(t.$$t("code.search"))+" ")]),i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"sort-action",on:{click:t._sortAction}},[i("i",{staticClass:"clifont anticon-paixu2"}),i("div",{staticClass:"text"},[t._v(t._s(t.currentSortItem.name||"排序"))]),i("div",[i("i",{staticClass:"clifont anticon-cli-angle-down"})])]),i("i",{staticClass:"normal-icon-new clifont anticon-putongmulu",on:{click:t._viewTypeAction}})])]),t.isSearch?i("div",{staticClass:"cancelTips",on:{click:t._cancelSearch}},[t._v(" "+t._s(t.$$t("code.cancel"))+" ")]):t._e(),i("bottom-modal",{ref:"bottomModal"},[i("div",{staticClass:"moreActionWrapper",attrs:{slot:"content"},slot:"content"},t._l(t.sortData,(function(e){return i("div",{key:e.id,class:"item "+(e.id===t.sort?"active":""),on:{click:function(i){return t._selectSort(e.id)}}},[i("span",[t._v(t._s(e.name))]),i("i",{staticClass:"confirmIcon clifont anticon-duoxuan"})])})),0)]),i("bottom-modal",{ref:"typeBottomModal"},[i("div",{staticClass:"moreActionWrapper",attrs:{slot:"content"},slot:"content"},t._l(t.viewType,(function(e){return i("div",{key:e.id,class:"item "+(e.type===t.categoryType?"active":""),on:{click:function(i){return t._selectType(e.type)}}},[i("span",[t._v(t._s(e.name))]),i("i",{staticClass:"confirmIcon clifont anticon-duoxuan"})])})),0)])],1)},Nt=[],Ut=i("6542");let Qt=class extends r["d"]{constructor(){super(...arguments),this.sortData=[{id:0,name:this.$$t("code.sortGroup.0")},{id:1,name:this.$$t("code.sortGroup.1")},{id:2,name:this.$$t("code.sortGroup.2")},{id:3,name:this.$$t("code.sortGroup.3")}],this.viewType=[{id:2,name:this.$$t("code.standardDirectory"),type:"normal_new"},{id:0,name:this.$$t("code.listImages"),type:"normal"},{id:1,name:this.$$t("code.cardImages"),type:"card"}],this.search="",this.isSearch=!1,this.currentSortItem=this.sortData[0]}mounted(){this.currentSortItem=this.sortData[this.sort]}_clearSearch(){this.search="",this._confirmSearch()}_openSearch(){this.isSearch=!0,this.$emit("setIsSearching",!0)}_cancelSearch(){this.isSearch=!1,this.search="",this._confirmSearch(),this.$emit("setIsSearching",!1)}_confirmSearch(){this.$emit("search",{value:this.search})}_sortAction(){this.$refs.bottomModal.showModal()}_viewTypeAction(){this.$refs.typeBottomModal.showModal()}_selectSort(t){this.$refs.bottomModal.close();let e={};this.sortData.forEach(i=>{i.id===Number(t)&&(e=i)}),this.currentSortItem=e,this.$emit("sort",{id:t})}_selectType(t){this.$refs.typeBottomModal.close(),this.categoryType=t,this.$emit("changeCategoryType",t)}_chooseCategoryCard(){this.categoryType="card",this.$emit("changeCategoryType","card")}_chooseCategoryNormal(){this.categoryType="normal",this.$emit("changeCategoryType","normal")}_chooseCategoryOriginNormal(){this.categoryType="normal_new",this.$emit("changeCategoryType","normal_new")}};Object(s["a"])([Object(r["c"])({type:Number,default:0})],Qt.prototype,"sort",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],Qt.prototype,"qrcodeCount",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Qt.prototype,"title",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"normal"})],Qt.prototype,"categoryType",void 0),Qt=Object(s["a"])([Object(r["a"])({components:{BottomModal:Ut["a"]}})],Qt);var Gt=Qt,Yt=Gt,Jt=(i("197d"),Object(M["a"])(Yt,Wt,Nt,!1,null,"925d6dca",null)),Xt=Jt.exports,Kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.templateComponentId?i("div",{staticClass:"placeholderWrapper",attrs:{"data-template-component-id":t.templateComponentId}},[i("div",{staticClass:"placeholderEl"},[i("i",{class:"clifont anticon-cli-file placeholderIcon font-size-16-"+t.currentFontSize}),i("div",{class:"placeholderName font-size-12-"+t.currentFontSize},[t._v(" "+t._s(t.templateComponentTitle)+" ")])])]):i("div",{staticClass:"fileWrapper"},[t.emptyFile?t._e():i("div",[t.title?i("div",{staticClass:"title"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.title)+" ")]):t._e(),i("div",{staticClass:"fileList"},t._l(t.fileList,(function(e,o){return i("FileItem",{key:o,attrs:{fileObj:e,index:o},on:{handleClickFileItem:t.openFile}})})),1),t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.slideImage}}):t._e()],1),i("a",{staticClass:"placeholder-edit-nav",staticStyle:{display:"none"},attrs:{href:"placeholderLink:%7B%22component_id%22%3A%22"+t.fieldId+"%22%7D"}},[t._v(" 修改 ")])])},Zt=[],te=(i("d9e2"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fileContent",on:{click:function(e){return t.handelClickFile(t.fileObj)}}},[i("div",{staticClass:"fileType",style:"background-image:url('"+t.fileIconPath+"');"}),i("div",{staticClass:"descContent"},[i("div",{staticClass:"fileName"},[t._v(" "+t._s(t.fileMajorName)),i("span",{staticClass:"nowrap"},[t._v(t._s(t.extension))])]),i("div",{staticClass:"fileSize"},[t._v(" "+t._s(t.$$getValue(t.fileObj,"file_size.value",""))+" ")])])])}),ee=[];let ie=class extends r["d"]{constructor(){super(...arguments),this.fileMajorName="",this.extension="",this.fileIconPath="",this.fileCanPreview=!1}handleClickFileItem(t,e){return{fileObj:t,action:e}}beforeMount(){this.getFileData()}beforeUpdate(){this.getFileData()}getFileData(){const t=this.$$getValue(this.fileObj,"file_name.value",""),e=t.split(".").slice(-1),i="."+e,o=t.slice(0,t.lastIndexOf("."));this.extension=i,this.fileMajorName=o;const a=this.$$getValue(e,"0").toLocaleLowerCase();this.fileCanPreview=this.$$getValue(this.fileObj,"can_preview.value",0),this.fileIconPath=Object(h["o"])(a)}handelClickFile(t){this.fileCanPreview?this.handleClickFileItem(t):this.checkCanDownload(t)?this.handleClickFileItem(t,"download"):this.$$toast(this.$$t("code.downloadFile.cannotDownload"),2e3,!1,"65%")}getType(t){const e=this.$$getValue(t,"file_url.value","").split(".");return e[this.$$getValue(e,"length",1)-1]||""}checkCanDownload(t){return"1"===this.$$getValue(t,"can_download.value","1")}isiOS(){const t=navigator.userAgent;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}iOSversion(){const t=navigator.userAgent,e=t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".");return parseInt(e,10)}isWeixinOrQQ(){const t=navigator.userAgent;return t.match(/MicroMessenger\/[0-9]/i)||t.match(/QQ\/[0-9]/i)}ios13WeixinGuide(t){const e=document.getElementsByTagName("html")[0].getAttribute("ver"),i=Et["l"]+"/view-doc/download.html";window.open(`${i}?file=${t}&ver=${e}`)}download(){if(this.isH5){const t=this.$$getValue(this.fileObj,"file_name.value",""),e=this.$$getValue(this.fileObj,"file_url.value"),i=this.$$getValue(t.split(".").slice(-1),"0","").toLocaleLowerCase();if(Object(h["A"])(Et["d"],i))return void this.handleClickFileItem(this.fileObj);if(!this.isiOS())return this.isWeixinOrQQ()?void this.ios13WeixinGuide(e):void window.open(e);if(this.iOSversion()<13||this.isWeixinOrQQ())return void this.ios13WeixinGuide(e);window.open(e)}else this.$$showModal({title:"这是一个外部链接",content:"文件链接已复制，前往浏览器粘贴并打开",confirmText:"我知道了",confirmColor:"#4caf50",success(){this.$$setClipboardData({data:this.$$getValue(this.fileObj,"file_url.value")})}})}};Object(s["a"])([Object(r["c"])({type:Object})],ie.prototype,"fileObj",void 0),Object(s["a"])([Object(r["c"])({type:Number})],ie.prototype,"index",void 0),Object(s["a"])([Object(r["b"])("handleClickFileItem")],ie.prototype,"handleClickFileItem",null),ie=Object(s["a"])([r["a"]],ie);var oe=ie,ae=oe,se=(i("bb90"),Object(M["a"])(ae,te,ee,!1,null,"4af81028",null)),re=se.exports,ne=i("6f26"),ce=i("77ed"),le=i("1157"),de=i.n(le);let pe=class extends r["d"]{constructor(){super(...arguments),this.emptyFile=!1,this.fileList=[],this.title="",this.slideImage=[],this.templateComponentId=0,this.templateComponentTitle="",this.fieldId=0}initWhenCreated(){this.title=this.$$getValue(this.data,"attribute_list.0.title.value",""),this.fileList=this.$$getValue(this.data,"attribute_list")}created(){this.initWhenCreated()}initWhenBeforeMount(){const{id:t,title:e,fieldId:i}=Object(h["t"])(this.data);this.templateComponentId=t,this.templateComponentTitle=e,this.fieldId=i}beforeMount(){this.initWhenBeforeMount()}initWhenMounted(){this.fileList=this.fileList.filter(t=>!!this.$$getValue(t,"file_url.value","")),this.data.attribute_list=this.data.attribute_list.filter(t=>!!this.$$getValue(t,"file_url.value","")),this.$$getValue(this.data,"attribute_list.0.file_url.value",!1)||(this.emptyFile=!0)}mounted(){this.initWhenMounted()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&(this.initWhenCreated(),this.initWhenBeforeMount(),this.initWhenMounted())}async getOssUrl(t){try{var e,i;if(t.indexOf("?")>-1||!t)return t;const o=t=>{const e=new Image;return e.src=t,new Promise(i=>{e.onload=function(){i({data:{value:t,height:e.height,width:e.width}})}})},a=t=>new Promise((e,i)=>{de.a.ajax({url:t,method:"GET",xhrFields:{responseType:"blob"},success:function(t){const i=t.size;e(i)},error:function(){i(new Error("无法加载图片"))}})}),[s,r]=await Promise.all([o(t),a(t)]);if(null===s||void 0===s||null===(e=s.data)||void 0===e||!e.height||null===s||void 0===s||null===(i=s.data)||void 0===i||!i.width||!r)return t;const n=this.$$appStore.isLowQuality,c=this.$$appStore.encodedUserId;s.data.image_size=r;const l=ce["a"].getComputedUrl(s,2,n,c).url;return l}catch(o){console.error(o)}}async openFile({fileObj:t,action:e}){if(this.isH5){const i=this.$$getValue(t,"file_name.value",""),o=this.$$getValue(t,"can_download.value",0),a=this.$$getValue(i.split(".").slice(-1),"0","").toLocaleLowerCase(),s=this.$$getValue(t,"file_url.value","");if(Object(h["A"])(Et["d"],a)){const t=await this.getOssUrl(s);return this.slideImage=[t],void this.$refs.preview.openPreview(parseInt("0",10))}const r=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),n=this.$$getValue(this.$$appStore,"oid");this.$$openDocument({filePath:s,fileName:i,canDownload:o,coding:r,openId:n,action:e,previewMode:this.$$getValue(t,"file_preview_mode.value",1),filePreviewHideMenu:this.$$getValue(t,"file_preview_hide_menu.value",0),origin:C["s"].CODE_FILE})}else this.$$downloadFile({url:this.$$getValue(t,"file_url.value","")}).then(t=>{this.$$openDocument({filePath:t.tempFilePath}).then()})}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],pe.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],pe.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["e"])("data")],pe.prototype,"refreshData",null),pe=Object(s["a"])([Object(r["a"])({components:{FileItem:re,Preview:ne["a"]}})],pe);var he=pe,ue=he,me=(i("b890"),Object(M["a"])(ue,Kt,Zt,!1,null,"10398828",null)),ge=me.exports,_e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.templateComponentId?i("div",{staticClass:"placeholderWrapper",style:t.$$setStyle({common:{width:t.$$getValue(t.imageStyleObjects,"0.width"),paddingTop:"3"===t.imgStyle?t.$$u(50):null}}),attrs:{"data-template-component-id":t.templateComponentId}},[i("div",{staticClass:"placeholderEl"},[i("i",{class:"clifont anticon-cli-image placeholderIcon font-size-16-"+t.currentFontSize}),i("div",{class:"placeholderName font-size-12-"+t.currentFontSize},[t._v(" "+t._s(t.templateComponentTitle)+" ")])])]):i("div",{class:"imageWrapper "+(t.isHeadImg?"isHeadImg":"")},[!t.frompc||t.imageStyle!==t.ImageStyle.IMAGE_STYLE_3||t.imageGradient!==t.ImageGradient.TOP&&t.imageGradient!==t.ImageGradient.TOP_BOTTOM?t._e():[i("div",{style:t.topPlaceholderStyle}),i("div",{style:t.topGradientStyle})],0===t.imageShowType?i("swiper",{attrs:{imageArr:t.imageUrls,imagePreviewUrls:t.imagePreviewUrls,cusStyle:t.$$setStyle({common:{height:t.swiperHeight,backgroundColor:t.swiperBgColor}}),haveSpaceBetween:"1"===t.imgStyle,imageStyleObject:t.imageStyleObjects[0],isHeadImg:t.isHeadImg,codeColorInfo:t.codeColorInfo,imageStyle:t.imageStyle,imageGradient:t.imageGradient,autoplay:t.autoplay,interval:t.interval,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,imageSizes:t.imageSizes,gradientStyle:t.firstBottomGradientStyle,swiperDotsOffset:t.isHeadImg?t.headCmpInfo.title.gap.topSwiperDotsOffset:null,isColorExtend:t.isColorExtend},on:{previewImage:t.previewImage}}):i("div",{staticClass:"imgList"},t._l(t.imageUrls,(function(e,o){return i("div",{key:o,staticClass:"image-wrapper",attrs:{"data-preview-url":t.imagePreviewUrls[o],"data-preview-index":o},on:{click:t.previewImage,touchstart:t.keepPress,touchend:t.keepPressEnd,touchcancel:t.keepPressEnd}},[i("image-dif",{attrs:{src:e,cusStyle:t.$$setStyle({common:Object.assign({},t.imageStyleObjects[o],{margin:"0 auto"})}),imageSize:t.imageSizes[o],"data-preview-url":t.imagePreviewUrls[o],previewType:!0,"data-preview-index":o}}),o!==t.imageUrls.length-1||t.imageStyle!==t.ImageStyle.IMAGE_STYLE_3||t.imageGradient!==t.ImageGradient.BOTTOM&&t.imageGradient!==t.ImageGradient.TOP_BOTTOM?t._e():i("div",{style:t.lastBottomGradientStyle})],1)})),0),t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.allImgs}}):t._e(),i("a",{staticClass:"placeholder-edit-nav",staticStyle:{display:"none"},attrs:{href:"placeholderLink:%7B%22component_id%22%3A%22"+t.fieldId+"%22%7D"}},[t._v(" 修改 ")])],2)},fe=[],ve=i("d885"),ye=i("af0c");class be{constructor(t){this.imageData=[],this.imageUrl=[],this.imageShowType=0,this.imageSizes=[],this.imageData=t,this.decode()}decode(){this.imageUrl=this.slideImageEX(),this.imageShowType=this.getShowType(),this.imageSizes=this.getImageSizes()}getShowType(){return this.imageData.length>1&&0===parseInt(this.imageData[0].prew_type.value,10)?0:1}slideImageEX(){const t=[];return this.imageData.forEach(e=>{t.push(e.image_url.value)}),t}getImageSizes(){const t=[];return this.imageData.forEach(e=>{t.push({width:parseInt(e.image_width.value,10),height:parseInt(e.image_height.value,10)})}),t}}var we=be;const Ce={};let $e=class extends r["d"]{constructor(){super(...arguments),this.slideImage=[],this.imageShowType=0,this.imgStyle="1",this.imageStyleObjects=[],this.swiperHeight="300px",this.imageSizes=[],this.topPlaceholderStyle="",this.topGradientStyle="",this.firstBottomGradientStyle="",this.lastBottomGradientStyle="",this.imageStyle=y["e"].IMAGE_STYLE_1,this.imageGradient=y["d"].NONE,this.autoplay=!1,this.interval=0,this.imagePreviewUrls=[],this.imageUrls=[],this.pressTime=0,this.templateComponentId=0,this.templateComponentTitle="",this.fieldId=0,this.ImageStyle=y["e"],this.ImageGradient=y["d"],this.frompc=!!this.$$appStore.h5QueryString.frompc}getValidImgs(){const{data:t}=this;return Object(h["g"])(this.$$getValue(t,"attribute_list",[]),t=>!!this.$$getValue(t,"image_url.value",""))}getImageModuleInfo(t,e){const i=Object(h["c"])(this.getValidImgs()),o=this.$$getValue(i,"0.prew_type.value","1"),a=i[0];if(t&&e&&i.length){const i=this.$$getValue(a,"image_width",{}),o=this.$$getValue(a,"image_height",{});i.value=t,o.value=e}const{pixelRatio:s,windowWidth:r}=this.$$getSystemInfo();if(this.templateComponentId&&i.length){const t=this.$$getValue(a,"image_width",{});t.value=750}const n=0===Number(o)&&i.length>1;let c;c=this.isHeadImg?n?16:10:!this.isColorExtend||n?16:10;const l=new w["a"]({data:{attribute_list:i},project:y["h"].MPCLI,dpr:s,windowWidth:r,imageStyle1Margin:c,isLowQuality:this.$$appStore.isLowQuality,encodedUserId:this.$$appStore.encodedUserId});let d="0";const p=[],u=[],m=Object(h["L"])(l.images,(t,e)=>(e||({height:d}=t.getStyleObject()),p.push(t.computedUrl),u.push(t.computedPreviewUrl),t.getStyleObject()));let g=parseFloat(d);Object(h["H"])(g)&&(g=0);const{computedWindowWidth:_}=this.$$getSystemInfo();g+=ce["a"].px2rem({px:_/375*30,computedWindowWidth:_});const f=this.$$getValue(a,"is_gradient.value",y["d"].NONE);return{imageStyleObjects:m,swiperHeight:g+"rem",imageStyle:l.imageStyle,imageGradient:f,imageUrls:p,imagePreviewUrls:u}}init(){var t,e;this.imgStyle=this.getImgStyle(),this.autoplay="0"!==this.getImgAutoPlay(),this.interval=1e3*Number(this.getImgAutoPlay());const i=this.getValidImgs();let o="",a="";if(this.isH5&&i.length){const t=i[0],e=this.$$getValue(t,"image_width.value",""),s=this.$$getValue(t,"image_height.value","");if(!e||!s){const e=this.$$getValue(t,"image_url.value",""),i=Ce[e];i?({width:o,height:a}=i):setTimeout(()=>{const t=new Image;t.onload=()=>{const{src:e,width:i,height:o}=t;Ce[e]={width:i,height:o};const{imageStyleObjects:a,swiperHeight:s,imageStyle:r,imageGradient:n}=this.getImageModuleInfo(i,o);this.imageStyleObjects=a,this.swiperHeight=s,this.imageStyle=r,this.imageGradient=n},t.src=e})}}const{id:s,title:r,fieldId:n}=Object(h["t"])(this.data);this.templateComponentId=s,this.templateComponentTitle=r,this.fieldId=n;const{imageStyleObjects:c,swiperHeight:l,imageStyle:d,imageGradient:p,imageUrls:u,imagePreviewUrls:m}=this.getImageModuleInfo(o,a);this.imageStyleObjects=c,this.swiperHeight=l,this.imageStyle=d,this.imageGradient=p,this.imagePreviewUrls=m,this.imageUrls=u;const g=new we(i);let _,f,v,b;this.slideImage=g.imageUrl,this.imageSizes=g.imageSizes,this.imageShowType=g.imageShowType;const w=c.length,C=null!==(t=null===(e=this.codeColorInfo)||void 0===e?void 0:e.themeColor)&&void 0!==t?t:"";Object(h["j"])(c,(t,e)=>{const i=!e,o=e===w-1,{width:a,height:s}=null!==t&&void 0!==t?t:{},r={width:a,height:s,color:C,project:y["h"].MPCLI};i&&(_=Object(h["p"])({...r,position:y["c"].TOP}),f=Object(h["p"])({...r,position:y["c"].TOP_PLACEHOLDER}),v=Object(h["p"])({...r,position:y["c"].BOTTOM})),o&&(b=Object(h["p"])({...r,position:y["c"].BOTTOM}))}),this.topGradientStyle=_,this.topPlaceholderStyle=f,this.firstBottomGradientStyle=v,this.lastBottomGradientStyle=b}beforeMount(){this.init()}mounted(){}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}previewImage(t){const{target:{dataset:{previewUrl:e}}}=t;null!=e&&(this.isH5?this.$refs.preview.openPreview(e):this.$$previewImage({current:e,urls:this.slideImage}))}keepPress(){this.pressTime=(new Date).getTime()}keepPressEnd(t){(new Date).getTime()-this.pressTime>1e3&&t.preventDefault()}getImgStyle(t=0){const e=this.$$getValue(this.data,`attribute_list.${t}.image_style.value`,"1")||"1";return e}getImgAutoPlay(t=0){const e=this.$$getValue(this.data,`attribute_list.${t}.prew_type.value`);return 0===Number(e)&&this.$$getValue(this.data,`attribute_list.${t}.auto_play_time.value`,"0")||"0"}getPreviewWidth(){const t=this.$$getSystemInfo().windowWidth;return t+"px"}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],$e.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:Object})],$e.prototype,"codeColorInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$e.prototype,"isHeadImg",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$e.prototype,"hasTitle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$e.prototype,"hasRecord",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$e.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"transparent"})],$e.prototype,"swiperBgColor",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],$e.prototype,"allImgs",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],$e.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],$e.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$e.prototype,"isColorExtend",void 0),Object(s["a"])([Object(r["e"])("data"),Object(r["e"])("codeColorInfo.themeColor")],$e.prototype,"refreshData",null),$e=Object(s["a"])([Object(r["a"])({components:{Swiper:ve["a"],ImageDif:ye["a"],Preview:ne["a"]}})],$e);var Oe=$e,Se=Oe,je=(i("97ea"),Object(M["a"])(Se,_e,fe,!1,null,"5954b26a",null)),Ie=je.exports,Te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0!==t.imgLength?i("div",[t.imgData.title.value?i("div",{staticClass:"previewTitle"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.imgData.title.value)+" ")]):t._e(),t.imgLength>1?i("div",{staticClass:"imageContent"},t._l(t.picUrls,(function(e,o){return i("span",{key:o,staticClass:"show",style:t.$$setStyle({common:{width:t.picWidth,paddingBottom:t.picWidth,height:0},h5:{width:t.picWidth,paddingBottom:t.picWidth}}),attrs:{"data-preview-index":o,"data-preview-url":t.picPreviewUrls[o]},on:{click:t.previewImage}},[e?i("image-dif",{attrs:{src:e,"data-preview-index":o,"data-preview-url":t.picPreviewUrls[o],cusStyle:t.$$setStyle({common:{width:"100%",paddingBottom:"100%"}}),imageSize:t.imageSizes[o],emptyModule:!0,mode:"aspectFill"}}):t._e(),t.waterArr[o]?i("div",{staticClass:"waterShadow",attrs:{"data-preview-index":o,"data-preview-url":t.picPreviewUrls[o]}},[i("span",[t._v("水印生成中")])]):t._e()],1)})),0):t._e(),1===t.imgLength&&0===t.imageSpec?i("div",{staticClass:"imageOnlyContent"},[i("image-dif",{attrs:{src:t.picUrls[0],cusStyle:"width: 100%;height: "+t.onePicHeight+"px","data-preview-index":1,"data-preview-url":t.picPreviewUrls[0],previewType:!0,imageSize:t.imageSizes[0]}}),t.waterArr[0]?i("div",{staticClass:"waterShadow",attrs:{"data-preview-index":1,"data-preview-url":t.picPreviewUrls[0]}},[i("span",[t._v("水印生成中")])]):t._e()],1):t._e(),1===t.imgLength&&1===t.imageSpec?i("div",{staticClass:"specOnlyContent"},[i("image-dif",{attrs:{src:t.picUrls[0],cusStyle:"width: 100%;height: "+t.onePicHeight+"px","data-preview-index":1,"data-preview-url":t.picPreviewUrls[0],previewType:!0,imageSize:t.imageSizes[t.index]}}),t.waterArr[0]?i("div",{staticClass:"waterShadow",attrs:{"data-preview-index":1,"data-preview-url":t.picPreviewUrls[0]}},[i("span",[t._v("水印生成中")])]):t._e()],1):t._e(),t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.allImgs}}):t._e()],1):t._e()},xe=[];class ke{constructor(t,e,i){this.imageArr=[],this.waterArr=[],this.imageSizes=[],this.imgLength=0,this.picWidth="calc(33.33% - 27px)",this.ossWidth=0,this.onePicHeight=0,this.imageSpec=0,this.imageData=t,this.ossWidth=e,this.imageSpec=i}async decode(){const t=t=>{const e=new Image;return e.src=t,new Promise(i=>{e.onload=function(){i({value:t,height:e.height,width:e.width})}})},e=async()=>{const e=[];for(const i in this.imageData){const o=this.imageData[i];if(o.value.value)this.imageArr.push(o.value.value),this.waterArr.push(o.watermaker_loading),this.imageSizes.push({width:o.value.width,height:o.value.height}),e.push(o.value);else if(o.value){const i=await t(o.value);this.imageArr.push(o.value),this.waterArr.push(o.watermaker_loading),this.imageSizes.push({width:0,height:0}),e.push(i)}}return e},i=await e();this.imgLength=this.imageArr.length;const o=i[0];if(o&&o.height){let t=1;this.imageSpec&&(t=.4),this.onePicHeight=o.height*(this.ossWidth/o.width)*t}1===this.imgLength?this.picWidth=`calc(100% - ${Object(h["i"])(9)})`:Object(b["I"])([2,4],this.imgLength)?this.picWidth=`calc(50% - ${Object(h["i"])(9)})`:this.picWidth=`calc(33.33% - ${Object(h["i"])(9)})`}}var Me=ke;let De=class extends r["d"]{constructor(){super(...arguments),this.imgLength=0,this.ossWidth=this.$$getSystemInfo().windowWidth-40,this.picWidth="calc(33.33% - 27px)",this.picUrls=[],this.picPreviewUrls=[],this.waterArr=[],this.onePicHeight=0,this.imageSpec=0,this.imageSizes=[]}async init(){this.imgData=this.data.attribute_list[0],this.imageSpec=parseInt(this.$$getValue(this.data.attribute_list[0],"image_spec.value",0),10)||0;const t=this.$$getValue(this.imgData,"image_url.value",[]),e=new Me(t,this.ossWidth,this.imageSpec);this.picUrls=w["a"].getComputedUrl({data:t,windowWidth:this.$$getSystemInfo().computedWindowWidth,type:1}),this.picPreviewUrls=w["a"].getComputedUrl({data:t,windowWidth:this.$$getSystemInfo().computedWindowWidth,type:0}),await e.decode(),this.waterArr=e.waterArr,this.imgLength=e.imgLength,this.picWidth=e.picWidth,this.imageSizes=e.imageSizes,this.onePicHeight=e.onePicHeight}async beforeMount(){await this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}previewImage(t){if(this.isH5){const{target:{dataset:{previewUrl:e}}}=t;this.$refs.preview.openPreview(e)}else{const{currentTarget:{dataset:{previewUrl:e}}}=t;this.$$previewImage({current:e,urls:this.picPreviewUrls})}}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],De.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],De.prototype,"allImgs",void 0),Object(s["a"])([Object(r["e"])("data")],De.prototype,"refreshData",null),De=Object(s["a"])([Object(r["a"])({components:{ImageDif:ye["a"],Preview:ne["a"]}})],De);var Pe=De,Ve=Pe,Le=(i("9a3e"),Object(M["a"])(Ve,Te,xe,!1,null,null,null)),Re=Le.exports,qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.locationData.latitude.value?i("div",[i("div",{staticClass:"locationTitle"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.locationData.title.value)+" ")]),i("div",{staticClass:"locationContent",on:{click:t.openLocation}},[i("i",{staticClass:"clifont anticon-cli-address-o locationIcon"}),i("div",{staticClass:"description"},[i("div",{staticClass:"locationName"},[t._v(" "+t._s(t.locationData.locate_name.value)+" ")]),i("div",{staticClass:"recordTime"},[t._v(" "+t._s(t.locationData.locate_time.value)+" ")])])])]):t._e()},Ee=[];let Fe=class extends r["d"]{init(){this.locationData=this.data.attribute_list[0]}created(){this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}openLocation(){this.isH5?this.$$openLocation(parseFloat(this.locationData.latitude.value),parseFloat(this.locationData.longitude.value)):this.$$openLocation({latitude:parseFloat(this.locationData.latitude.value),longitude:parseFloat(this.locationData.longitude.value),name:this.locationData.locate_name.value,scale:14})}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Fe.prototype,"data",void 0),Object(s["a"])([Object(r["e"])("data")],Fe.prototype,"refreshData",null),Fe=Object(s["a"])([r["a"]],Fe);var ze=Fe,Be=ze,He=(i("f6c1"),Object(M["a"])(Be,qe,Ee,!1,null,null,null)),Ae=He.exports,We=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data.attribute_list[0].content_html.value?i("div",[t.data.attribute_list[0].title.value?i("div",{staticClass:"previewTitle"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.data.attribute_list[0].title.value)+" ")]):t._e(),t.data.attribute_list[0].content_html.value?i("pre",{staticClass:"previewContent"},[t._v(t._s(t.data.attribute_list[0].content_html.value))]):t._e()]):t._e()},Ne=[];let Ue=class extends r["d"]{};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ue.prototype,"data",void 0),Ue=Object(s["a"])([r["a"]],Ue);var Qe=Ue,Ge=Qe,Ye=(i("a9bd"),Object(M["a"])(Ge,We,Ne,!1,null,null,null)),Je=Ye.exports,Xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty-module-table"},[t.tableTitle.length?i("h3",{staticClass:"title"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.tableTitle)+" ")]):t._e(),i("div",{staticClass:"tb-wrapper"},t._l(t.tableData,(function(e,o){return i("div",{key:o,class:"row"===e.type?"tr item":"tr"},["cut-line"===e.type?i("div",{class:0===o?"top-border cut-title td":"cut-title td",attrs:{colspan:"2"}},[t._v(" "+t._s(e.content)+" ")]):t._e(),"row"===e.type?i("div",{class:0===o?"top-border title td":"title td"},[t._v(" "+t._s(e.key)+" ")]):t._e(),"row"===e.type?i("div",{class:0===o?"top-border content td":"content td"},[t._v(" "+t._s(e.content)+" ")]):t._e()])})),0)])},Ke=[];class Ze{constructor(t){this.tableData=[],this.title="",this.decodedData=[],this.tableData=t,this.decode()}decode(){const t=this.tableData;t[0].title&&(this.title=t[0].title.value,t.shift()),t[0].hint&&t.shift();const e=t.map(t=>{if(t.table_title){if(!t.table_title.value)return;return{type:"cut-line",content:t.table_title.value}}const{table_text:e,table_type:i,table_value:o}=t;let a="";switch(i.value){case"1":a=o.value;break;case"2":const t=i.enum_msg.find(t=>t.enum_value===Number(o.value))||{};a=t.enum_text||"";break;case"3":const e=o.value.split(",").map(t=>Number(t));a=i.enum_msg.filter(t=>Object(b["I"])(e,t.enum_value)).map(t=>t.enum_text).join("、");break;case"4":a=o.value;break}return{type:"row",content:a,key:""===e.value?"字段名未设置":e.value}});this.decodedData=e.filter(Boolean)}}var ti=Ze;let ei=class extends r["d"]{constructor(){super(...arguments),this.tableTitle="",this.tableData=[]}init(){const t=new ti(this.data.attribute_list);this.tableTitle=t.title,this.tableData=t.decodedData}mounted(){this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}};Object(s["a"])([Object(r["c"])({type:Object})],ei.prototype,"data",void 0),Object(s["a"])([Object(r["e"])("data")],ei.prototype,"refreshData",null),ei=Object(s["a"])([r["a"]],ei);var ii=ei,oi=ii,ai=(i("6d4f"),Object(M["a"])(oi,Xe,Ke,!1,null,"5b15f34e",null)),si=ai.exports,ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("company-card",{attrs:{"code-data":t.codeData}}),i("div",{staticClass:"oinfo"},[i("op-menu",{attrs:{"code-data":t.codeData,showTip:t.showTip,bottomColor:t.bottomColor,showMangerEntery:!(t.isPoweredBy||t.isRecordCode),isEnableToMina:t.isEnableToMina},on:{showTip:t.getShowTip}}),t.isPoweredBy||t.isRecordCode||t.shouldShowComplain||t.subTplCodeOpenEdit||t.isTrialEdtion?i("code-mark",{attrs:{"code-data":t.codeData,isPoweredBy:t.isPoweredBy,isTrialEdtion:t.isTrialEdtion,showTip:t.showTip,isRecordCode:t.isRecordCode,shouldShowComplain:t.shouldShowComplain,bottomColor:t.bottomColor,originalId:t.originalId,subTplCodeOpenEdit:t.subTplCodeOpenEdit},on:{showTip:t.getShowTip}}):t._e(),t.validOpenTime.startTime||t.validLocation.radius?i("div",{staticClass:"validinfo",style:{color:t.bottomColor.defaultColor}},[t._v(" 该二维码可在「 "),t.validLocation.radius?i("span",[t._v(" "+t._s(t.validLocation.address)+"附近"+t._s(t.validLocation.radius)+" ")]):t._e(),t.validOpenTime.startTime?i("span",[t._v(" "+t._s(t.validOpenTime.startTime)+"-"+t._s(t.validOpenTime.endTime)+" ")]):t._e(),t._v(" 」访问 ")]):t._e()],1)],1)},ni=[],ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"company-card"},[i("a",{attrs:{href:"javascript:;"},on:{click:t.jump}},[i("div",{staticClass:"left"},[i("div",{staticClass:"title",class:t.titlePlaceholder},[t._v(" "+t._s(t.info.name||"企业名称未输入")+" "),t.info.logo||4!==t.info.authStatus?t._e():i("div",{staticClass:"pendant"},[i("img",{attrs:{mode:"aspectFit",src:"https://ncstatic.clewm.net/rsrc/2019/0411/15/638fafca3077c546d34b95bdfeed760f.png?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})])]),i("div",{staticClass:"desc"},[t._v(t._s(t.info.desc))]),i("div",{staticClass:"tip"},[t._v("点击了解详情")])]),t.info.logo?i("div",{staticClass:"right"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:t.info.logo}})]),4===t.info.authStatus?i("div",{staticClass:"pendant"},[i("img",{attrs:{mode:"aspectFit",src:"https://ncstatic.clewm.net/rsrc/2019/0411/15/638fafca3077c546d34b95bdfeed760f.png?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):t._e()]):t._e()])]):t._e()},li=[];let di=class extends r["d"]{constructor(){super(...arguments),this.show=!1,this.info={}}get titlePlaceholder(){return this.$$getValue(this.info,"name")?"":"placeholder"}mounted(){const t=this.codeData;if(t.is_org_dest_qrcode)return;if(!t.org_msg)return;if(!t.org_msg.org_dest_qrcode_route)return;const{name:e,logo_path:i,org_dest_qrcode_route:o,memo:a,auth_status:s}=t.org_msg;this.info={name:e,logo:i,url:o,desc:a,authStatus:s},this.show=!0}jump(){Object(p["l"])("nocompjump")||(window.location.href="/?url="+this.info.url)}};Object(s["a"])([Object(r["c"])({type:Object})],di.prototype,"codeData",void 0),di=Object(s["a"])([Object(r["a"])({})],di);var pi=di,hi=pi,ui=(i("e195"),Object(M["a"])(hi,ci,li,!1,null,"1038fe90",null)),mi=ui.exports,gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isPoweredBy||t.isTrialEdtion?i("div",{staticClass:"mark",style:{color:t.bottomColor.defaultColor,fontSize:t.bottomFontSize},attrs:{id:"mark"}},[t.isTrialEdtion?[i("a",{staticClass:"pageFrom",style:{color:t.bottomColor.defaultColor},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" 正在试用草料二维码 ")]),i("a",{style:{color:t.bottomColor.textColor,display:"flex"},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" 旗舰版 ")])]:t.showTip||t.isTrialEdtion?[i("a",{attrs:{href:"//cli.im/price#6",target:"_blank","click-log":"122, 22"}},[t._v(" 付费升级 ")]),t._v(" ，可去除草料底部标识和投诉， "),i("a",{attrs:{href:"//cli.im/help/48192",target:"_blank","click-log":"122, 23"}},[t._v(" 了解详情 ")])]:[t.$$appStore.h5QueryString.powerby_style_v2&&t.$$i18n.isChinese()?i("div",{staticClass:"powerByContainer",on:{click:t.goQA}},["d"===t.$$appStore.h5QueryString.powerby_style_v2?i("div",[i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 提供技术服务 ")])]):"c"===t.$$appStore.h5QueryString.powerby_style_v2?i("div",[i("p",[t._v("该内容由用户制作，请自行甄别")]),i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 是专业的二维码平台，人人都能免费使用 ")])]):"b"===t.$$appStore.h5QueryString.powerby_style_v2?i("div",[i("p",[t._v("该内容由用户自行制作")]),i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 是专业的二维码平台，人人都能免费使用 ")])]):i("div",[t._v(" 该内容由用户在 "),i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 自行制作 ")])]):t.$$appStore.h5QueryString.powerby_style_20240313&&t.$$i18n.isChinese()?i("div",{staticClass:"powerByContainer",on:{click:t.goQA}},["d"===t.$$appStore.h5QueryString.powerby_style_20240313?i("div",[i("p",[t._v("该内容由用户自行制作")]),i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 是专业的二维码系统搭建平台 ")])]):"c"===t.$$appStore.h5QueryString.powerby_style_20240313?i("div",[i("p",[t._v("该内容由用户自行制作")]),i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 是专业的系统搭建平台，免费即可使用 ")])]):"b"===t.$$appStore.h5QueryString.powerby_style_20240313?i("div",[i("p",[t._v("该内容由用户自行制作")]),i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 是简单易用的二维码平台，免费即可使用 ")])]):i("div",[i("p",[t._v("该内容由用户自行制作")]),i("p",[i("strong",{style:{color:t.bottomColor.textColor}},[t._v(" 草料二维码 ")]),t._v(" 是专业的二维码平台，人人都能免费使用 ")])])]):[i("a",{staticClass:"pageFrom",style:{color:t.bottomColor.defaultColor},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.by"))+" ")]),i("a",{style:{color:t.bottomColor.textColor,display:"flex"},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.title"))+" ")]),i("a",{staticClass:"pageMade",style:{color:t.bottomColor.defaultColor},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.build"))+" ")])]]],2):t._e(),i("div",{staticClass:"reportContent clearfix"},[t.isRecordCode?i("div",{staticClass:"link",style:{color:t.bottomColor.defaultColor,textAlign:"left",position:"relative"},on:{click:t.goHistory}},[t._v(" "+t._s(t.$$t("code.myRecords"))+" ")]):t._e(),i("div",{staticClass:"link links",style:{color:t.bottomColor.defaultColor}},[t.subTplCodeOpenEdit?i("div",{on:{click:t.adminEntry}},[t._v("管理员入口")]):t._e(),t.shouldShowComplain?i("div",{style:{paddingLeft:t.$$u(6)},on:{click:t.goComplain}},[t._v(" "+t._s(t.$$t("code.report"))+" ")]):t._e()])])])},_i=[];let fi=!1,vi=class extends r["d"]{constructor(){super(...arguments),this.isEnableToMina=!1}mounted(){setTimeout(()=>{this.scroll(),window.addEventListener("scroll",this.scroll)},2e3),this.isEnableToMina=Object(p["q"])()}destroyed(){window.removeEventListener("scroll",this.scroll,!1)}goComplain(){const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),e=this.$route.fullPath,i={};t&&(i.coding=t),e&&(i.codepath=e),n["a"].logClick(113,18007,"",{openid:(new R["a"]).id,coding:t}),this.$$go("/pages/complain/select/main",i)}goHistory(){this.$$appStore.h5QueryString.frompc?this.$$go("/pages/record-history/main"):this._showTip("","fromH5CheckMyRecord")}adminEntry(){this._showTip("adminEntry")}bottomFontSize(){return this.$$appStore.h5QueryString.frompc?this.$$u("13px"):this.$$u("12px")}scroll(){const t=this.$$getValue(document.getElementById("mark"),"offsetTop",0),e=document.documentElement.scrollTop;if(t>=e&&t<e+window.innerHeight&&!fi){fi=!0;const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding");n["a"].logClick(114,118037,"",{cvid:(new R["a"]).id,coding:t||this.getCoding()})}}getCoding(){let[t]=decodeURIComponent(this.$route.query.url||"").split("?");return t||(t=""),t&&t.indexOf("://")>-1&&([,t]=t.split("://")),t&&([,,t]=t.split("/")),t||""}async goQA(){const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),e=this.$$getValue(this.$$appStore,"codeData.qrcode_top_component"),i=this.$$getValue(this.$$appStore,"codeData.qrcode_compontent"),o=this.$$getValue(this.$$appStore,"codeData.qrcode_record.create_from"),a=t=>"file"===this.$$getValue(t,"component_code"),s=Object(b["cb"])(e,a)||Object(b["cb"])(i,a);this.isTrialEdtion?window.location.href="https://qr71.cn/o2eikt/qR970lA":(await n["a"].logClick(114,118038,"",{cvid:(new R["a"]).id,coding:t||this.getCoding(),isRecordCode:this.isRecordCode,isFileCode:s,createFrom:o}),64!==Number(o)?this.isRecordCode?window.location.href="/?url=https://qr61.cn/o2eikt/q0e8Ynp":window.location.href="/?url=https://qr61.cn/o2eikt/q2RCdM0":window.location.href="/?url=https://qr61.cn/o2eikt/qGNuIZ1")}_showTip(t,e){this.$emit("showTip",t,e)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],vi.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],vi.prototype,"showTip",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],vi.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],vi.prototype,"isPoweredBy",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],vi.prototype,"isTrialEdtion",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],vi.prototype,"shouldShowComplain",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:!1})],vi.prototype,"isRecordCode",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],vi.prototype,"subTplCodeOpenEdit",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],vi.prototype,"originalId",void 0),vi=Object(s["a"])([r["a"]],vi);var yi=vi,bi=yi,wi=(i("6b0c"),Object(M["a"])(bi,gi,_i,!1,null,"51f53ec2",null)),Ci=wi.exports,$i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"op-menu",style:{visibility:t.showTip?"hidden":"visible",minHeight:t.showMangerEntery&&this.$$appStore.h5QueryString.frompc&&!this.$$appStore.h5QueryString.nomanagerentry?t.$$u(72):0}},[t.isFavorite||t.isShare||t.isManage?i("ul",{class:"share-collect "+(t.isManage?"x-is-manage":""),style:{borderColor:t.bottomColor.isLight?t.bottomColor.borderColor:"rgba(255, 255, 255, 0.13)"}},[t.isFavorite?i("li",{style:{color:t.bottomColor.textColor},on:{click:t.addFavorite}},[i("i",{class:{clifont:!0,"anticon--":!t.isCollect,"anticon-shoucangnew-01-1-01":t.isCollect}}),t._v(" "+t._s(t.$$t("code.favorite"))+" ")]):t._e(),t.isShare?i("li",{style:{color:t.bottomColor.textColor,borderColor:t.bottomColor.isLight?t.bottomColor.borderColor:"rgba(255, 255, 255, 0.13)"},on:{click:t.addShare}},[i("i",{staticClass:"clifont anticon-share-bottom-new"}),t._v(" "+t._s(t.$$t("code.share"))+" ")]):t._e(),t.isManage?i("li",{style:{color:t.bottomColor.textColor,borderColor:t.bottomColor.isLight?t.bottomColor.borderColor:"rgba(255, 255, 255, 0.13)"},on:{click:t.adminEntry}},[i("i",{class:{clifont:!0,"anticon-cli-new-set":!0}}),t._v(" "+t._s(t.$$t("common.manage"))+" ")]):t._e()]):t._e()])},Oi=[];let Si=class extends r["d"]{get isCollect(){return this.$$appStore.isCollect}get isFavorite(){return this.$$getValue(this.codeData,"show_collect",0)&&!this.isH5Preview}get isShare(){return this.$$getValue(this.codeData,"show_share",0)}get isManage(){return this.$$getValue(this.codeData,"show_manage",0)&&!this.isH5Preview&&this.$$appStore.h5QueryString.frompc}get isH5Preview(){return 2===this.$$getValue(this.codeData,"qrcode_record.route_type",0)}adminEntry(){this._showTip("adminEntry")}addFavorite(){this._showTip("addFavorite","addFav")}_showTip(t,e){this.$emit("showTip",t,e)}addShare(){this.$$toast("点击右上角「···」，进行分享");const t=Object(p["b"])(".__toast-inner-wrap");t.length&&(t[t.length-1].style.whiteSpace="nowrap")}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Si.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Si.prototype,"showTip",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Si.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Si.prototype,"showMangerEntery",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Si.prototype,"isEnableToMina",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],Si.prototype,"originalId",void 0),Si=Object(s["a"])([r["a"]],Si);var ji=Si,Ii=ji,Ti=(i("8090"),Object(M["a"])(Ii,$i,Oi,!1,null,"802181f8",null)),xi=Ti.exports;let ki=class extends r["d"]{constructor(){super(...arguments),this.showTip=!1}get validOpenTime(){return this.$$getValue(this.validInfo,"validOpenTime",{})}get validLocation(){return this.$$getValue(this.validInfo,"validLocation",{})}get isPoweredBy(){return this.$$getValue(this.codeData,"show_powered_by",1)}get shouldShowComplain(){return this.$$getValue(this.codeData,"show_complain",1)}get isTrialEdtion(){return 100===this.$$getValue(this.codeData,"edition_msg.edition_id",0)}get subTplCodeOpenEdit(){return!1}hoverTip(){const t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1||t.indexOf("iPod")>-1||t.indexOf("Symbian")>-1;e||(this.showTip=!0)}hideTip(){this.showTip&&(this.showTip=!1)}getShowTip(t,e){this.$emit("showTip",t,e)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ki.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ki.prototype,"validInfo",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ki.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:()=>!1})],ki.prototype,"isRecordCode",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],ki.prototype,"originalId",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:()=>!1})],ki.prototype,"isEnableToMina",void 0),ki=Object(s["a"])([Object(r["a"])({components:{CompanyCard:mi,CodeMark:Ci,OpMenu:xi}})],ki);var Mi=ki,Di=Mi,Pi=(i("7189"),Object(M["a"])(Di,ri,ni,!1,null,"095bba7c",null)),Vi=Pi.exports,Li=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showMsg?i("div",[i("portal",{attrs:{to:t.capture?"footer-msg-portal":"fixed-msg-entry"}},[i("div",{staticClass:"footerAction footerActionPlaceholder",style:t.capture?"display:none;":""}),i("div",{staticClass:"footerAction",style:t.capture?"position: static;":""},[i("div",{staticClass:"enterMask",on:{click:t.enter}}),i("div",{staticClass:"enter"},[i("div",{staticClass:"audioAc"},[i("span",{staticClass:"clifont anticon-yuyin"})]),i("div",{staticClass:"item itemForTextarea"},[i("div",{staticClass:"textAc"},[t._v(t._s(t.reviewDesc))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"ac"},[i("span",{staticClass:"clifont anticon-at"})]),i("div",{staticClass:"ac"},[i("span",{staticClass:"clifont anticon-cli-add-o"})])])])])]),i("portal-target",{attrs:{name:"fixed-msg-entry"}})],1):t._e()},Ri=[];let qi=class extends r["d"]{enter(){this.$emit("showTip","","normal")}get capture(){return this.$$appStore.h5QueryString.capture||""}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],qi.prototype,"codeData",void 0),qi=Object(s["a"])([Object(r["a"])({computed:{showMsg(){var t,e,i,o;const a=null!==(t=null===(e=this.codeData)||void 0===e||null===(i=e.qrcode_setting_msg)||void 0===i?void 0:i.review_set)&&void 0!==t?t:{};return null===a||void 0===a||null===(o=a.config_record)||void 0===o?void 0:o.status},reviewDesc(){var t,e,i,o;const a=null!==(t=null===(e=this.codeData)||void 0===e||null===(i=e.qrcode_setting_msg)||void 0===i?void 0:i.review_set)&&void 0!==t?t:{};return null===a||void 0===a||null===(o=a.config_record)||void 0===o?void 0:o.review_desc}}})],qi);var Ei=qi,Fi=Ei,zi=(i("27a8"),Object(M["a"])(Fi,Li,Ri,!1,null,"4b63de1a",null)),Bi=zi.exports,Hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showMsgList?i("div",{staticClass:"reviewWrapper __reviewWrapper"},[i("detail-review",{ref:"detailReview",attrs:{fontSizeMsg:t.fontSizeMsg,title:t.reviewTitle+"("+t.recordSum+")",pReviewList:t.reviewList,showSlots:t.showSlots,showActions:t.showActions},on:{jumpToRefReview:t.jumpToRefReview,openRemarkDesc:t.openRemarkDesc,review:t.review}},[i("div",{staticClass:"empty-wrapper",attrs:{slot:"empty"},slot:"empty"},[t.firstInitial?i("div",{staticClass:"loading"},[i("img",{staticClass:"loading-image",attrs:{src:"https://static.clewm.net/cli/images/code-loading.gif"}})]):t.hasPower?i("div",{staticClass:"empty-wrapper"},[t._v("暂无内容")]):i("div",{staticClass:"link"},[t._v("需要验证身份查看")])]),i("div",{staticClass:"review-list-tip has-load-tip",attrs:{slot:"load-more-1"},slot:"load-more-1"},[t.moreLoading?i("span",[t._v("加载中")]):t.loaded?t._e():i("span",{staticClass:"link",on:{click:t.loadMore}},[t._v(t._s(t.directReviewId?"中间还有未加载数据，点击加载":"加载更多"))])]),i("div",{staticClass:"review-list-tip has-load-tip",attrs:{slot:"load-more-2"},slot:"load-more-2"},[t.moreRefLoading?i("span",[t._v("加载中")]):t.refListLoaded?t._e():i("span",{staticClass:"link",on:{click:t.loadRefMore}},[t._v(" 加载更多 ")])]),i("div",{staticClass:"review-list-tip",attrs:{slot:"after-review-list"},slot:"after-review-list"},[(t.directReviewId?t.refListLoaded:t.loaded)?i("span",[t._v("没有更多了")]):t._e()]),i("div",{staticClass:"placeholder",staticStyle:{height:"20px"},attrs:{slot:"placeholder"},slot:"placeholder"})]),i("Modal",{ref:"tipModal",attrs:{tip:"<span style='color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: "+this.$$px2rem(16)+"rem;' >底部协作功能</span>","confirm-name":"我知道了","cancel-name":"功能介绍"},on:{onCancel:t.goFuncIntro}},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"desc"},[i("div",[t._v(" 仅限内部成员可在当前页面进行协作，支持图文、手写签名和@他人进行协作，任何人扫码均可查看所有协作动态。 ")])])])])],1):t._e()},Ai=[],Wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.reviewList?i("div",{staticClass:"reviewWrapper"},[i("div",{staticClass:"title"},[i("div",{staticClass:"value",on:{click:t.openRemarkDesc}},[t._v(" "+t._s(t.title)),i("i",{staticClass:"clifont anticon-question icon_quest-style"})]),t._t("content")],2),i("div",{staticClass:"reviewList"},[t._l(t.reviewList,(function(e,o){return[1===e.create_from?i("div",{key:o,class:"item item-review "+(t.blinkToShowId===e.id?"blinkToShow":"")+" "+(3===e.audit_status?"hidden":""),attrs:{id:"item_"+e.id},on:{click:t.review}},[i("Header",{attrs:{item:e}}),i("div",{staticClass:"value"},[i("div",{staticClass:"name"},[i("Name",{attrs:{item:e}})],1),i("Reply",{attrs:{item:e,fontSizeMsg:t.fontSizeMsg}}),i("div",{staticClass:"other"},[e.watermaking?i("div",{staticClass:"water",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 图片水印生成中 ")]):t._e(),i("div",{staticClass:"time",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" "+t._s(e.create_time_text)+" ")]),t.showActions.reply?i("div",{staticClass:"reply link",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15),attrs:{"data-trigger":"link"}},[t._v(" 回复 ")]):t._e(),t.showActions.del?i("div",{staticClass:"delete link",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 删除 ")]):t._e()])],1)],1):t._e(),6===e.create_from?i("div",{key:o,class:"item item-review "+(3===e.audit_status?"hidden":""),attrs:{id:"item_"+e.id}},[i("div",{staticClass:"header"},[e.create_avatar_url?i("img",{attrs:{src:e.create_avatar_url+"?x-oss-process=image/resize,limit_0,m_fill,w_120,h_120/quality,q_100"}}):e.wx_work_msg?[i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:e.wx_work_msg.corp_id,openid:e.wx_work_msg.user_id,type:"userName"}})]:i("span",{attrs:{src:e.create_avatar_url}},[t._v(" "+t._s(e.create_user_name_limit)+" ")])],2),i("div",{staticClass:"value"},[3===e.audit_status?i("div",{staticClass:"noResult",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 内容涉嫌违规 ")]):i("div",{staticClass:"text"},[i("div",{staticClass:"name"},[e.wx_work_msg&&e.wx_work_msg.corp_id&&e.wx_work_msg.user_id&&t.$$appStore.h5QueryString.frompc?[i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:e.wx_work_msg.corp_id,openid:e.wx_work_msg.user_id,type:"userName"}})]:i("span",{staticClass:"name"},[t._v(" "+t._s(e.recorder_member_name||e.create_user_name)+" ")]),i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 通知了"+t._s(e.type3Fields.length)+"人： ")]),t._l(e.type3Fields,(function(e,o){return[i("div",{key:o,staticClass:"text-word text-word-block"},[e.wx_work_msg&&e.wx_work_msg.corp_id&&e.wx_work_msg.user_id&&t.$$appStore.h5QueryString.frompc?[i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:e.wx_work_msg.corp_id,openid:e.wx_work_msg.user_id,type:"userName"}})]:i("span",{staticClass:"name"},[t._v(" "+t._s(e.reminder_member_name||e.content)+" ")]),i("span",{class:"readText text-bold "+(e.has_read?"readTextHasRead":""),style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" ["+t._s(e.has_read?"已读":"未读")+"] ")])],2)]}))],2)]),t._l(e.type1Fields,(function(e,o){return[i("span",{key:o,staticClass:"text-word mr-4",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" "+t._s(e.content)+" ")])]})),i("div",{staticClass:"other"},[i("div",{staticClass:"time",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" "+t._s(e.create_time_text)+" ")])])],2)]):t._e(),2===e.create_from?i("div",{key:o,staticClass:"item item-text",attrs:{id:"item_"+e.id}},[i("view",{staticClass:"item-text-value"},[e.wx_work_msg&&e.wx_work_msg.corp_id&&e.wx_work_msg.user_id&&t.$$appStore.h5QueryString.frompc?[i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:e.wx_work_msg.corp_id,openid:e.wx_work_msg.user_id,type:"userName"}})]:i("span",{staticClass:"name"},[t._v(" "+t._s(e.recorder_member_name||e.create_user_name)+" ")]),i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 转发了记录 "+t._s(e.create_time_text)+" ")])],2)]):t._e(),3===e.create_from?i("div",{key:o,staticClass:"item item-text",attrs:{id:"item_"+e.id}},[i("div",{staticClass:"item-text-value"},[e.wx_work_msg&&e.wx_work_msg.corp_id&&e.wx_work_msg.user_id&&t.$$appStore.h5QueryString.frompc?[i("ww-open-data",{staticStyle:{display:"inline-block",color:"#999","font-weight":"500"},attrs:{corpid:e.wx_work_msg.corp_id,openid:e.wx_work_msg.user_id,type:"userName"}})]:i("span",{staticClass:"name"},[t._v(" "+t._s(e.recorder_member_name||e.create_user_name)+" ")]),[i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 将记录更新为 ")]),i("span",{style:"font-weight: 500;font-size:"+t.fontSizeMsg.fontSize15+";color: "+e.remark.process_status_text_color},[t._v(" "+t._s(e.remark.process_status_text)+" ")])],i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" "+t._s(e.create_time_text)+" ")])],2)]):t._e(),8===e.create_from?i("div",{key:o,class:"item item-review "+(t.blinkToShowId===e.id?"blinkToShow":"")+" "+(3===e.audit_status?"hidden":""),attrs:{"hover-class":"item-review-hover","data-index":o,"data-item":e,id:"item_"+e.id},on:{click:t.review}},[i("Header",{attrs:{item:e}}),i("div",{staticClass:"value"},[i("div",{staticClass:"name",staticStyle:{"line-height":"20px"}},[i("Name",{attrs:{item:e}}),t._v(" 回复了内容 ")],1),1===e.remark.reply_review_msg.status?i("div",{staticClass:"ref-content del-ref"},[t._v(" 内容已被删除 ")]):i("div",{staticClass:"ref-content",attrs:{"data-ref-review-status":e.remark.reply_review_msg.status,"data-ref-review-id":e.remark.review_id},on:{click:t.jumpToRefReview}},[i("div",{staticClass:"ref-name"},[i("Name",{attrs:{item:e.remark.reply_review_msg}}),t._v("： ")],1),i("div",{staticClass:"ref-reply"},[i("Reply",{attrs:{item:e.remark.reply_review_msg}})],1)]),i("Reply",{attrs:{item:e}}),i("div",{staticClass:"other"},[e.watermaking?i("div",{staticClass:"water",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 图片水印生成中 ")]):t._e(),i("div",{staticClass:"time",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" "+t._s(e.create_time_text)+" ")]),t.showActions.reply?i("div",{staticClass:"reply link",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15),attrs:{"data-trigger":"link"}},[t._v(" 回复 ")]):t._e(),t.showActions.del?i("div",{staticClass:"delete link",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 删除 ")]):t._e()])],1)],1):t._e(),"__load_more__"===e.id?t._t("load-more-"+e.type):t._e()]})),t.$$getValue(t.reviewList,"length")?t._t("after-review-list"):[t.showSlots.empty?t._t("empty"):i("view",{staticClass:"noReviewWrap"},[t.canSetProcessStatus?i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 当前没有后续动态，"),i("span",{staticClass:"link",style:"font-size:"+t.fontSizeMsg.fontSize13},[t._v("去添加")])]):i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(" 暂无备注 ")])])]],2)]):t._e()},Ni=[],Ui=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[t.item.create_avatar_url?[t.imgLoadErr?i("span",[t._v(t._s(t.item.create_user_name_limit))]):i("img",{attrs:{src:t.item.create_avatar_url+"?x-oss-process=image/resize,limit_0,m_fill,w_120,h_120/quality,q_100"},on:{error:t.onImgError}})]:t.item.wx_work_msg?[i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:t.item.wx_work_msg.corp_id,openid:t.item.wx_work_msg.user_id,type:"userName"}})]:i("span",[t._v(" "+t._s(t.item.create_user_name_limit)+" ")])],2)},Qi=[];let Gi=class extends r["d"]{constructor(){super(...arguments),this.src="",this.imgLoadErr=!1}onImgError(){this.imgLoadErr=!0}};Object(s["a"])([Object(r["c"])({type:Object})],Gi.prototype,"item",void 0),Gi=Object(s["a"])([Object(r["a"])({computed:{src(){return this.item.create_avatar_url+"?x-oss-process=image/resize,limit_0,m_fill,w_120,h_120/quality,q_100"}}})],Gi);var Yi=Gi,Ji=Yi,Xi=(i("1ea1"),Object(M["a"])(Ji,Ui,Qi,!1,null,"9338c85c",null)),Ki=Xi.exports,Zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item.wx_work_msg&&t.item.wx_work_msg.corp_id&&t.item.wx_work_msg.user_id&&t.$$appStore.h5QueryString.frompc?i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:t.item.wx_work_msg.corp_id,openid:t.item.wx_work_msg.user_id,type:"userName"}}):i("span",{staticClass:"name"},[t._v(" "+t._s(t.item.recorder_member_name||t.item.create_user_name)+" ")])},to=[];let eo=class extends r["d"]{};Object(s["a"])([Object(r["c"])({type:Object})],eo.prototype,"item",void 0),eo=Object(s["a"])([r["a"]],eo);var io=eo,oo=io,ao=(i("b889"),Object(M["a"])(oo,Zi,to,!1,null,"20c452b5",null)),so=ao.exports,ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 3===t.item.audit_status?i("div",{staticClass:"noResult"},[t._v("内容涉嫌违规")]):i("div",{staticClass:"text"},[t._l(t.item.field_data,(function(e,o){return[1===e.type||3===e.type?i("div",{key:o,class:"text-word "+(1===e.type?"mr-4":"")+" "+(3===e.type?"text-word-block":"")},[e.wx_work_msg&&e.wx_work_msg.corp_id&&e.wx_work_msg.user_id&&t.$$appStore.h5QueryString.frompc?[t._v(" @"),i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:t.item.wx_work_msg.corp_id,openid:t.item.wx_work_msg.user_id,type:"userName"}})]:1===e.type?i("span",[t._v(" "+t._s(e.content)+" ")]):i("span",{staticClass:"name"},[t._v(" "+t._s(e.content?e.content:"@"+e.reminder_member_name)+" ")]),3===e.type&&void 0!==e.has_read?i("span",{class:"readText "+(e.has_read?"readTextHasRead":"")},[t._v(" ["+t._s(e.has_read?"已读":"未读")+"] ")]):t._e()],2):t._e(),2===e.type?i("div",{key:o,staticClass:"text-img"},[t._l(e.content,(function(e,o){return[i("div",{key:o,staticClass:"img"},[i("img",{attrs:{src:!e.url&&e.is_violation?t.notAllowUrl:e.url,mode:"aspectFill",alt:""}})])]}))],2):t._e(),7===e.type?i("div",{key:o,staticClass:"text-img text-signature_img"},[t._l(e.content,(function(e,o){return[i("div",{key:o,staticClass:"img"},[i("img",{attrs:{src:!e.url&&e.is_violation?t.notAllowUrl:e.url,mode:"aspectFill"}})])]}))],2):t._e(),4===e.type?i("div",{key:o,staticClass:"text-audio",style:"padding-right: "+3*(e.content[0].roundTime-1)+"px"},[i("span",{staticClass:"clifont anticon-yuyin2"}),i("span",{staticClass:"text"},[t._v(t._s(e.content[0].roundTime)+"''")])]):t._e()]})),t.item.audioWord?i("div",{staticClass:"audio-word"},[2===t.item.audio_translated_data.status?[i("view",{staticClass:"defaultWord"},[i("span",{staticClass:"clifont anticon-cli-close"}),i("span",[t._v("转换失败")]),i("span",{staticClass:"link"},[t._v("重试")])])]:t._e(),1===t.item.audio_translated_data.status?[t.item.audio_translated_data.translated_text?[i("span",{style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v(t._s(t.item.audio_translated_data.translated_text))]),i("div",{staticClass:"tip",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[i("span",{staticClass:"clifont anticon-cli-check-fill"}),t._v("转换完成 ")])]:i("span",{staticClass:"defaultWord",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[t._v("无内容")])]:t._e(),0===t.item.audio_translated_data.status?[i("span",{staticClass:"defaultWord",style:"font-size:"+t.$$u(t.fontSizeMsg.fontSize15)},[i("span",{staticClass:"loadScanIcon clifont anticon-jiazai"}),t._v("转文字中")])]:t._e()],2):t._e()],2)},no=[];let co=class extends r["d"]{constructor(){super(...arguments),this.notAllowUrl=Et["l"]+"/images/mina-cli/not_allow.png"}};Object(s["a"])([Object(r["c"])({type:Object})],co.prototype,"item",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],co.prototype,"fontSizeMsg",void 0),co=Object(s["a"])([r["a"]],co);var lo=co,po=lo,ho=(i("effc"),Object(M["a"])(po,ro,no,!1,null,null,null)),uo=ho.exports;let mo=class extends r["d"]{constructor(){super(...arguments),this.notAllowUrl="https://ncstatic.clewm.net/feres/111ba98e_38ab5287_1690107108.png",this.wxWorkNoAvatarUrl="https://ncstatic.clewm.net/feres/a44fa42f_ed037c24_1640857725.png",this.blinkToShowId=0}updateReviewList(){var t;const e=Object(h["c"])(this.pReviewList);Object(h["j"])(e,(t,i)=>{if(6===t.create_from){const o=Object(h["g"])(t.field_data,t=>3===t.type),a=Object(h["g"])(t.field_data,t=>1===t.type);e[i].type3Fields=o,e[i].type1Fields=a}}),this.reviewList=e,console.log("reviewList watching---------",null===(t=this.reviewList)||void 0===t?void 0:t.length)}review(){this.$emit("review")}jumpToRefReview(t){var e,i;console.log("jumpToRefReview",t),null===(e=t.stopPropagation)||void 0===e||e.call(t);const{refReviewId:o,refReviewStatus:a}=null!==(i=t.currentTarget.dataset)&&void 0!==i?i:{};1!==+a?(this.blinkToShowId=Number(o),setTimeout(()=>{this.blinkToShowId=0},3e3),this.$emit("jumpToRefReview",{refReviewId:Number(o)})):this.$$toast("该内容已被删除")}openRemarkDesc(){this.$emit("openRemarkDesc")}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>[]})],mo.prototype,"pReviewList",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"备注"})],mo.prototype,"title",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],mo.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],mo.prototype,"fontSizeMsg",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:{}})],mo.prototype,"showSlots",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:{reply:!1,del:!1,showOwnerDel:!1}})],mo.prototype,"showActions",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:{}})],mo.prototype,"canSetProcessStatus",void 0),Object(s["a"])([Object(r["e"])("pReviewList")],mo.prototype,"updateReviewList",null),mo=Object(s["a"])([Object(r["a"])({components:{Header:Ki,Name:so,Reply:uo}})],mo);var go=mo,_o=go,fo=(i("7ec0"),Object(M["a"])(_o,Wi,Ni,!1,null,"9cfe5b62",null)),vo=fo.exports,yo=i("eee2");const bo=t=>{const e=[];return Object(h["j"])(t,t=>{null!==t&&void 0!==t&&t.review_data&&e.push(t.review_data)}),e},wo=1e3;let Co;const $o="__load_more__",Oo={ASC_LIST:1,ASC_REF_LIST:2,DSC_REF_LIST:3},So=(t,e)=>{const i=Object(b["cb"])(e,e=>e.id===t);return i};let jo=class extends r["d"]{constructor(){super(...arguments),this.loaded=!1,this.refListLoaded=!1,this.firstInitial=!1,this.moreLoading=!1,this.moreRefLoading=!1,this.reviewList=[],this.showSlots={empty:!0,placeholder:!0},this.emptyText="",this.hasPower=!0,this.reviewTitle="",this.recordSum=0,this.directReviewId=0,this.showActions={reply:!0,del:!1,showOwnerDel:!0},this.showMsgList=!1,this.asData={pageData:{last_record_id:0,page_token:""},refPageData:{last_record_id:0,page_token:""},includeRecordId:0,autoPos:!1},this.formatData={params:{},time:0}}init(){var t,e,i,o,a,s;if(!this.codeId)return;const r=null!==(t=null===(e=this.codeData)||void 0===e||null===(i=e.qrcode_setting_msg)||void 0===i?void 0:i.review_set)&&void 0!==t?t:{},n=null===r||void 0===r||null===(o=r.config_record)||void 0===o?void 0:o.status;n&&this.loadReviewList({firstInitial:!0});const c=null!==(a=null===r||void 0===r||null===(s=r.config_record)||void 0===s?void 0:s.review_title)&&void 0!==a?a:"添加后续动态";this.showMsgList=n,this.reviewTitle=this.reviewTitle||c}autoPosItem(){var t;if(this.asData.autoPos)return;this.asData.autoPos=!0;const e=this.$$appStore.h5QueryString,i=null!==(t=null===e||void 0===e?void 0:e.direct_review_id)&&void 0!==t?t:0;if(i){let t=null;Object(yo["a"])({handler:()=>(t=this.$refs.detailReview,t&&t.jumpToRefReview),task:()=>{t.jumpToRefReview({currentTarget:{dataset:{refReviewId:+i}}})}})}}splitReviewListByField({fieldId:t=$o,fieldType:e,reviewList:i=this.reviewList}={}){const o=Object(b["l"])(i,i=>i.id===t&&i.type===e),a=o>-1,s=a?i.slice(0,o):i,r=a?i.slice(o+1,i.length):[];return{leftList:s,rightList:r,hasField:a}}async loadReviewList({loadMore:t=!1,firstInitial:e=!1}={}){this.firstInitial=e;const{pageData:i,includeRecordId:o}=this.asData,a={record_source:9,search_from:"qrcode_review",order_by:"record_id,asc",size:10,code_id:this.codeId,keyword:"",...t?Object(h["P"])(i,["page_token","last_record_id"]):{include_record_id:o}},s=await n["c"].getRecordHistorySimplifyDissociate(a);let{directReviewId:r}=this;if(1===(null===s||void 0===s?void 0:s.code)){var c,l,d,p,u,m,g;const i=null!==(c=null===s||void 0===s?void 0:s.data)&&void 0!==c?c:{},o=bo(null===i||void 0===i?void 0:i.list),{current_page:a=1,lasted_page:n=1,page_token:h="",list_size:v,record_total:y}=null!==(l=null===i||void 0===i?void 0:i.page)&&void 0!==l?l:{},w=null!==(d=null===i||void 0===i||null===(p=i.list[(null===i||void 0===i||null===(u=i.list)||void 0===u?void 0:u.length)-1])||void 0===p?void 0:p.id)&&void 0!==d?d:0,C=(null===i||void 0===i||null===(m=i.list)||void 0===m?void 0:m.length)<v||a>=n;let $=C?[]:[{id:$o,type:Oo.ASC_LIST}];if(t){const{leftList:t,rightList:e}=this.splitReviewListByField({fieldType:Oo.ASC_LIST});if(r){const i=So(r,o),{leftList:a}=this.splitReviewListByField({fieldId:r,reviewList:o});i&&($=[]),this.reviewList=t.concat(a).concat($).concat(e)}else{var _,f;const i=null!==(_=null===o||void 0===o||null===(f=o[o.length-1])||void 0===f?void 0:f.id)&&void 0!==_?_:0,{hasField:a,rightList:s}=this.splitReviewListByField({fieldId:i,reviewList:e});a&&($=[]);const r=a?s:e;this.reviewList=t.concat(o).concat($).concat(r)}}else this.reviewList=[].concat(o).concat($),r=0;const O=this.formatReviewList(o);this.asData.pageData={page_token:h,last_record_id:w},console.log("-------data-newReviewList------- mL",Object(b["e"])(O)),this.directReviewId=r,this.reviewList=O,this.loaded=(null===i||void 0===i||null===(g=i.list)||void 0===g?void 0:g.length)<v||a>=n,this.firstInitial=!1,this.moreLoading=!1,e&&(this.recordSum=y),e&&setTimeout(()=>{this.autoPosItem()},100)}}loadMore(){const{loaded:t,moreLoading:e}=this;t||e||(this.moreLoading=!0,this.loadReviewList({loadMore:!0}))}loadRefMore(){const{refListLoaded:t,moreRefLoading:e}=this;t||e||(this.moreRefLoading=!0,this.loadRefList({loadMore:!0}))}formatReviewList(t){const{reviewList:e}=this;let i;Object(h["j"])(t,t=>{const o=Object(b["l"])(e,e=>e.id===t.id);Object(h["j"])(t.field_data,t=>{if(i=0,Object(h["A"])([2,7],t.type)){const e=Object(b["j"])(t.content,t=>Object(h["A"])([1,2],+t.watermaking));e.length&&(i=1)}}),t.watermaking=i,o>-1?e[o]=t:e.push(t)}),t=Object(b["e"])(e);const o=[];return Object(h["j"])(t,t=>{if(Object(h["A"])([1,6,8],t.create_from)&&3!==t.audit_status){var e;void 0!==Object(h["u"])(t,"audio_translated_data.status")&&(t.audioWord=!0),0===Object(h["u"])(t,"audio_translated_data.status")&&o.push(t),Object(h["j"])(t.field_data,e=>{if(3===e.type){const i=Object(b["j"])(t.reminder_data,t=>t.reminder?t.reminder===e.content:t);Object(h["u"])(i,"length")&&(e.has_read=i[0].has_read,e.wx_work_msg=i[0].wx_work_msg,e.reminder_member_name=i[0].reminder_member_name)}});const i=null===t||void 0===t||null===(e=t.remark)||void 0===e?void 0:e.reply_review_msg;i&&3!==i.audit_status&&Object(h["j"])(i.field_data,t=>{if(3===t.type){const e=Object(b["j"])(i.reminder_data,e=>e.reminder?e.reminder===t.content:e);Object(h["u"])(e,"length")&&(t.has_read=e[0].has_read,t.wx_work_msg=e[0].wx_work_msg,t.reminder_member_name=e[0].reminder_member_name)}})}if(t.create_user_name){let e;e="管理员"===t.create_user_name?t.create_user_name.substring(0,2):t.create_user_name.substring(t.create_user_name.length-2),t.create_user_name_limit=e}t.create_time_text=Object(h["k"])(t.create_time,!0)}),o.length&&this.getAudioTranslatedTextFn(o),t}getAudioTranslatedTextFn(t,e){"getAudioTranslatedTextFn"===Object(h["u"])(t,"type")&&(t=Object(h["u"])(t,"detail.list",[]),e=Object(h["u"])(t,"detail.syncTranslated",!1));const i=[];Object(h["j"])(t,t=>{const o={...t.target_token||{},...e?{sync_translated:1}:{}};i.push(o)}),this.formatData.params=i,this.getTextFn(i),this.formatData.time=0,Co=setInterval(()=>{if(2===this.formatData.time){clearInterval(Co);const{reviewList:e}=this;return Object(h["j"])(t,t=>{const i=Object(b["l"])(e,e=>e.id===t.id);e[i]&&(e[i].audio_translated_data.status=2,e[i].audio_translated_data.translated_text="")}),void(this.reviewList=e)}this.getTextFn(i),this.formatData.time++},wo)}getTextFn(t){const e={target_msg:JSON.stringify(t),target_type:1},i=[];n["c"].getAudioTranslatedText(e).then(t=>{if(1===Object(h["u"])(t,"data.code")){const e=Object(h["u"])(t,"data.data",[]),{reviewList:o}=this;Object(h["j"])(e,t=>{const e=Object(h["u"])(t,"audio_translated_data.status"),a=Object(b["l"])(o,e=>e.id===t.target_id);Object(h["A"])([1,2],e)&&a>-1?o[a].audio_translated_data=t.audio_translated_data:0===e&&a>-1&&i.push({...o[a].target_token||{}})}),Object(h["u"])(i,"length")?this.formatData.params=i:(this.formatData.time=0,clearInterval(Co)),this.reviewList=o}else this.$$toast("出错了，请刷新重试")})}async loadRefList({loadMore:t=!1,refReviewId:e=this.directReviewId}={}){const{refPageData:i}=this.asData,o={record_source:9,search_from:"qrcode_review",size:10,code_id:this.codeId,order_by:"record_id,asc",keyword:"",...t?Object(h["P"])(i,["page_token","last_record_id"]):{direct_review_id:e}},a=await n["c"].getRecordHistorySimplifyDissociate(o);if(1===(null===a||void 0===a?void 0:a.code)){var s,r,c,l,d,p,u;const i=null!==(s=null===a||void 0===a?void 0:a.data)&&void 0!==s?s:{},o=bo(null===i||void 0===i?void 0:i.list);if(!t&&(null===o||void 0===o||null===(r=o[0])||void 0===r?void 0:r.id)!==e)return void this.$$toast("该内容已被删除");const{current_page:n=1,lasted_page:h=1,page_token:_="",list_size:f}=null!==(c=null===i||void 0===i?void 0:i.page)&&void 0!==c?c:{},v=null!==(l=null===i||void 0===i||null===(d=i.list[(null===i||void 0===i||null===(p=i.list)||void 0===p?void 0:p.length)-1])||void 0===d?void 0:d.id)&&void 0!==l?l:0,y=(null===i||void 0===i||null===(u=i.list)||void 0===u?void 0:u.length)<f||n>=h;let b=y?[]:[{id:$o,type:Oo.ASC_REF_LIST}];if(t){var m,g;const{leftList:t,rightList:e}=this.splitReviewListByField({fieldType:Oo.ASC_REF_LIST}),i=null!==(m=null===o||void 0===o||null===(g=o[o.length-1])||void 0===g?void 0:g.id)&&void 0!==m?m:0,{hasField:a,rightList:s}=this.splitReviewListByField({fieldId:i,reviewList:e});a&&(b=[]);const r=a?s:e;this.reviewList=t.concat(o).concat(b).concat(r)}else{const{leftList:t,hasField:e}=this.splitReviewListByField({fieldType:Oo.ASC_LIST});this.reviewList=t.concat(e?[{id:$o,type:Oo.ASC_LIST}]:[]).concat(o).concat(b)}const w=this.formatReviewList(o);this.asData.refPageData={page_token:_,last_record_id:v},this.directReviewId=e,this.reviewList=w,this.refListLoaded=y,this.moreRefLoading=!1}}review(){this.$emit("showTip","","normal")}jumpToRefReview(){this.$emit("showTip","","normal")}moveTo(t,e=120){var i,o,a;const s=null!==(i=document.documentElement.scrollTop)&&void 0!==i?i:0,r=null!==(o=null===(a=document.getElementById(t))||void 0===a?void 0:a.getBoundingClientRect().top)&&void 0!==o?o:0,n=s+r-e;window.scroll(0,n<0?0:n)}openRemarkDesc(){this.$refs.tipModal.showModal()}goFuncIntro(){this.$emit("showTip")}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],jo.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],jo.prototype,"fontSizeMsg",void 0),Object(s["a"])([Object(r["e"])("codeData")],jo.prototype,"init",null),jo=Object(s["a"])([Object(r["a"])({components:{DetailReview:vo,Modal:K["a"]},computed:{codeId(){var t,e,i;return null!==(t=null===(e=this.codeData)||void 0===e||null===(i=e.qrcode_record)||void 0===i?void 0:i.id)&&void 0!==t?t:0}}})],jo);var Io=jo,To=Io,xo=(i("4af8"),Object(M["a"])(To,Hi,Ai,!1,null,"2c105a4f",null)),ko=xo.exports,Mo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"__code_table"},[i("div",{domProps:{innerHTML:t._s(t.tableHTML)}})])},Do=[];const Po={5:"tb1",6:"tb6",7:"tb2",8:"tb3",9:"tb4",10:"tb5",1:"tb7",2:"tb8",3:"tb9",4:"tb10"};let Vo=class extends r["d"]{constructor(){super(...arguments),this.tableHTML=""}init(){const t=this.data.attribute_list;this.decodeTable(t)}mounted(){this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}decodeTable(t){if(Object(b["J"])(t)){const e=[];t.forEach(t=>{const{key:i,columns:o,data:a}=JSON.parse(Object(b["C"])(t,"table_html.value","{}"));e.push(`\n      <table class="${Po[i]}">\n${o[0].title?`\n      <thead>\n        <tr>\n          <th colspan="${o[0].colSpan}">${o[0].title}</th>\n${(()=>o.map((t,e)=>0===e?"":t.title?`<th>${t.title}</th>`:"").join(""))()}\n        </tr>\n      </thead>\n    `:""}\n        <tbody>\n${(()=>{const t=[];return a.forEach(e=>{const i=["<tr>"];for(const[t,o]of Object(b["h"])(e))"key"!==t&&i.push(`<td>${""===String(o).trim()?"&nbsp;":o}</td>`);i.push("</tr>"),t.push(i.join(""))}),t.join("")})()}\n        </tbody>\n      </table>\n    `)}),this.tableHTML=e.join("")}else this.tableHTML=""}};Object(s["a"])([Object(r["c"])({type:Object})],Vo.prototype,"data",void 0),Object(s["a"])([Object(r["e"])("data")],Vo.prototype,"refreshData",null),Vo=Object(s["a"])([r["a"]],Vo);var Lo=Vo,Ro=Lo,qo=(i("f8b0"),Object(M["a"])(Ro,Mo,Do,!1,null,null,null)),Eo=qo.exports,Fo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"empty-video-module"},[i("video-module",{attrs:{title:t.data.attribute_list[0].video_name.value,emptyTitle:t.data.attribute_list[0].title.value,src:t.src,cover:t.getPosterSrc(t.data.attribute_list[0]),"comp-data":t.data,"can-play":t.canPlay,long:t.data.attribute_list[0].video_long.value,remainNum:t.remainNum,isPaidUser:t.isPaidUser},on:{playCounter:t.playCounter}})],1):t._e()},zo=[],Bo=i("0cbd");let Ho=class extends r["d"]{constructor(){super(...arguments),this.canPlay=!0,this.remainNum=0,this.src="",this.show=!1}beforeMount(){this.src=this.data.attribute_list[0].video_url.value,this.$$appStore.isTopMode&&(this.src=this.data.attribute_list[0].video_url.value.replace("tcview-nc.clewm.net","tcv-nc.clewm.net"))}async init(){const{video_url:t}=this.data.attribute_list[0];if(t.value){this.show=!0;const t=await this.checkCanPlay();this.canPlay=t}}async mounted(){await this.init()}refreshData(){this.$$appStore.codePreviewCompCanFresh&&this.init()}getPosterSrc(t){let e;if(""!==t.preview_url.value)e=t.preview_url.value;else{const i=t.video_url.value.split("/");e="http://qiniu-nc.clewm.net/climinavideoposter/"+i[i.length-1]}return e}async checkCanPlay(){const{data:t}=await n["c"].mediaCanPlay(Object(h["q"])(this.$$appStore.codeData,this.data,"video")),e=t.play_maximum_limit-t.play_limit;this.remainNum=e>0?e:0;const{play_available:i}=t;return 1===i}async playCounter(){this.isPaidUser||this.$$appStore.isTopMode||Object(p["l"])("frompc")||await n["c"].playCounter(Object(h["q"])(this.$$appStore.codeData,this.data,"video"))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ho.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],Ho.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["e"])("data")],Ho.prototype,"refreshData",null),Ho=Object(s["a"])([Object(r["a"])({components:{VideoModule:Bo["a"]}})],Ho);var Ao=Ho,Wo=Ao,No=(i("7b1b"),Object(M["a"])(Wo,Fo,zo,!1,null,"31df0198",null)),Uo=No.exports,Qo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.headType||t.moduleMsg.is_empty_component&&3===t.$$getValue(t.codeData,"qrcode_record.tpl_qrcode_status")&&(0!==t.$$getValue(t.codeData,"soncode_edit_position")&&3!==t.$$getValue(t.codeData,"soncode_edit_position")||!t.subCodeEdit_frompc||5===t.editAuthType)?t._e():i("div",{class:"head-module-wrap "+(t.imageStyle?"x-imageStyle"+t.imageStyle:""),style:t.$$setStyle({common:{padding:"0 "+("image"===t.headType?"0":t.$$u(10)),paddingTop:t.$$u(t.headCmpInfo.headModule.gap.top),paddingBottom:t.$$u(t.headCmpInfo.headModule.gap.bottom),color:t.baseColor}})},["file"===t.headType?i("head-file",{attrs:{fileMsg:t.moduleMsg,bottomColor:t.bottomColor,hasRichText:t.hasRichText,currentFontSize:t.currentFontSize,isCardStyle:t.isCardStyle,hasOpenMsg:t.hasOpenMsg,headCmpInfo:t.headCmpInfo},on:{fileReadToMina:t.fileReadToMina}}):t._e(),"video"===t.headType?i("head-video",{attrs:{videoMsg:t.moduleMsg,isPaidUser:t.isPaidUser,currentFontSize:t.currentFontSize}}):t._e(),"image"===t.headType?i("head-img",{attrs:{imgMsg:t.moduleMsg,codeColorInfo:t.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,swiperBgColor:t.swiperBgColor,allImgs:t.allImgs,currentFontSize:t.currentFontSize,headCmpInfo:t.headCmpInfo,isColorExtend:t.isColorExtend}}):t._e(),"audio"===t.headType?i("head-audio",{attrs:{audioMsg:t.moduleMsg,isPaidUser:t.isPaidUser,currentFontSize:t.currentFontSize}}):t._e()],1)},Go=[],Yo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"headFileWrapper",class:{"is-card-style":t.isCardStyle,"is-vertical-center":t.headCmpInfo.isVerticalCenter,"no-title":t.noTitle,"has-msg-list":t.hasOpenMsg}},[t.templateComponentId?i("div",{staticClass:"placeholderWrapper",attrs:{"data-template-component-id":t.templateComponentId}},[i("div",{staticClass:"placeholderEl"},[i("i",{class:"clifont anticon-cli-file placeholderIcon font-size-16-"+t.currentFontSize}),i("div",{class:"placeholderName font-size-12-"+t.currentFontSize},[t._v(" "+t._s(t.templateComponentTitle)+" ")])])]):[1===t.$$getValue(t.fileList,"length",0)?i("div",{staticClass:"singleFile",class:{noTitle:t.noTitle,isOnlyHead:t.isOnlyHead},style:t.$$appStore.codeInfo.isRecordCode?"padding: 0 36px":""},[i("div",{on:{click:t.handleFileItem}},[i("image-dif",{staticClass:"fileImg",attrs:{src:t.$$getValue(t.headFileDecoder,"fileImg",""),cusStyle:t.$$setStyle({common:{width:"90px",height:"115px",margin:"0 auto"},h5:{width:t.$$u("90px"),height:t.$$u("115px"),minWidth:"90px",minHeight:"115px"}})}})],1),i("div",{staticClass:"fileName",style:"color: "+t.$$getValue(t.headFileDecoder,"defaultStyle.title.color","")+";\n        opacity: "+t.$$getValue(t.headFileDecoder,"defaultStyle.title.opacity","")+";"},[t._v(" "+t._s(t.fileMajorName)),i("span",{staticClass:"nowrap"},[t._v(t._s(t.extension))])]),i("div",{staticClass:"fileSize",style:"color: "+t.$$getValue(t.headFileDecoder,"defaultStyle.size.color","")+";\n        opacity: "+t.$$getValue(t.headFileDecoder,"defaultStyle.size.opacity","")},[t._v(" "+t._s(t.$$getValue(t.fileList,"0.file_size.value",""))+" ")]),t.canSinglePreview?i("div",{staticClass:"fileOperation"},[i("div",{style:{color:"pure"===t.colorInfo.type||t.isCardStyle?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.color",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnColor",""),backgroundColor:"pure"===t.colorInfo.type||t.isCardStyle?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.bgColor",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnBackground","")},on:{click:function(e){return t.openFile({fileObj:t.fileList[0]})}}},[t._v(" "+t._s(t.$$t("code.preview"))+" ")])]):i("div",{staticClass:"fileOperation",class:{cannotDownload:!t.checkCanDownload(t.$$getValue(t.fileList,"0"))}},[t.checkCanDownload(t.$$getValue(t.fileList,"0"))?i("div",{style:{color:"pure"===t.colorInfo.type||t.isCardStyle?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.color",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnColor",""),backgroundColor:"pure"===t.colorInfo.type||t.isCardStyle?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.bgColor",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnBackground",""),marginBottom:"24px"},on:{click:function(e){return t.openSourceFile(t.fileList[0])}}},[t._v(" "+t._s(t.$$t("code.download"))+" ")]):t._e(),t.isOnlyHead&&t.checkCanDownload(t.$$getValue(t.fileList,"0"))?i("p",{staticClass:"fileOperationTip"},[t._v(" "+t._s(t.$$t("code.downloadFile.preview"))+t._s(t.$$t("code.downloadFile.download"))+" ")]):t._e(),t.checkCanDownload(t.$$getValue(t.fileList,"0"))?t._e():i("p",{staticClass:"fileOperationTip"},[t._v(" "+t._s(t.$$t("code.downloadFile.cannotDownload"))+" ")])])]):t._e(),t.$$getValue(t.fileList,"length",0)>1?i("div",{staticClass:"fileListBox"},[i("div",{staticClass:"fileList"},t._l(t.fileList,(function(e,o){return i("FileItem",{key:o,attrs:{index:o,fileObj:e},on:{handleClickFileItem:t.openFile}})})),1)]):t._e(),i("a",{staticClass:"placeholder-edit-nav",staticStyle:{display:"none"},attrs:{href:"placeholderLink:%7B%22component_id%22%3A%22"+t.fieldId+"%22%7D"}},[t._v(" 修改 ")])],t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.slideImage}}):t._e()],2)},Jo=[];class Xo{constructor(t,e,i,o,a){this.headFileData={defaultStyle:this.getDefaultStyle(e,i,o,a),fileImg:this.getFileImg(t)}}isDefaultStyle(t){return 0===t.length||!("FFFFFF"!==t.theme_color&&"ffffff"!==t.theme_color&&"fff"!==t.theme_color&&"FFF"!==t.theme_color||"000"!==t.font_color&&"000000"!==t.font_color)}getFileImg(t){const e=Object(h["u"])(t,"attribute_list.0.file_name.value",""),i=Object(h["u"])(e.split(".").slice(-1),"0");return Object(h["o"])(i)}getDefaultStyle(t,e,i,o){if(!this.isDefaultStyle(i)){const a="000"==i.font_color||"000000"==i.font_color;if(a||o){let s;s=o&&!a?"#"+i.theme_color:e.lowThemeColor,t.preview={color:"#fff",bgColor:s}}else t.title={color:"#fff",opacity:1},t.size={color:"#fff",opacity:.7},t.downLoad={color:"#fff",bgColor:"rgba(255, 255, 255, 0.2)"},t.preview={color:"#"+i.theme_color,bgColor:"#fff"}}return t}}var Ko=Xo;let Zo=class extends r["d"]{constructor(){super(...arguments),this.defaultStyle={title:{color:"#000",opacity:.87},size:{color:"#000",opacity:.3},downLoad:{color:"#000",bgColor:"rgba(255, 255, 255, 1)"},preview:{color:"#fff",bgColor:"#1aad19"}},this.noTitle=!1,this.fileList=this.filterValidFileList(),this.fileMajorName="",this.extension="",this.slideImage=[],this.isOnlyHead=!1,this.canSinglePreview=!1,this.templateComponentId=0,this.templateComponentTitle="",this.fieldId=0}get colorInfo(){return this.$$appStore.codeInfo.codeColorInfo}get isRecordCode(){return this.$$appStore.codeInfo.isRecordCode}get topStyle(){return this.$$appStore.codeData.qrcode_record.top_style}beforeMount(){0===this.$$getValue(this.topStyle,"length")||"#ffffff"===this.$$getValue(this.colorInfo,"themeColor")?this.defaultStyle={title:{color:"#000",opacity:.87},size:{color:"#000",opacity:.3},downLoad:{color:"#617891",bgColor:"rgba(255, 255, 255, 1)"},preview:{color:"#fff",bgColor:"#1aad19"}}:"#000000"===this.$$getValue(this.colorInfo,"foreColor")&&(this.defaultStyle.title={color:"#000",opacity:.87},this.defaultStyle.size={color:"#000",opacity:.3},this.defaultStyle.downLoad={color:this.$$getValue(this.colorInfo,"lowCrtColor"),bgColor:"rgba(255, 255, 255, 1)"},this.defaultStyle.preview={color:"#fff",bgColor:this.$$getValue(this.colorInfo,"lowThemeColor")}),this.headFileDecoder=new Ko(this.fileMsg,this.defaultStyle,this.$$appStore.codeInfo.codeColorInfo,this.$$appStore.codeData.qrcode_record.top_style,this.isCardStyle).headFileData;const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0),t.isCompEmpty&&!t.isOrgDest&&!t.isRecordCode&&this.noTitle&&(this.isOnlyHead=!0);const e=this.$$getValue(this.fileList,"0.file_name.value",""),i=e.lastIndexOf(".")-4<0?0:e.lastIndexOf(".")-4,o=e.slice(0,i),a=e.slice(i,e.length);this.$$getValue(e.split(".").slice(-1),"0","").toLocaleLowerCase();this.canSinglePreview=this.$$getValue(this.fileList,"0.can_preview.value",0),this.extension=a,this.fileMajorName=o;const{id:s,title:r,fieldId:n}=Object(h["t"])(this.fileMsg);this.templateComponentId=s,this.templateComponentTitle=r,this.fieldId=n}filterValidFileList(){const t=this.$$getValue(this.fileMsg,"attribute_list",[])||[];return t.filter(t=>this.$$getValue(t,"file_url.value"))}handleFileItem(){this.canSinglePreview&&this.openFile({fileObj:this.fileList[0]})}isiOS(){const t=navigator.userAgent;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}iOSversion(){const t=navigator.userAgent,e=t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".");return parseInt(e,10)}isWeixinOrQQ(){const t=navigator.userAgent;return t.match(/MicroMessenger\/[0-9]/i)||t.match(/QQ\/[0-9]/i)}ios13WeixinGuide(t){const e=document.getElementsByTagName("html")[0].getAttribute("ver"),i=Et["l"]+"/view-doc/download.html";window.open(`${i}?file=${t}&ver=${e}`)}openSourceFile(t){if(this.isH5){const e=this.$$getValue(t,"file_name.value",""),i=this.$$getValue(e.split(".").slice(-1),"0","").toLocaleLowerCase(),o=this.$$getValue(t,"file_url.value",""),a=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),s=this.$$getValue(this.$$appStore,"oid");if(n["a"].logClick(115,2,`${a}/${s}/${o}`),Object(h["A"])(Et["d"],i))return this.slideImage=[o],void this.$refs.preview.openPreview(parseInt("0",10));this.openFile({fileObj:t,action:"download"})}else this.$$showModal({title:"这是一个外部链接",content:"文件链接已复制，前往浏览器粘贴并打开",confirmText:"我知道了",confirmColor:"#4caf50",success(){this.$$setClipboardData({data:this.$$getValue(t,"file_url.value")})}})}openFile({fileObj:t,action:e}){if(this.isH5){const i=this.$$getValue(this.$$appStore,"codeData.open_readregister");if(1===i)return void this.$emit("fileReadToMina","文件仅支持在微信小程序查看");const o=this.$$getValue(t,"file_name.value",""),a=this.$$getValue(t,"can_download.value",0),s=this.$$getValue(o.split(".").slice(-1),"0","").toLocaleLowerCase(),r=this.$$getValue(t,"file_url.value","");if(Object(h["A"])(Et["d"],s))return this.slideImage=[r],void this.$refs.preview.openPreview(parseInt("0",10));const n=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),c=this.$$getValue(this.$$appStore,"oid");this.$$openDocument({filePath:this.$$getValue(t,"file_url.value"),fileName:o,canDownload:a,coding:n,openId:c,action:e,previewMode:this.$$getValue(t,"file_preview_mode.value",1),filePreviewHideMenu:this.$$getValue(t,"file_preview_hide_menu.value",0),origin:C["s"].CODE_FILE})}else this.$$downloadFile({url:this.$$getValue(t,"file_url.value")}).then(t=>{this.$$openDocument({filePath:t.tempFilePath})})}copyUrl(t){const e=document.querySelector(t);e.select();const i=document.execCommand("copy");i||(e.setSelectionRange(0,e.value.length),e.focus(),document.execCommand("copy"),e.blur()),this.$$showModal({title:"这是一个外部链接",content:"文件链接已复制，前往浏览器粘贴并打开",confirmText:"我知道了",confirmColor:"#4caf50",success(){}})}checkCanDownload(t){return"1"===this.$$getValue(t,"can_download.value","1")}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Zo.prototype,"fileMsg",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Zo.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Zo.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],Zo.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Zo.prototype,"isCardStyle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Zo.prototype,"hasOpenMsg",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],Zo.prototype,"headCmpInfo",void 0),Zo=Object(s["a"])([Object(r["a"])({components:{ImageDif:ye["a"],FileItem:re,Preview:ne["a"]}})],Zo);var ta=Zo,ea=ta,ia=(i("726c"),Object(M["a"])(ea,Yo,Jo,!1,null,"3fa605f6",null)),oa=ia.exports,aa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.noTitle?"noTitle":""},[i("video-module",{attrs:{data:t.videoMsg,remainNum:t.remainNum,isPaidUser:t.isPaidUser,currentFontSize:t.currentFontSize},on:{playCounter:t.playCounter}})],1)},sa=[];let ra=class extends r["d"]{constructor(){super(...arguments),this.canPlay=!0,this.noTitle=!1,this.remainNum=0}beforeMount(){const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0)}async checkCanPlay(){const{data:t}=await n["c"].mediaCanPlay(Object(h["q"])(this.$$appStore.codeData,this.videoMsg,"video"));this.canPlay=!(1!==t.play_available);const e=t.play_maximum_limit-t.play_limit;this.remainNum=e>0?e:0}async playCounter(){this.isPaidUser||this.$$appStore.isTopMode||Object(p["l"])("frompc")||await n["c"].playCounter(Object(h["q"])(this.$$appStore.codeData,this.videoMsg,"video"))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ra.prototype,"videoMsg",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],ra.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],ra.prototype,"currentFontSize",void 0),ra=Object(s["a"])([Object(r["a"])({components:{VideoModule:vt["a"]}})],ra);var na=ra,ca=na,la=(i("0acb"),Object(M["a"])(ca,aa,sa,!1,null,"1cfde788",null)),da=la.exports,pa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.noTitle?"noTitle":""},[i("image-module",{attrs:{data:t.imgMsg,codeColorInfo:t.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,swiperBgColor:t.swiperBgColor,isHeadImg:!0,allImgs:t.allImgs,currentFontSize:t.currentFontSize,headCmpInfo:t.headCmpInfo,isColorExtend:t.isColorExtend}})],1)},ha=[];let ua=class extends r["d"]{constructor(){super(...arguments),this.noTitle=!1}beforeMount(){const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ua.prototype,"imgMsg",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ua.prototype,"codeColorInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ua.prototype,"hasTitle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ua.prototype,"hasRecord",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ua.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"transparent"})],ua.prototype,"swiperBgColor",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],ua.prototype,"allImgs",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],ua.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],ua.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ua.prototype,"isColorExtend",void 0),ua=Object(s["a"])([Object(r["a"])({components:{ImageModule:Ie}})],ua);var ma=ua,ga=ma,_a=(i("7a79"),Object(M["a"])(ga,pa,ha,!1,null,"1fcd4cdb",null)),fa=_a.exports,va=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.noTitle?"noTitle":""},[i("audio-module",{attrs:{audioName:t.audioMsg.attribute_list[0].audio_name.value,audioUrl:t.src,audioSize:t.audioMsg.attribute_list[0].audio_size.value,audioLong:t.audioMsg.attribute_list[0].audio_long.value,headAudio:!0,canPlay:t.canPlay,remainNum:t.remainNum,isPaidUser:t.isPaidUser,data:t.audioMsg,currentFontSize:t.currentFontSize},on:{playCounter:t.playCounter}})],1)},ya=[],ba=i("3154");let wa=class extends r["d"]{constructor(){super(...arguments),this.canPlay=!0,this.noTitle=!1,this.remainNum=0,this.src=""}beforeMount(){const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0),this.src=this.audioMsg.attribute_list[0].audio_url.value,this.$$appStore.isTopMode&&(this.src=this.audioMsg.attribute_list[0].audio_url.value.replace("tcview-nc.clewm.net","tcv-nc.clewm.net"))}mounted(){this.checkCanPlay()}async checkCanPlay(){const{data:t}=await n["c"].mediaCanPlay(Object(h["q"])(this.$$appStore.codeData,this.audioMsg,"audio"));this.canPlay=!(1!==t.play_available);const e=t.play_maximum_limit-t.play_limit;this.remainNum=e>0?e:0}async playCounter(){this.isPaidUser||this.$$appStore.isTopMode||Object(p["l"])("frompc")||await n["c"].playCounter(Object(h["q"])(this.$$appStore.codeData,this.audioMsg,"audio"))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],wa.prototype,"audioMsg",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],wa.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],wa.prototype,"currentFontSize",void 0),wa=Object(s["a"])([Object(r["a"])({components:{AudioModule:ba["a"]}})],wa);var Ca=wa,$a=Ca,Oa=(i("22db"),Object(M["a"])($a,va,ya,!1,null,"04879fde",null)),Sa=Oa.exports;let ja=class extends r["d"]{constructor(){super(...arguments),this.headType="",this.moduleMsg={},this.imageStyle="",this.baseColor="",this.frompc=!!this.$$appStore.h5QueryString.frompc,this.subCodeEdit_frompc=!1}codeDataChange(){this.updateModuleMsg()}qrcodeTopComponentIChange(){this.$$appStore.codePreviewCompCanFresh&&this.updateModuleMsg()}beforeMount(){this.updateModuleMsg();const t=this.$$getValue(this.codeColorInfo,"foreColor");this.baseColor=Object(h["A"])(["#ffffff","#fff"],t)?"#fff":"#333"}updateModuleMsg(){var t;const e=null!==(t=this.qrcodeTopComponentI)&&void 0!==t?t:this.$$getValue(this.codeData,"qrcode_top_component",[]);let i="",o={};for(const a of e)Object(h["A"])(["audio","video","image","file"],a.component_code)&&!Object(h["A"])([1,"1"],a.status)&&(i=a.component_code,o=a);this.headType=i,this.moduleMsg=o,"image"===i&&(this.imageStyle=Object(b["C"])(o,"attribute_list.0.image_style.value","1"))}fileReadToMina(t){this.$emit("fileReadToMina",t)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ja.prototype,"codeData",void 0),Object(s["a"])([Object(r["e"])("codeData")],ja.prototype,"codeDataChange",null),Object(s["a"])([Object(r["c"])({type:Array})],ja.prototype,"qrcodeTopComponentI",void 0),Object(s["a"])([Object(r["e"])("qrcodeTopComponentI")],ja.prototype,"qrcodeTopComponentIChange",null),Object(s["a"])([Object(r["c"])({type:Number,default:0})],ja.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ja.prototype,"codeColorInfo",void 0),Object(s["a"])([Object(r["c"])({type:String})],ja.prototype,"title",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"hasTitle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"hasRecord",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"transparent"})],ja.prototype,"swiperBgColor",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],ja.prototype,"allImgs",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ja.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"showRecordView",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:!1})],ja.prototype,"hasStatusOrTask",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],ja.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],ja.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"isCardStyle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"hasOpenMsg",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ja.prototype,"isColorExtend",void 0),ja=Object(s["a"])([Object(r["a"])({components:{HeadFile:oa,HeadVideo:da,HeadImg:fa,HeadAudio:Sa},computed:{editAuthType(){var t,e;const i=null===(t=this.codeData)||void 0===t||null===(e=t.qrcode_msg)||void 0===e?void 0:e.template_form_auth_info,o=Object(h["h"])(i,t=>{const{data_type:e,privi_type:i}=t;return 3===e&&"record"===i});Object(h["e"])("editAuth",o);const a=null===o||void 0===o?void 0:o.auth_type;return Object(h["e"])("auth_type",a),null!==a&&void 0!==a?a:5}}})],ja);var Ia=ja,Ta=Ia,xa=(i("4538"),Object(M["a"])(Ta,Qo,Go,!1,null,null,null)),ka=xa.exports,Ma=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.status.isOpen&&t.status.shown&&t.haveSubCodeNotary?i("div",{staticClass:"notary",style:{marginTop:t.$$u(t.headCmpInfo.notary.gap.top),marginBottom:t.$$u(t.headCmpInfo.notary.gap.bottom)},on:{click:t.toNotaryDetail}},[t._m(0),i("div",{staticClass:"notary-title"},[t._v("内容已被区块链存证")]),t.notaryData.tx_hash?i("div",{staticClass:"notary-hash"},[t._v(" 存证哈希："+t._s(t.notaryData.tx_hash)+" ")]):i("div",{staticClass:"notary-hash"},[i("div",{staticClass:"placeholder",staticStyle:{"margin-top":"4px"}}),i("div",{staticClass:"placeholder",staticStyle:{"margin-top":"6px"}})]),t.notaryData.tx_hash?i("div",{staticClass:"notary-action"},[i("span",[t._v("查看详情")])]):i("div",{staticClass:"notary-action",staticStyle:{color:"rgba(0, 0, 0, 0.45)"}},[t._v(" 存证信息加载中... ")])]):t._e()},Da=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notary-icon"},[i("img",{attrs:{src:"https://static.clewm.net/cli/images/mina-cli/notary.png"}})])}],Pa=i("a719");const Va=t=>{const e={isOpen:!1,shown:!1,creating:!1,hasCert:!1,needCreateCert:!1};return t?(Object(Pa["a"])(t)||(1===t.status&&(e.isOpen=!0),1===t.card_status&&(e.shown=!0),t.notary_data||(e.creating=!0),Object(g["a"])(t,"notary_data.tx_hash","")||(e.creating=!0),Object(g["a"])(t,"notary_data.cert_url","")&&(e.hasCert=!0),!e.isOpen||e.creating||e.hasCert||(e.needCreateCert=!0)),e):e};let La=class extends r["d"]{constructor(){super(...arguments),this.status={},this.notaryConfig={},this.notaryData={},this.haveSubCodeNotary=!1}mounted(){this.init()}async init(){var t,e;const i=null===(t=this.codeData)||void 0===t||null===(e=t.form_data)||void 0===e?void 0:e.notary_config,o=Va(i);if(this.status=o,o.isOpen&&o.shown){var a,s;const t=await n["c"].getChildQrCodeNotaryData(null===(a=this.codeData)||void 0===a||null===(s=a.qrcode_record)||void 0===s?void 0:s.web_url);this.notaryData=t.data.notary_data,this.haveSubCodeNotary=Object(b["I"])([0,1],this.notaryData.status)}}toNotaryDetail(){this.tip()}tip(){return"notaryToMp"}};Object(s["a"])([Object(r["c"])({type:Object})],La.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],La.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["b"])("tip")],La.prototype,"tip",null),La=Object(s["a"])([r["a"]],La);var Ra=La,qa=Ra,Ea=(i("3359"),Object(M["a"])(qa,Ma,Da,!1,null,null,null)),Fa=Ea.exports,za=i("46c6"),Ba=i("7963");const Ha={fontSize10:"10px",fontSize11:"11px",fontSize12:"12px",fontSize13:"13px",fontSize14:"14px",fontSize15:"15px",fontSize16:"16px",fontSize17:"17px",fontSize18:"18px",fontSize19:"19px",fontSize20:"20px",fontSize22:"22px",fontSize24:"24px"},Aa={fontSize10:"11.2px",fontSize11:"12.4px",fontSize12:"13.5px",fontSize13:"14.6px",fontSize14:"15.8px",fontSize15:"16.9px",fontSize16:"18px",fontSize17:"19.1px",fontSize18:"20.3px",fontSize19:"21.3px",fontSize20:"22.5px",fontSize22:"24.2px",fontSize24:"27px"},Wa={fontSize10:"14px",fontSize11:"15.4px",fontSize12:"16.8px",fontSize13:"18.2px",fontSize14:"19.6px",fontSize15:"21px",fontSize16:"22.4px",fontSize17:"23.8px",fontSize18:"25.2px",fontSize19:"26.6px",fontSize20:"28px",fontSize22:"30.8px",fontSize24:"33.6px"};class Na{static setFontSizeWx(t,e){"1"===e?t.setData({fontSizeMsg:Ha,currentFontSize:"1"}):"2"===e?t.setData({fontSizeMsg:Aa,currentFontSize:"2"}):"3"===e?t.setData({fontSizeMsg:Wa,currentFontSize:"3"}):t.setData({fontSizeMsg:Ha,currentFontSize:"1"})}static setFontSizeH5(t,e){t.currentFontSize="1","1"===e?(t.fontSizeMsg=Ha,t.currentFontSize="1"):"2"===e?(t.fontSizeMsg=Aa,t.currentFontSize="2"):"3"===e?(t.fontSizeMsg=Wa,t.currentFontSize="3"):(t.fontSizeMsg=Ha,t.currentFontSize="1")}}var Ua=Na;const Qa="DIRECT_PREVIEW_FLAG",Ga="VIEW_PAGE_REFERER",Ya={content:"仅支持在微信小程序中操作",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(h["R"])(16)}rem;">请使用微信扫一扫</span>`,showCancel:!1,confirmName:"我知道了",cancelName:"",confirmContent:"",cancelContent:""},Ja=["qFW5cVd","qfDqcST","qWgL6r3","qOB8Yoq","qchVOEz","qTkTg6L","qWgL6r3","qwwVebn","qvrQHgv","qbuh4hS","qBK0n7u","q2AnEO8","qFOgtwT","q1cfzSt","qQEdMdP","qV6v9yd","qgU6a50","qHvhQCf","qeUYLXn"];let Xa=class extends r["d"]{constructor(){super(...arguments),this.bodypt=0,this.name="CodePreview",this.headerBackground="transparent",this.loading=!0,this.minHeight=null,this.noBottomContent=!1,this.frompc=!!this.$$appStore.h5QueryString.frompc,this.subCodeEdit_frompc=!1,this.renderEditBtn="1",this.wxTips="该内容仅支持在微信中打开",this.noRecord=!1,this.token={},this.orgId=void 0,this.prevScanContent=void 0,this.prevScanTip=void 0,this.showExpandBtn=!1,this.showRecordExceptFloat=!1,this.statusList=[],this.recordStatusCount=0,this.tasksList=[],this.calcFakeHeight="$$u(0)",this.DynamicPos=Ba["c"],this.dynamicPos=Ba["c"].Head,this.dynamicStyleCfg=null,this.Operate_Pos=Ba["b"],this.operatePos=Ba["b"].Head,this.isRecordOperateTop=!0,this.isRecordOperateBottom=!1,this.codeData={log_msg:{last_desc:null,data_list:[]}},this.wxConfigReady=!1,this.originalId=void 0,this.commonInfo={codeColorInfo:{},codeHeaderTitleInfo:{}},this.hasTitle=!1,this.hasRecord=!1,this.hasRichText=!1,this.currentFontSize="1",this.allImgs=[],this.swiperBgColor="transparent",this.bottomColor={},this.isH5FromWeixin=!1,this.getOpenTypeLoding=0,this.richShowRecordView=!1,this.overIPhoneX=!1,this.isWechatScanError=!1,this.wechatErrorTipModalConfig={content:"当前微信扫码服务器不稳定，请稍后再试。"},this.isScreenshot=!1,this.oldCompontent=[],this.scanPara=Object(h["a"])({},Ya),this.codeType="qrcode",this.qrcodeCount=0,this.summaryCodeCurPage=1,this.isEnableToMina=!1,this.isEnableSystem=!1,this.isEnableWx=!1,this.hasWxVersion=!1,this.curMoal="",this.appId="",this.slotUrlSchema="",this.slotToMina=!1,this.summaryCodeSort=0,this.summaryCodeSearch="",this.summaryFilter={},this.summaryLoading=!1,this.code40206=!1,this.orgValidParams={},this.isSearching=!1,this.showQiYeWxLoading=!1,this.isEnableQiWxToMina=!1,this.showOpenQiYeWxLoading=!1,this.targetXcxAppId="",this.toMinaFail=!1,this.showGroupInfo=!1,this.codeCheckAuth={},this.isNotSameCompany=!1,this.isWorkWatched=!1,this.gl3View=!1,this.qrcodeComponentI=null,this.codeDataQrcodeCompontentComputed=null,this.qrcodeTopComponentI=null,this.codeHeaderTitleI=null,this.codeHeaderTitleComputed=null,this.isBgImgMode=!1,this.outerContainerStyle="",this.innerContainerStyle="",this.bgImageWrapperStyle="",this.bgImageStyle="",this.smallBgImageStyle="",this.gradientStyle="",this.maskStyle="",this.oldTopStyle=null,this.isColorExtend=!1,this.isDarkBgColor=!1,this.codeTitleFormat={},this.isLowQuality=!1,this.encodedUserId=""}async pwdChanged(){sessionStorage.removeItem(Qa),this.initCode()}async urlChanged(){if(await this.getCodeInfo(),this.$emit("loaded",this.codeData),!this.showQiYeWxLoading)try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0})}})})}catch(t){console.error("获取微信分享配置以及设置微信分享失败"),console.error(t)}this.$$logic.h5(()=>{window.scrollTo(0,0)})}showToMinaTipsChanged(){this.showToMinaTips&&setTimeout(()=>{try{const t=document.getElementsByClassName("union-launch-btn")[0];t.addEventListener("launch",t=>{this.clickTimes(t)}),t.addEventListener("error",t=>{this.clickTimesFail(t.detail)})}catch(t){console.warn(t)}},100)}codeDataChange(){this.$nextTick(this.h5CalcMinHeight)}onLogMsgChange(){const t=Object(b["C"])(this.codeData,"log_msg"),e=Object(Ba["g"])(t),{posType:i}=e;this.dynamicPos=i,this.dynamicStyleCfg=e;const o=Object(Ba["d"])(t);this.operatePos=o;const a=i===Ba["c"].Head||o===Ba["b"].Head,s=i===Ba["c"].Body||o===Ba["b"].BodyBottom;this.isRecordOperateTop=a,this.isRecordOperateBottom=s}onFontSizeChange(){const t=Object(b["C"])(this.codeData,"show_font_size");Ua.setFontSizeH5(this,String(t))}showExpandBtnChange(){this.$nextTick(this.h5CalcMinHeight)}loadingChange(){window.parent.postMessage({value:this.loading,for:"h5PreviewLoading"},"*")}dataChange(){this.originalId&&this.wxConfigReady&&this.addOpenLaunchListener()}bgimageSetChange(){var t,e,i,o,a;const{bgimage_set:s,common_set:r,codeCommonInfo:n}=null!==(t=this.codeData)&&void 0!==t?t:{},{image_url:c,image_attributes:l}=null!==s&&void 0!==s?s:{},d=!!c,p=null===l||void 0===l||null===(e=l.info)||void 0===e?void 0:e[0],u=null===l||void 0===l||null===(i=l.info)||void 0===i?void 0:i[1],m=parseInt(null===l||void 0===l?void 0:l.filesize_byte,10),g=null!==(o=null===n||void 0===n||null===(a=n.codeColorInfo)||void 0===a?void 0:a.themeColor)&&void 0!==o?o:"#fff",_={width:p,height:u,windowWidth:16,color:g,url:c,project:y["h"].MPCLI,size:m,ratio:3},f=Object(h["l"])({..._,position:y["a"].OUTER_CONTAINER}),v=Object(h["l"])({..._,position:y["a"].INNER_CONTAINER}),w=Object(h["l"])({..._,position:y["a"].IMAGE_WRAPPER}),{bgImageStyle:C,smallBgImageStyle:$}=Object(h["l"])({..._,position:y["a"].IMAGE}),O=Object(h["l"])({..._,position:y["a"].GRADIENT}),S=Object(h["l"])({..._,position:y["a"].MASK}),j=Object(b["q"])(r),I=1===j,T=I&&!Object(b["N"])(g);Object(h["a"])(this,{isBgImgMode:d,outerContainerStyle:f,innerContainerStyle:v,bgImageWrapperStyle:w,bgImageStyle:C,smallBgImageStyle:$,gradientStyle:O,maskStyle:S,isColorExtend:I,isDarkBgColor:T})}codeTitleFormatChange(){var t;const{common_set:e}=null!==(t=this.codeData)&&void 0!==t?t:{},i=Object(b["C"])(e,"option_attributes.code_title_format");console.log("coco common",i),Object(h["a"])(this,{codeTitleFormat:i})}bottomColorChange(){this.bottomColor=this.getBottomColor()}createCmpInfo(t){var e,i;const{isBgImgMode:o,codeData:a}=this,{qrcode_compontent:s,operateData:r,statusList:n,tasksList:c,codeCommonInfo:l,state_show_mode:d,qrcode_top_component:p,record_summary_status:u,expand_log:m,qrcode_record:g,form_data:_,soncode_edit_position:f,log_msg:v,qrcode_msg:w}=null!==a&&void 0!==a?a:{},C=this.subCodeEdit_frompc,{tpl_qrcode_status:$}=null!==g&&void 0!==g?g:{},O=null===w||void 0===w?void 0:w.template_form_auth_info,j=Object(b["k"])(O,t=>{const{data_type:e,privi_type:i}=t;return 3===e&&"record"===i}),I=null===j||void 0===j?void 0:j.auth_type,T=C&&3===$&&5!==(null!==I&&void 0!==I?I:5)&&Object(h["A"])([0,3],f),x={project:y["h"].MPCLI,hasDynamicViewAuth:!1,qrcodeCompontent:null!==(e=this.qrcodeComponentI)&&void 0!==e?e:s,operateMsg:r,statusList:n,tasksList:c,preData:l,stateShowMode:d,qrcodeTopComponent:null!==(i=this.qrcodeTopComponentI)&&void 0!==i?i:p,recordSummaryStatus:u,expandLog:m,qrcodeRecord:g,formData:_,isEditor:T,soncodeEditPosition:f,enableEditMode:3===f,recordMsg:v,isBgImgMode:o};return new S({...x,position:t}).getData()}h5CalcMinHeight(){this.isH5&&(this.minHeight=this.isScreenshot?null:Object(p["k"])())}isCliCode(t){t||(t=this.url);const e=t.indexOf("qr61.cn")>-1&&-1===t.indexOf("h.qr61.cn")||t.indexOf("qr46.cn")>-1&&-1===t.indexOf("h.qr46.cn"),i=t.indexOf("qr71.cn")>-1&&-1===t.indexOf("h.qr71.cn"),o=e||i;return o}computedCodeDataQrcodeCompontent(){var t;this.codeDataQrcodeCompontentComputed=Object(h["g"])(null!==(t=this.qrcodeComponentI)&&void 0!==t?t:this.codeData.qrcode_compontent,t=>{const{component_code:e}=null!==t&&void 0!==t?t:{};return!Object(h["A"])(["recordlog","recordview"],e)})}computedCodeHeaderTitleInfoTitle(){var t,e;this.codeHeaderTitleComputed=null!==(t=this.codeHeaderTitleI)&&void 0!==t?t:null===(e=this.commonInfo.codeHeaderTitleInfo)||void 0===e?void 0:e.title}topStyleChange(){var t,e;const i=null===(t=this.codeData)||void 0===t||null===(e=t.qrcode_record)||void 0===e?void 0:e.top_style;i&&!this.oldTopStyle&&(this.oldTopStyle=Object(b["e"])(i))}async setThemeColorByHeadImg(){var t,e,i,o,a,s;const{qrcodeTopComponentI:r,codeData:c,oldTopStyle:l}=this,{qrcode_record:d}=null!==c&&void 0!==c?c:{},{tpl_qrcode_status:p}=null!==d&&void 0!==d?d:{};if(4!==p)return;const u=Object(b["k"])(r,t=>{const{component_code:e,status:i}=null!==t&&void 0!==t?t:{};return"image"===e&&1!==i});Object(h["e"])("headImg",u);const{form_field_id:g,is_empty_component:_}=null!==u&&void 0!==u?u:{},f=(null===u||void 0===u||null===(t=u.attribute_list)||void 0===t||null===(e=t[0])||void 0===e||null===(i=e.auto_set_theme_color)||void 0===i?void 0:i.value)||"0",v=null===u||void 0===u||null===(o=u.attribute_list)||void 0===o||null===(a=o[0])||void 0===a||null===(s=a.image_url)||void 0===s?void 0:s.value;let y;const w=[];if(g&&!_&&v&&"1"===f){var C,$;let t;try{t=await n["c"].getColorFromImg({file_path:v,color_num:8})}catch(j){console.error(j)}const{colors:e}=null!==(C=null===($=t)||void 0===$?void 0:$.data)&&void 0!==C?C:{};Object(h["j"])(e,t=>{var e;const{hex:i}=null!==t&&void 0!==t?t:{};"#"===(null===i||void 0===i||null===(e=i.substr)||void 0===e?void 0:e.call(i,0,1))&&w.push(i.substr(1))}),y=w[0]}let O;var S;y?O={bg_path:"",color_from:2,color_picker_img:v,color_style:null!==(S=null===l||void 0===l?void 0:l.color_style)&&void 0!==S?S:0,font_color:Object(b["N"])(y)?"000":"FFF",img_main_colors:w.join(",").toLocaleUpperCase(),theme_color:y.toLocaleUpperCase()}:O=l;Object(h["a"])(d,{top_style:O}),Object(m["a"])(this.codeData).then(t=>{this.codeData.codeCommonInfo=t,this.codeData={...this.codeData},this.commonInfo=t})}async updateQrcodeComponentI(t){if(t.data&&"updateQrcodeComponentI"===t.data.type){var e,i,o;const{position:a}=this.$$appStore,s=await n["c"].getCodeInfoNew({url:this.url,psw:this.pwd,pos:a,token:this.token,alipay:this.alipay,options:{child_data:t.data.formData,render_default_fields:null!==(e=t.data.render_default_fields)&&void 0!==e?e:1}}),r=null===s||void 0===s||null===(i=s.qrcode_msg)||void 0===i?void 0:i.qrcode_compontent;n["c"].handleTable({qrcodeCompontent:r,isColorExtend:this.isColorExtend}),r&&(this.qrcodeComponentI=r);const c=null===s||void 0===s||null===(o=s.qrcode_msg)||void 0===o?void 0:o.qrcode_top_component;c&&(this.qrcodeTopComponentI=c),this.updateCodeHeaderTitleInfoTitle(s)}}updateCodeHeaderTitleInfoTitle(t){var e;let i=Object(b["e"])(t);try{var o;i={...i,...(null===(o=i)||void 0===o?void 0:o.qrcode_msg)||{}}}catch(s){console.error("error",s)}const{preData:a}=Object(m["b"])(i);this.codeHeaderTitleI=null===a||void 0===a||null===(e=a.codeHeaderTitleInfo)||void 0===e?void 0:e.title}mounted(){window.addEventListener("message",this.updateQrcodeComponentI);const t=this.isCliCode(this.url);this.showQiYeWxLoading=Object(p["r"])()&&Object(p["p"])()&&t,this.isEnableQiWxToMina=Object(p["p"])(),this.overIPhoneX=Object(h["N"])(),this.initCode(),this.$$appStore.h5QueryString.bodypt&&(this.bodypt=this.$$appStore.h5QueryString.bodypt),this.isEnableToMina=Object(p["q"])(),this.isEnableSystem=Object(p["s"])()?Object(p["h"])(Object(p["m"])(),"10.3"):Object(p["h"])(Object(p["g"])(),"5.0"),this.isEnableWx=!!Object(p["v"])()&&Object(p["h"])(Object(p["v"])(),"7.0.12"),this.hasWxVersion=!!Object(p["v"])();const e=Object(p["t"])(window.location.href);e.loadingStatus&&window.parent.postMessage({value:this.loading,for:"h5PreviewLoading"},"*")}beforeDestory(){window.removeEventListener("message",this.updateQrcodeComponentI)}async getWxJsConfig({corpId:t,suiteId:e}){const i=await n["c"].getJsConfig({corpId:t,suiteId:e,url:encodeURIComponent(window.location.href),isAgent:0});return i}async getWorkWxJsConfig({corpId:t,suiteId:e}){const i=await n["c"].getJsConfig({corpId:t,suiteId:e,url:encodeURIComponent(window.location.href),isAgent:1});return i}async getAllJsConfig({corpId:t,suiteId:e}){const i=await this.getWxJsConfig({corpId:t,suiteId:e}),o=await this.getWorkWxJsConfig({corpId:t,suiteId:e});if(1===i.code&&1===o.code){const t=i.data,e=o.data;try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,qiYeConfig:{corpid:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList},callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0}),this.qiYeWeixinAgentConfig(e)}})})}catch(a){console.error("获取微信分享配置以及设置微信分享失败"),console.error(a),this.showQiYeWxLoading=!1}}else this.showQiYeWxLoading=!1}qiYeWeixinAgentConfig(t){wx&&wx.agentConfig&&wx.agentConfig({corpid:t.appId,agentid:t.agentId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList,success:()=>{if(wx&&wx.invoke){let t=this.url;-1===t.indexOf("http://qr")&&-1===t.indexOf("https://qr")&&(t="http://"+this.url),wx.invoke("launchMiniprogram",{appid:this.targetXcxAppId,path:`pages/code/code.html?q=${encodeURIComponent(t)}&codeOrigin=wxWorkScan`},t=>{"launchMiniprogram:ok"===t.err_msg?wx.closeWindow&&setTimeout(()=>{wx.closeWindow()},500):(console.error("企业微信打开小程序错误",t),"31"===this.codeData.code?(this.isNotSameCompany=!0,this.toMinaFail=!0,this.showQiYeWxLoading=!1):this.showQiYeWxLoading=!1)})}},fail:t=>{console.error("企业微信agentConfig错误了",t),"31"===this.codeData.code?(this.isNotSameCompany=!0,this.toMinaFail=!0,this.showQiYeWxLoading=!1):this.showQiYeWxLoading=!1}})}async getAllJsConfigBrowser({corpId:t,suiteId:e}){const i=await this.getWorkWxJsConfig({corpId:t,suiteId:e});if(1===i.code){const t=i.data;try{await this.$$logic.h5(async()=>{await this.$$appStore.setKey({key:"workWxConfigData",value:t}),this.qiYeWeixinAgentConfigBrowser(t)})}catch(o){console.error("获取微信分享配置以及设置微信分享失败"),console.error(o)}}}qiYeWeixinAgentConfigBrowser(t){wx&&wx.agentConfig&&wx.agentConfig({corpid:t.appId,agentid:t.agentId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList,success:()=>{},fail:t=>{console.error("企业微信agentConfig错误了",t)}})}previewLog(){const t=this.$$getValue(this.codeData,"qrcode_record.route_type"),e=navigator.userAgent.toLowerCase(),i=e.indexOf("micromessenger")>-1&&e.indexOf("wxwork")>-1,o=e.match(/QQ\/[0-9]/i);if(2===t&&(o||i)){const t=this.getCoding(this.url);n["a"].logClick(104,i?180027:180028,"",{cvid:(new R["a"]).id,coding:t})}n["a"].logClick(104,146054,"",{cvid:(new R["a"]).id}),this.hasRecord&&n["a"].logClick(104,146055,"",{cvid:(new R["a"]).id})}calcHeight(){const t=this.overIPhoneX||this.$$appStore.h5QueryString.frompc;let e=0;return this.showToMinaTips&&(e+=58),this.showExpandBtn&&(e+=69,this.codeData.hasOpenMsg&&(e-=56)),t&&(e+=30),"height: "+this.$$u(e)}calcMinaBottom(){const t=this.overIPhoneX||this.$$appStore.h5QueryString.frompc;let e=16,i="";return t&&(e+=30),this.showExpandBtn&&(i="box-shadow: none"),`padding-bottom: ${this.$$u(e)};${i}`}onTipClick(){let t="";this.$$appStore.h5QueryString.frompc?t="":this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableSystem?t="toMinaSystemFail":this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableWx?t="toMinaWxFail":this.isEnableToMina&&(t="toMina"),this.tip(t)}showWeixinTipModal(){const t=navigator.userAgent,e=t.match(/MicroMessenger\//i);2===this.$$getValue(this.codeData,"qrcode_record.route_type")&&e?(this.scanPara=Object(h["a"])({},{content:"表单仅支持在微信小程序中填写",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${this.$$px2rem(16)}rem;" >请联系该二维码的制作者将打开方式修改为「小程序」</span>`,showCancel:!0,confirmName:"我知道了",cancelName:"了解详情",confirmContent:"",cancelContent:'<a class="cancel-btn" href="https://h.qr61.cn/o2eikt/qroADBP">了解详情</a>'}),this.isH5FromWeixin=!0):(this.scanPara=Object(h["a"])({},Ya),this.isH5FromWeixin=!1);const i=this.getCoding(this.url);Object(h["A"])(Ja,i)&&(this.scanPara=Object(h["a"])({},Ya,{content:"你可以前往小程序快速体验模板建码、表单填写等功能",tip:`<div><img style="margin-top: ${Object(h["R"])(10)}rem;width: ${Object(h["R"])(100)}rem" src="${Et["l"]}/images/mpcli/minapp.png"><p style="margin-top: ${Object(h["R"])(10)}rem">长按图片保存，微信扫一扫前往小程序</p></div>`,showCancel:!1,confirmName:"",confirmContent:""}))}async initCode(){const t=Object(p["t"])(window.location.href);try{if(Object(b["C"])(t,"url","").indexOf("gl3_view")>-1){this.gl3View=!0;const e=t.url.replace(/gl3_view/,t.c);t.url=e,this.url=e}}catch(a){console.debug("error",a)}this.isScreenshot=t.isScreenshot,t.preview_signature&&(this.token={preview_signature:t.preview_signature,preview_time:t.preview_time}),t.renderEditBtn&&(this.renderEditBtn=t.renderEditBtn),t.wxTips&&(this.wxTips=decodeURIComponent(t.wxTips)),t.frompc&&t.org_id&&(this.orgId=+t.org_id);const e=await this.getCodeInfo();if(429===e)return;const i=Object(b["C"])(e,"org_msg.coding",0);if(this.showQiYeWxLoading){const t=await n["c"].getWxCorpIdByOrgCode({orgCode:i,env:"wxwork"});if(1===t.code){const e=Object(b["C"])(t,"data.corp_id",0),i=Object(b["C"])(t,"data.suite_id",0);this.targetXcxAppId=Object(b["C"])(t,"data.xcx_app_id",""),e?(this.showOpenQiYeWxLoading=!0,this.getAllJsConfig({corpId:e,suiteId:i})):this.showQiYeWxLoading=!1}else this.showQiYeWxLoading=!1}else if(this.$$appStore.h5QueryString.frompc){const t=await n["c"].getWxCorpIdByOrgCode({orgCode:i,env:"wxwork"});if(1===t.code){const e=Object(b["C"])(t,"data.corp_id",0),i=Object(b["C"])(t,"data.suite_id",0);this.targetXcxAppId=Object(b["C"])(t,"data.xcx_app_id",""),e&&this.getAllJsConfigBrowser({corpId:e,suiteId:i})}}if(this.getTargetStateMsg(),this.getRecordEventMsg(),this.getTargetQrcodeTaskMsg(),this.code40206=40206===Object(b["C"])(this.$$appStore.onlycheckedRet,"code"),this.showWeixinTipModal(),"26"===e.code)return void(this.loading=!0);if("31"===e.code)return void this.handleCode31(e);if(this.$emit("loaded",this.codeData),0!==+this.codeData.code)return;if(!this.showQiYeWxLoading)try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0})}})})}catch(s){console.error("获取微信分享配置以及设置微信分享失败"),console.error(s)}this.getOpenTypeLoding=1;const o=async()=>{Object(p["l"])("noBottomContent")&&(this.noBottomContent=!0),Object(p["l"])("noRecord")&&(this.noRecord=!0)};if(this.isScreenshot){let t=0;const e=(t,e)=>new Promise(i=>{setTimeout(()=>{t(),i(!0)},e)});await(()=>{const{oldCompontent:i}=this,o=i.length;return new Promise(async(a,r)=>{try{for(let a=0;a<o;a+=1){const o=i[a],s=parseInt(getComputedStyle(document.querySelector(".__code_module-content")).height,10);if(await e(()=>{s<1304?this.codeData.qrcode_compontent.push(o):t=1},30),t)break}this.getImgs(),a(!0)}catch(s){console.error(s),r(s)}})})()}setTimeout(()=>{this.$$logic.h5(()=>{o(),this.h5CalcMinHeight(),window.$h5CalcMinHeight=this.h5CalcMinHeight.bind(this),window.addEventListener("load",()=>{this.h5CalcMinHeight()})}),this.$emit("loaded",this.codeData),this.showSubCodeEditBtns()})}async handleCode31(t){const e=Object(b["C"])(t,"qrcode_msg.visible_auth_info"),i=this.isSummaryCode?4:1,o=Object(h["g"])(Object(b["C"])(e,"auth_list"),t=>t.data_type===i&&Object(h["A"])([1,13,14,3],t.auth_type)&&"visible"===t.privi_type);if(Object(h["a"])(e,{auth_list:o}),v(e))return this.orgName=Object(b["C"])(t,"org_msg.name","未知企业"),this.isWorkWatched=!0,void(this.showQiYeWxLoading||(this.toMinaFail=!0));try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0})}})})}catch(a){console.error("获取微信分享配置以及设置微信分享失败"),console.error(a)}this.showGroupInfo=!0,this.codeCheckAuth=e}showSubCodeEditBtns(){var t,e,i;const o=this.subCodeEdit_frompc;if(!o)return;const{codeData:a}=this,s=null===a||void 0===a||null===(t=a.qrcode_record)||void 0===t?void 0:t.tpl_qrcode_status;if(Object(h["e"])("tpl_qrcode_status",s),3!==s)return;const r=null===a||void 0===a||null===(e=a.qrcode_msg)||void 0===e?void 0:e.template_form_auth_info,n=Object(b["k"])(r,t=>{const{data_type:e,privi_type:i}=t;return 3===e&&"record"===i});Object(h["e"])("editAuth",n);const c=null===n||void 0===n?void 0:n.auth_type;if(Object(h["e"])("auth_type",c),5===(null!==c&&void 0!==c?c:5))return;const l=null===a||void 0===a?void 0:a.soncode_edit_position;Object(h["e"])("soncodeEditPosition",l);const d=3===l,p=Object(b["z"])({soncodeEditPosition:l,enableEditMode:d});if(!p)return;const{currentFontSize:u}=this;de()("body").addClass("x-showSubCodeEditBtns"),Object(h["e"])("codeData",a);const m=null===a||void 0===a||null===(i=a.qrcode_msg)||void 0===i?void 0:i.form_data;Object(h["e"])("formData",m);const g=Object(h["n"])(m);Object(h["e"])("fieldMap",g);const _=".placeholder-no-edit-nav,.placeholder-no-edit-nav-new",f=".placeholder-edit-nav,.placeholder-edit-nav-new";de()([_,f].join(",")).each((t,e)=>{const i=de()(e),o=Object(b["f"])(i.attr("href")||""),a="placeholderLink:";if(o.substr(0,a.length)===a){const{component_id:t}=Object(b["Y"])(o.substr(a.length),{}),e=g[t];if(null!==e&&void 0!==e&&e.canEdit){const t=i.is(_),o=!1,a=i.closest('section[data-key="previewTable-table-tpl11"]');a.length&&i.wrap('<div class="x-placeholder-btn-wrapper" />');const m=i.closest(".common-title");if(m.length){var s,r,n;const{foreColor:o}=null!==(s=null===(r=this.codeData)||void 0===r||null===(n=r.codeCommonInfo)||void 0===n?void 0:n.codeColorInfo)&&void 0!==s?s:{},a=Object(h["A"])(["#fff","#ffffff"],o);if(a){var c,l,d;const t=null!==(c=null===(l=i[0])||void 0===l||null===(d=l.style)||void 0===d?void 0:d.cssText)&&void 0!==c?c:"";i.css("cssText",t+";color:rgba(255, 255, 255, 0.8)!important;")}if(t){var p;i.wrap('<div class="x-placeholder-field-title-wrapper" />');const t=de()('<span class="x-placeholder-field-title" />');a&&t.css({color:"rgba(255, 255, 255, 0.5)"}),t.text(null!==(p=e.title)&&void 0!==p?p:"").insertBefore(i)}else m.children().add(i).css({verticalAlign:"middle"})}let g;g=o&&t?e.desc||"请填写":t?"请填写":"修改",i.addClass("font-size-12-"+u).text(g).show()}}});const v=".placeholderWrapper";de()(v).each((t,e)=>{const i=de()(e),o=i.attr("data-template-component-id"),a=g[o];null!==a&&void 0!==a&&a.canEdit?i.find(".placeholderName").text(a.desc||"上传"+a.title):i.hide()}),de()([_,f,v].join(",")).on("click",t=>(this.showSubCodeEditTip(),!1))}getImgs(){var t;const{codeData:e}=this,i=this.$$getValue(e,"qrcode_compontent",[]),o=null!==(t=this.qrcodeTopComponentI)&&void 0!==t?t:this.$$getValue(e,"qrcode_top_component",[]);let a=[];Object(h["j"])(o,t=>{"image"===t.component_code&&(a=a.concat(t.attribute_list.filter(t=>t.image_url.value)))}),Object(h["j"])(i,t=>{"image"===t.component_code&&(a=a.concat(t.attribute_list.filter(t=>t.image_url.value))),"batchImage"===t.component_code&&(a=a.concat(this.$$getValue(t,"attribute_list.0.image_url.value",[]).filter(t=>t.value&&t.value.value)))}),window.__allImgs=a,this.listenImgs()}listenImgs(){const t=()=>{const t=document.createElement("div");t.innerHTML='<div id="loadedImgs"></div>',document.body.appendChild(t)};let e=setInterval(()=>{const{__allImgs:i}=window,o=window.__loadedImgs||[];i.length===o.length&&(t(),window.clearInterval(e),e=null)},300),i=setTimeout(()=>{e&&(t(),window.clearInterval(e)),window.clearTimeout(i),i=null},1e3)}getCoding(t){let e=t;return e||(e=""),e&&e.indexOf("://")>-1&&([,e]=e.split("://")),e&&([,,e]=e.split("/")),e||""}getOrgCode(t){let e="";if(!t)return"";if(t.indexOf("wxa.cli.im")>-1){const[,i]=t.split("C_");[e]=i.split("/")}else t.indexOf("http://qr")>-1||t.indexOf("https://qr")>-1?[,,,e]=t.split("/"):t.indexOf("qr")>-1&&([,e]=t.split("/"));return e}onSummaryCodeSearch({value:t}){this.summaryCodeSearch=t,this.getCodeInfo(),this.$emit("loaded",this.codeData)}onSummaryCodeSort({id:t}){this.summaryCodeSort=0===t?"0":t,this.getCodeInfo(),this.$emit("loaded",this.codeData)}changeCategoryType(t){this.categoryType=t}setIsSearching(t){this.isSearching=t}async getCodeInfo(){const{position:t}=this.$$appStore;let e,i;if(e=this.$$appStore.onlycheckedRet?this.$$appStore.onlycheckedRet:await n["c"].onlychecked(this.getCoding(this.url),this.getOrgCode(this.url)),429===e){const t=Object(p["t"])(window.location.href);return this.$$go("/pages/shunt-info/main",t),e}if(288===e.code)return e.code="288",this.codeData=e,e;if(40206===e.code&&(await this.$$appStore.setKey({key:"getQrcodePropertiesLimit",value:!0}),await this.$$appStore.setKey({key:"onlycheckedRet",value:e})),this.codeType=Object(b["p"])(this.url),"summary"===this.codeType){const e={};this.summaryCodeSearch&&(e.list_name=this.summaryCodeSearch),this.summaryCodeSort&&(e.sort=Number(this.summaryCodeSort)),this.summaryFilter=e,this.summaryLoading=!0,i=await n["c"].getSyCodeInfoAll(this.url,this.pwd,t,this.token,this.orgId,e),this.orgValidParams=Object(b["C"])(i,"org_msg.org_valid_params",{});const o=this.$$getValue(this,"$$appStore.h5QueryString.fromRedirect");if(!this.categoryType||!o){const t=this.isSummaryCode?2:0,e=+Object(b["C"])(i,"show_style.property_value",t);let o="normal";0===e?o="normal":1===e?o="card":2===e&&(o="normal_new"),this.categoryType=o}this.summaryCodeCurPage=1}else{var o,a,s,r;if(i=await n["c"].getCodeInfoAll(this.url,this.pwd,t,this.token,this.orgId,this.alipay,this.renderEditBtn),Object(b["D"])(this.$$appStore.h5QueryString,"isLowQuality"))await this.$$appStore.setKey({key:"isLowQuality",value:"true"===this.$$appStore.h5QueryString.islowquality});else await this.$$appStore.setKey({key:"isLowQuality",value:null!==(o=null===(a=i)||void 0===a?void 0:a.low_quality)&&void 0!==o?o:0}),await this.$$appStore.setKey({key:"encodedUserId",value:null!==(s=null===(r=i)||void 0===r?void 0:r.encoded_user_id)&&void 0!==s?s:""})}let c=!1;const l=this.$$getValue(i,"qrcode_record"),d=this.$$getValue(i,"qrcode_count"),u=this.$$getValue(i,"qrcode_top_component",[]),m=this.$$getValue(l,"tpl_qrcode_status"),g=this.$$getValue(l,"name_rule"),_=this.$$getValue(g,"show_status"),f=this.$$getValue(l,"log_status"),v=Object(h["A"])([2,"2"],m);c=v&&g?Object(h["A"])([1,"1"],_)&&!!this.$$getValue(l,"list_name"):Object(h["U"])(u,t=>{const{component_code:e,status:i}=t,o=this.$$getValue(t,"attribute_list.0.content_html.value","");return"text"===e&&1!==i&&o}),this.hasTitle=c;const C=Object(h["A"])([1,"1"],f);this.hasRecord=C,this.qrcodeCount=d;let $=!1;const O=this.$$getValue(i,"qrcode_compontent",[]),S=O.filter(t=>!Object(h["A"])(["recordlog","recordview"],t.component_code)),j=!!S.length;O&&Object(h["j"])(O,t=>{const e="recordview"===t.component_code&&0===t.status;$&&e?t.status=3:e&&($=!0)}),this.isSummaryCode&&(this.summaryCodeSort=this.$$getValue(O,"0.page_msg.sort_value",0),this.summaryLoading=!1),this.richShowRecordView=$,this.hasRichText=j;const I=this.$$getValue(i,"qrcode_record.top_style"),T=this.$$getValue(I,"theme_color",""),x=this.$$getValue(I,"font_color",""),k=1===this.$$getValue(I,"color_style",0);let M="transparent";Object(h["j"])(u,t=>{const{component_code:e,status:o}=t;if(1===o)return!0;if("image"===e){const e=this.$$getValue(t,"attribute_list.0"),o=this.$$getValue(e,"prew_type.value",y["g"].TILE);if(o===y["g"].SWIPER){var a;const t=this.$$getValue(e,"image_style.value",y["e"].IMAGE_STYLE_1),o=Object(b["q"])(null===(a=i)||void 0===a?void 0:a.common_set),s=1===o,{bgUseThemeColor:r}=w["a"].getSwiperDotColors({themeColor:T,textColor:x,project:y["h"].MPCLI,position:y["f"].TOP_MODULE,imageStyle:t,hasTitle:c,hasRecord:C,hasRichText:j,isGradient:k,isColorExtend:s});r||(M="#fff")}return!1}return!0}),this.swiperBgColor=M;try{if("26"===i.code)return this.loading=!0,i}catch(D){return i}return this.codeData=i,this.isScreenshot&&(this.oldCompontent=this.codeData.qrcode_compontent,this.codeData.qrcode_compontent=[]),this.allImgs=this.getAllImgs(i),this.commonInfo=i.codeCommonInfo||this.commonInfo,this.loading=!1,this.bottomColor=this.getBottomColor(),this.showExpandBtn=this.commonInfo.isRecordCode&&this.commonInfo.hasOpenRecordLog&&2===this.codeData.log_msg.expand_log,this.showRecordExceptFloat=!this.noRecord&&this.commonInfo.isRecordCode&&(this.commonInfo.hasOpenRecordView&&!$||this.commonInfo.hasOpenRecordLog&&2!==this.$$getValue(this.codeData,"log_msg.expand_log"))&&(!!this.$$getValue(this.codeData,"log_msg.data_list.length")||!!this.$$getValue(this.codeData,"log_msg.last_desc.add_time")),this.$$logic.h5(async()=>{if(!Object(p["l"])("noScanCount")&&this.$$getValue(i,"qrcode_record.coding",!1)&&(4===m||this.gl3View||n["a"].scan(i)),this.directPreviewTest(i))return;window.location.href===sessionStorage.getItem(Ga)&&sessionStorage.removeItem(Qa);const t=await n["c"].getTargetXcxOriginalId(this.url);this.originalId=this.$$getValue(t,"data.original_id",""),this.appId=this.$$getValue(t,"data.app_id",""),this.previewLog()}),t&&t.lat&&this.$emit("loaded",this.codeData),i}directPreviewTest(t){const e=this.$$getValue(t,"direct_preview_file_url",""),i=this.$$getValue(t,"open_readregister","");if(!e||i)return;const o=this.$$getValue(t,"qrcode_component",[]);if(o.length)return;const a=Object(h["g"])(this.$$getValue(t,"qrcode_top_component",[]),t=>"file"===t.component_code),s=a.reduce((t,e)=>(t.push(...e.attribute_list),t),[]);if(s.length>1)return;if(sessionStorage.getItem(Qa))return;sessionStorage.setItem(Qa,"1"),sessionStorage.setItem(Ga,document.referrer);const{file_name:r,can_download:n,file_preview_mode:c,file_preview_hide_menu:l}=s[0],d=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),p=this.$$getValue(this.$$appStore,"oid");return this.$$openDocument({filePath:e,fileName:r.value||"文件",canDownload:n.value,coding:d,openId:p,previewMode:(null===c||void 0===c?void 0:c.value)||1,filePreviewHideMenu:(null===l||void 0===l?void 0:l.value)||0,origin:C["s"].CODE_FILE}),!0}async getUrlSchema(t){const e=this.url,i="/pages/code/code";let o="q="+e;"bottomBtn"===t&&(o+="&fromH5ExpandBtn=1"),"number"===typeof t&&(o=`${o}&fromH5ListTplId=${t}`),"recordCheck"===t&&(o+="&fromH5RecordCheck=1"),"addFav"===t&&(o+="&fromH5AddFavorite=1"),"fromH5CheckMyRecord"===t&&(o+="&fromH5CheckMyRecord=1"),"toRecordHistory"===t&&(o+="&fromH5toRecordHistory=1");const a=`${i}?${o}`;let s="";const r=this.getOrgCode(this.url),c=await n["c"].getUrlSchema(i,o,this.appId,r);if(s=await this.getLocalUrlSchema(c),s)return s;const l=this.setUrlSchemaStorage(c,a);return l}getLocalUrlSchema(t){var e;const{fetchUrl:i}=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.wx_url_scheme)||{};return new Promise((t,e)=>{try{t(Object(u["a"])(i).then(t=>{var e;const i=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.urlScheme;return i}))}catch(o){e()}})}setUrlSchemaStorage(t,e){if(1===this.$$getValue(t,"code",0)){const i=this.$$getValue(t,"data",{});i.openlink&&(i.urlSchema=e);const o=JSON.parse(localStorage.getItem("H5URLTOMINA"))||[];return o.length>=50&&o.splice(0,1),o.push(i),localStorage.setItem("H5URLTOMINA",JSON.stringify(o)),this.$$getValue(t,"data",{}).openlink}return null}doFav(){const t=this.$$getValue(this.$$appStore.codeData,"qrcode_record.coding",""),e=this.$$getValue(this.$$appStore.codeData,"qrcode_record.web_url","");this.$$appStore.setKey({key:"isCollect",value:!0});const i="wx74e11b8ce3ec48e5",o="im",a=`${Object(za["a"])().cliUrl}/wx_collect.html?coding=${t}&type=nccode&web_url=${e}&app_id=${i}`,s="https://open.weixin.qq.com/connect/oauth2/authorize?",r=`${s}appid=${i}&redirect_uri=http%3a%2f%2fwechat.cli.im%2fwx-api-${o}%2foauth%2fopenid%3fredirect_uri%3d${encodeURIComponent(encodeURIComponent(a))}%26appid%3d${i}&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect`;window.location.href=r}toOtherMina(t,e,i){Object(h["a"])(this.scanPara,{content:t,tip:"",showCancel:!0,cancelName:"取消",noConfirmBtn:!0,cancelContent:'<span class="cancel-btn">取消</span>',confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n          <span style="color:#4caf50;">前往小程序</span>\n          <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n            <wx-open-launch-weapp\n              data-type="inModalToOtherMina"\n              class="launch-btn"\n              style="display:block;width:100%;height:100%;"\n              username="${e}"\n              path="${i}"\n            >\n              <template>\n                <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n              </template>\n            </wx-open-launch-weapp>\n          </div>\n        </div>`});const o=()=>{setTimeout(()=>{this.addOpenLaunchListener()},20)};this.curMoal="",this.$refs.modal.showModal(o)}toCliMina(t,e,i){const o=()=>{};Object(h["a"])(this.scanPara,{content:t,tip:"",showCancel:!0,cancelName:"取消",confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n          <span style="color:#4caf50;">前往小程序</span>\n          <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n            <wx-open-launch-weapp\n              data-type="inModalToCliMina"\n              class="launch-btn"\n              style="display:block;width:100%;height:100%;"\n              username="${this.originalId}"\n              path="/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}${1===e?"&fromH5RecordCheck=1":"&fromH5ListTplId="+i}"\n            >\n              <template>\n                <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n              </template>\n            </wx-open-launch-weapp>\n          </div>\n        </div>`}),this.curMoal="",this.$refs.modal.showModal(o)}onFileReadToMina(t){const e=()=>{};this.getUrlSchema().then(i=>{this.slotUrlSchema=i,Object(h["a"])(this.scanPara,{content:t,tip:"",showCancel:!0,cancelName:"取消",cancelContent:'<span class="cancel-btn">取消</span>',slotContent:!0,type:"",slotPath:""}),this.curMoal="",this.$refs.modal.showModal(e)})}addRecordTipsToMina(t,e){const i=()=>{};let o="",a="",s="";"recordCheck"===t?(o="数据汇总仅支持在微信小程序查看",a="是否跳转至小程序"):Object(h["A"])(["bottomBtn","normal"],t)||"number"===typeof t?(o="仅支持在微信小程序中操作",a="是否跳转至小程序"):"fromH5CheckMyRecord"===t?(o="我填写的表单数据仅支持在微信小程序查看",a="是否跳转至小程序"):"addFav"===t?(o="二维码仅支持在微信小程序中收藏",a="是否跳转至小程序"):"toRecordHistory"===t?(o="待处理仅支持在微信小程序中查看",a="是否跳转至小程序"):"notaryToMp"===t&&(o="存证详情仅支持在微信小程序中查看",a="是否跳转至小程序"),e?this.slotUrlSchema=e:"recordCheck"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5RecordCheck=1`:"bottomBtn"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5ExpandBtn=1`:"normal"===t?s="/pages/code/code.html?q="+this.$$appStore.h5QueryString.url:"number"===typeof t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5ListTplId=${t}`:"fromH5CheckMyRecord"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5CheckMyRecord=1`:"addFav"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&&fromH5AddFavorite=1`:"toRecordHistory"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&&fromH5toRecordHistory=1`:"notaryToMp"===t&&(s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&&fromH5SubCodeToNotaryDetail=1`),e||(this.slotToMina=!0),Object(h["a"])(this.scanPara,{content:o,tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(h["R"])(16)}rem;">${a}</span>`,showCancel:!0,cancelName:"取消",cancelContent:'<span class="cancel-btn">取消</span>',slotContent:!0,type:t,slotPath:s}),this.curMoal="",this.$refs.modal.showModal(i)}async tip(t,e){this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableSystem?t="toMinaSystemFail":this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableWx&&(t="toMinaWxFail");const i=[" qq","mqqbrowser","huaweibrowser","safari","miuibrowser","wxwork"];let o=!1;if(Object(h["j"])(i,t=>{navigator.userAgent.toLowerCase().indexOf(t)>-1&&(o=!0)}),"notaryToMp"===t&&(e="notaryToMp"),o=o&&!this.alipay,e&&o&&b["O"]&&!Object(p["l"])("frompc")&&!Object(h["A"])(["toMinaSystemFail","toMinaWxFail"],t)&&!this.isEnableToMina){let t="";if(t=await this.getUrlSchema(e),t)return void this.addRecordTipsToMina(e,t)}if(this.isEnableToMina&&!Object(h["A"])(["toMinaSystemFail","toMinaWxFail"],t))return void this.addRecordTipsToMina(e);let a=()=>{};if(t)if(this.curMoal=t,this.prevScanContent=this.scanPara.content,this.prevScanTip=this.scanPara.tip,"addFavorite"===t)Object(h["a"])(this.scanPara,{content:"微信扫码即可收藏",tip:"其他App扫码暂不支持收藏"});else if("showHistoryTip"===t){const t=this.$$getValue(this.codeData,"qrcode_record.route_type");if(2===t)Object(h["a"])(this.scanPara,{content:"二维码制作者设置的打开方式不支持查看数据汇总。如需查看，请通知制作者修改打开方式为「小程序」。",tip:""});else{const t=this.$$appStore.h5QueryString.frompc;Object(h["a"])(this.scanPara,{content:t?"数据汇总已设置加密":"当前仅支持微信扫码查看",tip:t?"请在手机端用微信扫码后，输入密码查看":"数据汇总有查看权限，需要微信授权"})}}else"adminEntry"===t?this.isEnableToMina?(Object(h["a"])(this.scanPara,{content:"仅支持在小程序中管理前往小程序并验证管理权限",tip:"",showCancel:!0,cancelName:"我知道了",cancelContent:'<a class="cancel-btn">我知道了</a>',confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n                <span style="color:#4caf50;">前往小程序</span>\n                <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n                  <wx-open-launch-weapp\n                    data-type="adminEntry"\n                    class="launch-btn"\n                    style="display:block;width:100%;height:100%;"\n                    username="${this.originalId}"\n                    path="/subPackages/Analysis/pages/AdminEntry/index.html?qrcode_id=${this.$$getValue(this.codeData,"qrcode_record.id")}&coding=${this.$$getValue(this.codeData,"qrcode_record.coding")}&user_id=${this.$$getValue(this.codeData,"qrcode_record.user_id")}&org_id=${this.$$getValue(this.codeData,"org_msg.id")}"\n                  >\n                    <template>\n                      <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n                    </template>\n                  </wx-open-launch-weapp>\n                </div>\n              </div>`}),a=()=>{this.addOpenLaunchListener()}):Object(h["a"])(this.scanPara,{content:"微信扫码即可管理二维码",tip:"其他App扫码暂不支持管理"}):"toMinaSystemFail"===t?(n["a"].logClick(104,146060,"",{cvid:(new R["a"]).id}),Object(h["a"])(this.scanPara,{content:"当前系统版本过低",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(h["R"])(14)}rem;">不支持跳转小程序，建议升级系统版本</span>`})):"toMinaWxFail"===t?(n["a"].logClick(104,146061,"",{cvid:(new R["a"]).id}),Object(h["a"])(this.scanPara,{content:"当前微信版本过低",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(h["R"])(14)}rem;">不支持跳转小程序，建议升级微信版本</span>`})):"errorLink"===t?Object(h["a"])(this.scanPara,{content:"链接错误",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(h["R"])(14)}rem;"></span>`,showCancel:!1,confirmName:"我知道了"}):"otherMinaNotWx"===t?Object(h["a"])(this.scanPara,{content:"该链接内容仅支持在微信中打开",tip:"请使用微信扫一扫",cancelName:"我知道了",cancelContent:'<a class="cancel-btn">我知道了</a>'}):"recordCheck"===t?Object(h["a"])(this.scanPara,{content:"数据汇总仅支持在微信小程序查看",tip:"请使用微信扫一扫",cancelName:"我知道了",cancelContent:'<a class="cancel-btn">我知道了</a>'}):"toRecordHistory"===t&&(this.isEnableToMina?Object(h["a"])(this.scanPara,{content:"是否跳转至小程序",tip:"",showCancel:!0,cancelName:"取消",confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n                <span style="color:#4caf50;">前往小程序</span>\n                <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n                  <wx-open-launch-weapp\n                    data-type="recordHistory"\n                    class="launch-btn"\n                    style="display:block;width:100%;height:100%;"\n                    username="${this.originalId}"\n                    path="/subPackages/codeRecord/pages/recordPipelineHistory/index.html?codeId=${this.$$getValue(this.codeData,"qrcode_record.id")}&org_id=${this.$$getValue(this.codeData,"org_msg.id")}&orgCode=${this.$$getValue(this.codeData,"org_msg.coding")}&formAuth=0&noPower=count_last_desc&formCount=0&showOwner=0&processStatus=1"\n                  >\n                    <template>\n                      <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n                    </template>\n                  </wx-open-launch-weapp>\n                </div>\n              </div>`}):Object(h["a"])(this.scanPara,{content:"微信扫码即可查看",tip:"其他App扫码暂不支持查看"}));else Object(h["a"])(this.scanPara,{content:"仅支持在微信小程序中操作",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(h["R"])(16)}rem;">请使用微信扫一扫</span>`,cancelName:"取消",cancelContent:'<a class="cancel-btn">取消</a>',confirmName:"我知道了"});this.curMoal="",this.$refs.modal.showModal(a)}showTip(){this.tip("toRecordHistory","toRecordHistory")}showSubCodeEditTip(){this.$refs.tipModal.showModal()}onModalHide(){null!=this.prevScanContent&&(this.scanPara.content=this.prevScanContent,this.prevScanContent=void 0),null!=this.prevScanTip&&(this.scanPara.tip=this.prevScanTip,this.prevScanTip=void 0),"toMina"===this.curMoal&&n["a"].logClick(104,146059,"",{cvid:(new R["a"]).id})}getAllImgs(t){let e=[];const{pixelRatio:i,windowWidth:o}=this.$$getSystemInfo(),a=t=>{const a=new w["a"]({data:{attribute_list:t.attribute_list},project:y["h"].MPCLI,dpr:i,windowWidth:o,imageStyle1Margin:16,isLowQuality:this.$$appStore.isLowQuality,encodedUserId:this.$$appStore.encodedUserId}),s=[];Object(h["L"])(a.images,t=>s.push(t.computedPreviewUrl)),e=e.concat(s)};return Object(h["j"])(t.qrcode_top_component,t=>{"image"===t.component_code&&a(t)}),Object(h["j"])(t.qrcode_compontent,t=>{if("image"===t.component_code&&a(t),"batchImage"===t.component_code&&t.attribute_list[0]&&t.attribute_list[0].image_url){const i=this.$$getValue(t.attribute_list[0],"image_url.value",[]),o=w["a"].getComputedUrl({data:i,windowWidth:this.$$getSystemInfo().computedWindowWidth,type:0});e=e.concat(o)}}),e}isTopImg(){var t;let e=!1;const i=null!==(t=this.qrcodeTopComponentI)&&void 0!==t?t:this.$$getValue(this.codeData,"qrcode_top_component",[]);return i instanceof Array&&i.forEach(t=>{if("image"===this.$$getValue(t,"component_code")){const s=this.$$getValue(t,"attribute_list",[]).filter(t=>this.$$getValue(t,"image_url.value")),r=this.$$getValue(s,"0.image_style.value","1");if("3"===r){var i,o,a;const s=3===(null===(i=this.codeData)||void 0===i||null===(o=i.qrcode_record)||void 0===o?void 0:o.tpl_qrcode_status),r=null!==(a=t.is_empty_component)&&void 0!==a&&a;s&&r||(e=!0)}}}),e}getBGColor(){return"summary"===this.codeType?"#ededed":this.commonInfo.isCompEmpty?"pure"===this.commonInfo.codeColorInfo.type?this.commonInfo.codeColorInfo.themeColor:this.$$getValue(this.commonInfo,"codeColorInfo.gradient.gradientCSS"):"white"}needFlexCenter(){var t;const e=this.$$getValue(this.commonInfo,"isCompEmpty");if(!e||this.statusList.length)return!1;const i=null!==(t=this.qrcodeTopComponentI)&&void 0!==t?t:this.$$getValue(this.codeData,"qrcode_top_component");let o=!1;const a=[];return i instanceof Array&&i.forEach(t=>{const e=this.$$getValue(t,"component_code");Object(h["A"])(["text","recordlog","recordview"],e)||a.push(t)}),o=!this.showRecordExceptFloat&&this.onlySingleCenterComp(a),o}onlySingleCenterComp(t){let e=!0;if(t.length>1)e=!1;else if(1===t.length){const i=t[0];if(Object(h["A"])(["file","audio"],this.$$getValue(i,"component_code")))this.$$getValue(i,"attribute_list.length")>1&&(e=!0);else{if("image"===this.$$getValue(i,"component_code")&&1===this.$$getValue(i,"attribute_list.length")&&"3"!==this.$$getValue(i,"attribute_list.0.image_style.value"))return!0;if("image"===this.$$getValue(i,"component_code")&&"0"===this.$$getValue(i,"attribute_list.0.prew_type.value")&&"3"!==this.$$getValue(i,"attribute_list.0.image_style.value"))return!0;e=!1}}return e}getBottomColor(){var t,e;const i={},o=this.$$getValue(this.codeData,"codeCommonInfo",{});return i.isLight=Object(h["A"])(["#000","#000000"],this.$$getValue(o,"codeColorInfo.foreColor")),console.log("showMsgList",null===(t=this.codeData)||void 0===t?void 0:t.hasOpenMsg),null!==(e=this.codeData)&&void 0!==e&&e.hasOpenMsg?{isLight:!0,defaultColor:"rgba(0, 0, 0, 0.32);",borderColor:"rgba(120, 130, 140, 0.13);",textColor:"#617891;"}:!o.isCompEmpty&&!this.isColorExtend||!o.codeColorInfo.themeColor||Object(h["A"])(["#fff","#ffffff","#f4f4f4"],o.codeColorInfo.themeColor.toLowerCase())?(this.$$appStore.h5QueryString.frompc?(i.defaultColor="rgba(0, 0, 0, 0.32)",i.textColor="#166bc7"):(i.defaultColor="rgba(0, 0, 0, 0.32)",i.textColor="#617891"),i.isLight=!0,i):Object(h["A"])(["#fff","#ffffff"],o.codeColorInfo.foreColor)?(i.defaultColor="rgba(255, 255, 255, 0.5)",i.borderColor="rgba(120, 130, 140, 0.13)",i.textColor="#fff",i):Object(h["A"])(["#000","#000000"],o.codeColorInfo.foreColor)?(i.defaultColor="rgba(0, 0, 0, 0.3)",i.borderColor="rgba(120, 130, 140, 0.13)",i.textColor="rgba(0, 0, 0, 0.5)",i):(this.$$appStore.h5QueryString.frompc?(i.defaultColor="rgba(0, 0, 0, 0.32)",i.textColor="#166bc7"):(i.defaultColor="rgba(0, 0, 0, 0.32)",i.textColor="#617891"),i.borderColor="rgba(120, 130, 140, 0.13);",i)}asyncRenderManual(t){const{isSummaryCode:e,codeData:i}=this;let o=1;e&&(o=this.$$getValue(t,"0.page_msg.current_page",1)),this.summaryCodeCurPage=o,Object(h["C"])(this.$$getValue(i,"qrcode_compontent"))&&Object(h["C"])(t)&&(this.codeData.qrcode_compontent=i.qrcode_compontent.concat(t))}get isSummaryCode(){return"summary"===this.codeType}isWechatScanErrorr(){const t=Number(this.$$getValue(this.codeData,"qrcode_record.route_type",1));Object(h["K"])()&&2!==t&&(this.$refs.wechatErrorTipModal.showModal(),this.isWechatScanError=!0)}addOpenLaunchListener(){const t=document.getElementsByClassName("launch-btn"),e=this;Object(h["j"])(t,t=>{const{dataset:{type:i}}=t;if("topRecordHistory"===i||"goRecordFormPage"===i)return;let o=0;const a={cvid:(new R["a"]).id};"goFormListPage"===i||"goRecordFormPage"===i?(o=146056,a.expandLog="goFormListPage"===i?2:0):"inModalToMina"===i?o=146058:"topToMina"===i?o=146062:"topRecordHistory"===i?o=146063:"myRecordHistory"===i&&(o=146064),t.addEventListener("launch",()=>{n["a"].logClick(104,o,"",a)}),t.addEventListener("error",t=>{try{a.errMsg=JSON.stringify(t.detail),n["a"].logClick(104,o,"",a),"inModalToOtherMina"!==i&&"ToOtherMina"!==i||(e.$refs.modal.hideModal(),e.$$toast("小程序跳转失败，请联系二维码制作者检查设置",5e3,!1,"65%"))}catch(s){console.log(s)}})})}clickTimes(t){const{codeData:e}=this,i=Object(b["C"])(e,"qrcode_record.coding"),o=Object(b["C"])(e,"org_msg.user_id");n["a"].logClick(104,118154,"",{openid:(new R["a"]).id,coding:i,userId:o,message:JSON.stringify(t)})}clickTimesFail(t){const{codeData:e}=this,i=Object(b["C"])(e,"qrcode_record.coding"),o=Object(b["C"])(e,"org_msg.user_id");n["a"].logClick(104,118155,"",{openid:(new R["a"]).id,coding:i,userId:o,error:JSON.stringify(t)})}async getTargetStateMsg(){const{url:t,codeData:e}=this,i=await n["c"].getTargetStateMsg(t);if(1===Object(b["C"])(i,"code")){const t=Object(b["C"])(e,"qrcode_record.id");if(this.$$getValue(i,`data.${t}.length`)){const e=Object(b["C"])(i,"data."+t,[]),o=e.filter(t=>{t.formatUpdateTime=b["bb"].handleRecordTime(t.ass_update_time);const e=Object(b["C"])(t,"state_change_log.0.from_target_msg",null);return t.tplType7State=e?b["bb"].getTplType7State(e):null,(Object(b["C"])(t,"id")||1===t.is_default)&&Object(b["C"])(t,"state_name")});this.statusList=o,this.codeData=Object(h["a"])({},this.codeData,{statusList:o}),await this.$$appStore.setKey({key:"codeStatus",value:o})}}}async getRecordEventMsg(){const{url:t}=this,e=await n["c"].getRecordEventMsg(t);1===Object(b["C"])(e,"code")&&(this.recordStatusCount=Object(b["C"])(e,"data.count")||0)}async getTargetQrcodeTaskMsg(){const{url:t}=this,e=await n["c"].getTargetQrcodeTaskMsg(t);1===Object(b["C"])(e,"code")&&(this.tasksList=Object(b["C"])(e,"data",[]),this.codeData=Object(h["a"])({},this.codeData,{tasksList:Object(b["C"])(e,"data",[])}))}};Object(s["a"])([Object(r["c"])({type:String,default:""})],Xa.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Xa.prototype,"needShow",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Xa.prototype,"pwd",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Xa.prototype,"validInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Xa.prototype,"alipay",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Xa.prototype,"showToMinaTips",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"normal"})],Xa.prototype,"categoryType",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"未知企业"})],Xa.prototype,"orgName",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"0"})],Xa.prototype,"errorCode",void 0),Object(s["a"])([Object(r["e"])("pwd")],Xa.prototype,"pwdChanged",null),Object(s["a"])([Object(r["e"])("url")],Xa.prototype,"urlChanged",null),Object(s["a"])([Object(r["e"])("showToMinaTips")],Xa.prototype,"showToMinaTipsChanged",null),Object(s["a"])([Object(r["e"])("codeData.code")],Xa.prototype,"codeDataChange",null),Object(s["a"])([Object(r["e"])("codeData.log_msg")],Xa.prototype,"onLogMsgChange",null),Object(s["a"])([Object(r["e"])("codeData.show_font_size")],Xa.prototype,"onFontSizeChange",null),Object(s["a"])([Object(r["e"])("showExpandBtn")],Xa.prototype,"showExpandBtnChange",null),Object(s["a"])([Object(r["e"])("loading")],Xa.prototype,"loadingChange",null),Object(s["a"])([Object(r["e"])("originalId"),Object(r["e"])("wxConfigReady")],Xa.prototype,"dataChange",null),Object(s["a"])([Object(r["e"])("codeData.bgimage_set"),Object(r["e"])("codeData.common_set"),Object(r["e"])("codeData.codeCommonInfo")],Xa.prototype,"bgimageSetChange",null),Object(s["a"])([Object(r["e"])("codeData.common_set")],Xa.prototype,"codeTitleFormatChange",null),Object(s["a"])([Object(r["e"])("isColorExtend"),Object(r["e"])("codeData.codeCommonInfo"),Object(r["e"])("codeData.hasOpenMsg")],Xa.prototype,"bottomColorChange",null),Object(s["a"])([Object(r["e"])("qrcodeComponentI"),Object(r["e"])("codeData.qrcode_compontent")],Xa.prototype,"computedCodeDataQrcodeCompontent",null),Object(s["a"])([Object(r["e"])("qrcodeTopComponentI"),Object(r["e"])("commonInfo.codeHeaderTitleInfo")],Xa.prototype,"computedCodeHeaderTitleInfoTitle",null),Object(s["a"])([Object(r["e"])("codeData.qrcode_record.top_style")],Xa.prototype,"topStyleChange",null),Object(s["a"])([Object(r["e"])("qrcodeTopComponentI"),Object(r["e"])("codeData.qrcode_record.tpl_qrcode_status"),Object(r["e"])("oldTopStyle")],Xa.prototype,"setThemeColorByHeadImg",null),Xa=Object(s["a"])([Object(r["a"])({components:{CodeTitle:P,VideoModule:vt["a"],RecordPreview:yt["a"],TextModule:bt["a"],AudioModule:wt["a"],ContactModule:Tt,FileModule:ge,ImageModule:Ie,RedirectModule:At,SummaryAction:Xt,EmptyModuleImage:Re,EmptyModuleLocation:Ae,EmptyModuleText:Je,EmptyModuleVideo:Uo,EmptyModuleTable:si,CodeBottomContent:Vi,Message:Bi,MessageList:ko,TableModule:Eo,HeadModule:ka,Modal:K["a"],CodeStatus:dt,CodeTasks:ft,ToMina:B,AddressModule:Lt,NotaryCard:Fa,WxworkErrorPage:Y,GroupInfoPage:ot},computed:{backgroundColor(){const{commonInfo:t,$$getValue:e}=this,i="pure"===t.codeColorInfo.type?t.codeColorInfo.themeColor:e(t,"codeColorInfo.gradient.from");return i&&window.parent.postMessage({value:i,for:"backgroundColor"},"*"),i},hasContent(){var t;const e=(null===(t=this.codeData)||void 0===t?void 0:t.qrcode_compontent)||[];return!!Object(h["g"])(e||[],t=>!["recordlog","recordview"].includes(null===t||void 0===t?void 0:t.component_code)).length},hasCodeContent(){const{qrcodeComponentI:t,codeData:e}=this,i=null!==t&&void 0!==t?t:null===e||void 0===e?void 0:e.qrcode_compontent;return Object(h["U"])(i,t=>{const{component_code:e}=null!==t&&void 0!==t?t:{};return!Object(h["A"])(["recordlog","recordview"],e)})},isCardStyle(){var t,e,i,o;const{qrcodeTopComponentI:a,codeData:s}=this,{qrcode_top_component:r}=null!==s&&void 0!==s?s:{},n=null!==a&&void 0!==a?a:r,c=Object(b["k"])(n,t=>"file"===(null===t||void 0===t?void 0:t.component_code)),l=null!==(t=null===c||void 0===c||null===(e=c.attribute_list)||void 0===e||null===(i=e[0])||void 0===i||null===(o=i.file_style)||void 0===o?void 0:o.value)&&void 0!==t?t:"";return"1"===l},fontSizeClass(){return"font-size-17-"+this.currentFontSize},headCmpInfo(){return this.createCmpInfo("top")},footCmpInfo(){return this.createCmpInfo("bottom")},editAuthType(){var t,e;const i=null===(t=this.codeData)||void 0===t||null===(e=t.qrcode_msg)||void 0===e?void 0:e.template_form_auth_info,o=Object(b["k"])(i,t=>{const{data_type:e,privi_type:i}=t;return 3===e&&"record"===i});Object(h["e"])("editAuth",o);const a=null===o||void 0===o?void 0:o.auth_type;return Object(h["e"])("auth_type",a),null!==a&&void 0!==a?a:5},gradientCSS(){var t;const{commonInfo:e}=this,{type:i,gradient:o}=null!==(t=null===e||void 0===e?void 0:e.codeColorInfo)&&void 0!==t?t:{},{gradientCSS:a}=null!==o&&void 0!==o?o:{};return"gradient"===i&&a?"background:"+a+";":""}}})],Xa);var Ka=Xa,Za=Ka,ts=(i("ec24"),i("bf1e"),Object(M["a"])(Za,c,l,!1,null,"367ab0b0",null)),es=ts.exports,is=i("c3d1"),os=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.needShow?i("div",["6"!==t.errorCode&&"100"!==t.errorCode||9===t.auditReasonId||10===t.auditReasonId?i("div",[i("image-dif",{attrs:{src:t.src,cusStyle:t.$$setStyle({common:Object.assign({},{width:t.width,height:t.height,backgroundSize:"100% 100%",margin:"-1"===t.errorCode?"25% auto 0":"45% auto 0"},"-1"===t.errorCode?{position:"relative",left:t.$$u(60)}:{}),h5:{width:t.$$u(""+t.width),height:t.$$u(""+t.height)}})}}),i("div",{staticClass:"tips",class:{loadErrTips:"-1"===t.errorCode,auditTips:9===t.auditReasonId||10===t.auditReasonId}},[t._v(" "+t._s(t.tips)+" ")]),t.fusing?i("div",{staticClass:"fusing",class:{auditTipsDesc:9===t.auditReasonId||10===t.auditReasonId}},[t._v(" "+t._s(t.fusing)+" ")]):t._e()],1):t._e(),"6"===t.errorCode&&9!==t.auditReasonId&&10!==t.auditReasonId?i("div",[13===t.auditReasonId?i("image-dif",{attrs:{src:t.auditFail3,cusStyle:t.$$setStyle({common:{width:"80px",height:"80px",margin:"160px auto 0"},h5:{width:t.$$u("80px"),height:t.$$u("80px")}})}}):i("image-dif",{attrs:{src:t.auditFail2,cusStyle:t.$$setStyle({common:{width:"56px",height:"56px",margin:"160px auto 0"},h5:{width:t.$$u("56px"),height:t.$$u("56px")}})}}),5===t.auditReasonId?i("div",[i("div",{staticClass:"outline-reminds"},[t._v(" "+t._s(this.contentText1)+" ")])]):t._e(),5!==t.auditReasonId&&9!==t.auditReasonId&&10!==t.auditReasonId?i("div",[i("div",{staticClass:"outline-tips"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"outline-reminds"},[t._v(" "+t._s(this.contentText1)+" ")]),t.showButtons?i("div",{staticClass:"recover",attrs:{"data-url":this.restoreUrl},on:{click:t.gotoRecover}},[t._v(" 申请恢复 ")]):t._e()]):t._e()],1):t._e(),"100"===t.errorCode?i("div",[i("div",{staticClass:"outline-reminds",staticStyle:{margintop:"40%",padding:"0 3em"}},[t._v(" "+t._s(t.errorTips)+" ")])]):t._e()]):t._e()},as=[];let ss=class extends r["d"]{constructor(){super(...arguments),this.tips="加载失败，请检查网络后重试",this.src="https://static.clewm.net/cli/images/mina-cli/router@2x.png",this.fusing="",this.width="227px",this.height="241px",this.auditFail2="https://ncstatic.clewm.net/feres/a44fa42f_e92fd9c4_1658387996.png",this.auditFail3="https://ncstatic.clewm.net/feres/a9d81c3b_8631bd01_1659087063.png",this.restoreUrl="https://qr71.cn/o2eikt/qiVBCeg",this.contentUrl="https://qr71.cn/o2eikt/qluGoZu",this.contentText1="该二维码内容因违反相关法律法规或者微信规则，现已暂停访问。",this.auditReasonId=0,this.title="",this.showButtons=!1}mounted(){this.isNotaryError&&(this.tips="请使用微信扫码，其他App扫码暂不支持扫码预览")}updated(){const t=+this.$$getValue(this.auditReason,"id",0);let e;switch(e=11===t?"该二维码内容已被隐藏":12===t?"系统升级中":13===t?"该二维码已停止访问":"已停止该二维码访问",this.auditReasonId=t,this.title=e,this.showButtons=!Object(b["I"])([11,12,13],t),this.dispatchPage(),t){case 1:this.restoreUrl="https://qr71.cn/ohvBCP/qcIGLK7",this.contentUrl="https://qr71.cn/ohvBCP/qmOmfUf",this.contentText1="该二维码内容因违反微信内容管理规范，现已暂停访问。";break;case 2:this.restoreUrl="https://qr71.cn/ohvBCP/qRNzCPi",this.contentUrl="https://qr71.cn/ohvBCP/q2sDKNm",this.contentText1="该二维码内容因资质存疑，现已暂停访问。";break;case 3:return this.restoreUrl="https://qr71.cn/ohvBCP/qh0LkTK",this.contentUrl="https://qr71.cn/ohvBCP/qSrcDA8",void(this.contentText1="该二维码内容因包含违规营销广告信息，现已暂停访问。");case 4:this.restoreUrl="https://qr71.cn/ohvBCP/qa6EY8q",this.contentUrl="https://qr71.cn/ohvBCP/qIP6tnW",this.contentText1="该二维码内的网址链接可能存在风险，现已暂停访问。";break;case 5:case 6:case 7:case 8:this.restoreUrl="",this.contentUrl="",this.contentText1="该二维码内容正在审核中，请稍后访问。\n如需加速审核，请发送您的草料账号到邮箱shenhe@nears.cn";break;case 11:this.restoreUrl="",this.contentUrl="",this.contentText1="草料二维码不具备发布政治（含法律法规）、\n经济、军事、外交、历史、新闻、社会突发事件等\n内容的资质。根据相关法律法规及第三方平台要求，\n该二维码内容已被隐藏。\n\n对造成的不便，我们深表歉意。\n申诉请联系审核邮箱：shenhe@nears.cn";break;case 12:this.restoreUrl="",this.contentUrl="",this.contentText1="为落实最新法律法规和平台对时政信息类目核定的\n要求，我们正在升级系统，落实内容管理责任。\n\n对造成的不便，我们深表歉意。\n申诉请联系审核邮箱：shenhe@nears.cn";break;case 13:this.restoreUrl="",this.contentUrl="",this.contentText1="";break;default:break}}dispatchPage(){if(Object(b["I"])(this.url.split("/"),"idcode"))return this.tips="请使用微信扫码查看",void(this.src="https://static.clewm.net/cli/images/mpcli/gowechat.png");if(9===this.auditReasonId)return this.tips="该码当前访问量过大",this.width="128px",this.height="128px",this.src="https://static.clewm.net/cli/images/mina-cli/not_available@2x.png",void(this.fusing="你可以稍后进行访问");if(10===this.auditReasonId)return this.tips="该二维码已停止访问",this.width="128px",this.height="128px",void(this.src="https://static.clewm.net/cli/images/mina-cli/not_available@2x.png");switch(this.errorCode){case"-1":return this.tips="加载失败，请检查网络后重试",void(this.src="https://static.clewm.net/cli/images/mina-cli/router@2x.png");case"1":return this.tips="当前码已被作者删除",this.src="https://static.clewm.net/cli/images/mina-cli/mina_is_deleted@2x.png",this.width="173px",void(this.height="173px");case"7":return this.tips="当前码已被作者删除",this.src="https://static.clewm.net/cli/images/mina-cli/mina_is_deleted@2x.png",this.width="173px",void(this.height="173px");case"9":this.tips="该页面达到499次访问上限\n需要审核通过之后才能继续访问",this.src="https://static.clewm.net/cli/images/mina-cli/mina_check.png",this.fusing="如需加快审核，请联系：service@nears.cn",this.width="173px",this.height="173px";break;case"288":this.tips="该二维码访问频繁，请5-10分钟后重试",this.src="https://static.clewm.net/cli/images/mina-cli/audit_fail@2x.png",this.width="205px",this.height="178px";break;default:break}}gotoRecover(t){const{url:e}=t.target.dataset;this.$router.push("/?url="+e)}};Object(s["a"])([Object(r["c"])({type:String,default:"-1"})],ss.prototype,"errorCode",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ss.prototype,"isNotaryError",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],ss.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ss.prototype,"needShow",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],ss.prototype,"errorTips",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ss.prototype,"auditReason",void 0),Object(s["a"])([Object(r["e"])("errorCode"),Object(r["e"])("auditReason")],ss.prototype,"mounted",null),ss=Object(s["a"])([Object(r["a"])({components:{ImageDif:ye["a"]}})],ss);var rs=ss,ns=rs,cs=(i("8126"),Object(M["a"])(ns,os,as,!1,null,"2d353ea4",null)),ls=cs.exports,ds=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.needShow&&!t.isLoading&!t.autoEnter?i("div",{class:"content "+(t.isIphoneX?"isIPhoneX":"")+" "+(t.reminder.length>150?"isMoreInfo":""),style:t.bodypb||t.bodypt?{height:"calc(100vh - "+this.$$u(t.bodypb)+" - "+this.$$u(t.bodypt)+")"}:{}},[i("div",{staticClass:"cont"},[i("div",{ref:"title",staticClass:"tips"},[t._v("该内容已被制作者加密")]),i("div",{staticClass:"input-div",on:{click:t.inputClicked}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],ref:"pswInpput",staticClass:"psw-input",attrs:{type:"password",placeholder:"请输入访问密码"},domProps:{value:t.pwd},on:{focus:t.inputFocus,blur:t.inputBlur,input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),t.reminder?i("div",{staticClass:"reminder"},[t._v("密码提示："+t._s(t.reminder))]):t._e()]),i("div",{class:"footer "+(t.isIosFocus?"iosFooter":""),style:{height:this.$$px2rem(t.footerHeight)+"rem"}},[i("div",{staticClass:"el-checkbox"},[i("label",{on:{click:t.change}},[i("div",{staticClass:"check"},[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.rememberPsw}}),t._m(0)]),i("div",{staticClass:"word"},[t._v("下次自动进入")])])]),i("div",{staticClass:"comfirm",on:{click:t.comfirm}},[t._v("确定")])])]):t._e()},ps=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"show"},[i("i",{staticClass:"clifont anticon-check"})])}],hs=i("3c61"),us=i("1894");let ms=class extends r["d"]{constructor(){super(...arguments),this.bodypb=0,this.bodypt=0,this.firstLocked=!0,this.pwd="",this.footerHeight=178,this.topScroll=400,this.isIosFocus=!1,this.autoEnter=!1,this.isLoading=!0}get isIphoneX(){return hs["a"].isIphoneX}urlChange(){this.updateData()}codeIdChange(){this.updateData()}renderPwdChanged(){"19"!==this.code||this.firstLocked||this.isLoading||(this.isLoading=!1,this.autoEnter=!1,this.$$toast("密码错误，请重试！")),this.isLoading=!1}created(){if(Object(h["F"])()&&(this.footerHeight=234),Object(h["B"])()){const t=document.documentElement.clientHeight||document.body.clientHeight;window.addEventListener("resize",()=>{this.andriodListen(t)})}}mounted(){setTimeout(()=>{this.$refs.title&&(this.topScroll=this.$refs.title.getBoundingClientRect().top)},1e3);const t=Object(p["t"])(window.location.href);t.bodypb&&!this.$$appStore.noAppBottomEmpty&&(this.bodypb=t.bodypb),t.bodypt&&(this.bodypt=t.bodypt)}updateData(){const t=localStorage.getItem("codePsw_"+this.codeId)||"";if(t){this.pwd=t,this.$emit("checkboxChange",!0);const e=localStorage.getItem("isNewCodePsw")||!1;e&&(this.autoEnter=!0,this.comfirm())}else this.isLoading=!1,this.pwd="",this.firstLocked=!0}andriodListen(t){const e=document.documentElement.clientHeight||document.body.clientHeight;this.footerHeight=t<e?82+(Object(h["F"])()?152:96):138}change(t){t.preventDefault(),t.stopPropagation(),this.$emit("checkboxChange",!this.rememberPsw)}inputClicked(){this.$refs.pswInpput&&this.$refs.pswInpput.focus()}inputFocus(){if(!this.$$appStore.h5QueryString.frompc&&!Object(h["B"])()){const t=window.screen.height;let e=200;switch(t){case 568:e=100;break;case 667:e=130;break;case 736:e=200;break;case 812:e=200;break;case 896:e=260;break;default:e=200}setTimeout(()=>{Object(us["a"])()&&(this.isIosFocus=!0,this.footerHeight=138,document.body.scrollTop=this.topScroll+e,document.documentElement.scrollTop=this.topScroll+e)},10)}}inputBlur(){this.$$appStore.h5QueryString.frompc||(document.body.scrollTop=0,document.documentElement.scrollTop=0,this.footerHeight=82+(Object(h["F"])()?152:96),this.isIosFocus=!1)}comfirm(){""!==this.pwd?(this.firstLocked=!1,this.$emit("confirmed",this.pwd)):this.$$toast("请输入密码！")}};Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ms.prototype,"rememberPsw",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],ms.prototype,"url",void 0),Object(s["a"])([Object(r["e"])("url")],ms.prototype,"urlChange",null),Object(s["a"])([Object(r["c"])({type:Number,default:0})],ms.prototype,"codeId",void 0),Object(s["a"])([Object(r["e"])("codeId")],ms.prototype,"codeIdChange",null),Object(s["a"])([Object(r["c"])({type:String,default:""})],ms.prototype,"reminder",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ms.prototype,"needShow",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],ms.prototype,"code",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ms.prototype,"renderPwd",void 0),Object(s["a"])([Object(r["e"])("renderPwd")],ms.prototype,"renderPwdChanged",null),ms=Object(s["a"])([Object(r["a"])({})],ms);var gs=ms,_s=gs,fs=(i("c746"),Object(M["a"])(_s,ds,ps,!1,null,"db5c4f4a",null)),vs=fs.exports,ys=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",[i("div",{staticClass:"content"},[i("img",{staticClass:"valid-img",attrs:{src:t.imgUrl}}),i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"info",domProps:{innerHTML:t._s(t.info)}})]),t.isFree?i("div",{staticClass:"footer",style:t.isIphoneX?"margin-bottom: "+t.$$u(44):"margin-bottom: "+t.$$u(24)},[i("a",{attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.title"))+" ")]),i("a",{staticStyle:{color:"rgb(153, 153, 153)"},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.build"))+" ")])]):t._e()]):t._e()},bs=[];let ws=class extends r["d"]{constructor(){super(...arguments),this.title="二维码无法查看",this.imgUrl=Et["l"]+"/images/mina-cli/artwork@2x.png?v=20191225",this.info="该二维码制作者设置"}get isFree(){return this.$$getValue(this.codeData,"edition_msg.edition_id",1)<=1}get isIphoneX(){return hs["a"].isIphoneX}validCodeChange(){this.validCode&&this.renderValidInfo()}renderValidInfo(){const{validCode:t,validTime:e,validOpen:i,validOpenTime:o,validLocation:a,validOpenPsd:s}=this.validInfo;switch(t){case 1:e.hasExpired?(this.title="当前日期无法查看二维码",this.info="该二维码制作者设置有效期截止"+e.endTime):(this.title="当前日期无法查看二维码",this.info=`该二维码制作者设置查看有效期<br />${e.startTime}至${e.endTime}`);break;case 2:{const t=navigator.userAgent.toLowerCase(),{h5QueryString:e}=this.$$appStore;i.canShare||1!==+e.wxscene&&"timeline"!==e.from&&"groupmessage"!==e.from&&"singlemessage"!==e.from?i.allowOtherApp||-1!==t.indexOf("micromessenger")||(this.title="二维码无法查看",this.info="该二维码制作者设置仅允许微信打开"):(this.title="二维码无法查看",this.info="该二维码制作者设置不允许“微信转发分享”打开");break}case 3:this.title="当前时段无法查看二维码",this.info=`该二维码制作者设置“每天${o.startTime}-${o.endTime}${a.radius?`、${a.address}附近${a.radius}`:""}${s.hasPsd?"、输入密码":""}”查看`;break;case 4:this.title="当前地理位置无法查看二维码",this.info=`该二维码制作者设置“${o.startTime?`每天${o.startTime}-${o.endTime}、`:""}${a.address}附近${a.radius}${s.hasPsd?"、输入密码":""}”查看`;break;case 5:this.title="获取定位失败",this.info="该二维码被限制查看区域，当前应用无法获取定位，请使用微信打开！";break;default:break}}getCoding(){let[t]=decodeURIComponent(this.$route.query.url||"").split("?");return t||(t=""),t&&t.indexOf("://")>-1&&([,t]=t.split("://")),t&&([,,t]=t.split("/")),t||""}goQA(){const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding")||null;n["a"].logClick(114,118038,"",{cvid:(new R["a"]).id,coding:t||this.getCoding()}),window.location.href=Et["c"]+"/power-by.html?cid=630&type=6"}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>{}})],ws.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({validCode:0})})],ws.prototype,"validInfo",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],ws.prototype,"validCode",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ws.prototype,"show",void 0),Object(s["a"])([Object(r["e"])("validInfo.validCode"),Object(r["e"])("validCode")],ws.prototype,"validCodeChange",null),ws=Object(s["a"])([r["a"]],ws);var Cs=ws,$s=Cs,Os=(i("a602"),Object(M["a"])($s,ys,bs,!1,null,"7b81cfe2",null)),Ss=Os.exports,js=i("8211");let Is=class extends r["d"]{constructor(){super(...arguments),this.pageHeaderColor="rgba(0, 0, 0, 0.87)",this.pageHeaderBackground="white",this.headerbg="transparent",this.codeData={},this.headerTitle="",this.onScrollFlag=!0,this.url="",this.codeShow=!0,this.errorPage=!1,this.lockedPage=!1,this.validPage=!1,this.recordShow=!1,this.qrcodeUrl="",this.reminder="",this.pwd="",this.isNotaryError=!1,this.renderPwd=!1,this.validInfo={},this.validPosCount=0,this.rememberPsw=!1,this.codeId=0,this.showToMinaTips=!1,this.isScan=!1,this.scanObj=[],this.isUserCode=!1,this.alipay=!1,this.errorTips="",this.categoryType="",this.orgName=""}validPageChanged(){this.$$appStore.setKey({key:"hasValidPage",value:this.validPage})}urlChanged(){this.codeShow=!1;const[t]=decodeURIComponent(this.$route.query.url||"").split("?");this.url=t,setTimeout(()=>{this.codeShow=!0},500)}get needShow(){return this.codeShow&&!this.errorPage&&!this.lockedPage&&!this.validPage}created(){if(this.isH5){const e=Object(p["t"])(window.location.href),i=decodeURIComponent(e.url);if(this.categoryType=e.categoryType,i&&i.indexOf("/tc/")>-1)return void this.$$go("/pages/assistView/main",{q:i});e.scanIndex&&(localStorage.setItem("topIndex",e.scanIndex),this.$$appStore.setKey({key:"isTopMode",value:!0}),this.isScan=!0,this.scanIndex=parseInt(e.scanIndex,10),e.isUserCode?(this.isUserCode=!0,this.scanObj=JSON.parse(localStorage.getItem("userqrList"))):this.scanObj=JSON.parse(localStorage.getItem("top500qrList")));const[o]=decodeURIComponent(e.url||"").split("?");if(this.url=o,this.url){const t=this.getCoding(this.url);"n"===t.substr(0,1)&&(this.isNotaryError=!0)}if(o&&-1===o.indexOf("wxa.cli.im/qr")&&o.indexOf("/a4")>-1){this.url=o.split("/a4").join("");const t=this.getCoding(this.url);n["a"].logClick(104,118001,(new R["a"]).id,t)}if(o&&o.indexOf("/share")>-1&&(this.url=o.split("/share").join("")),o&&o.indexOf("/mina_enterprise")>-1&&(this.url=o.split("/mina_enterprise").join("")),o&&o.indexOf("/from_price")>-1&&(this.url=o.split("/from_price").join("")),o&&o.indexOf("/_scan")>-1){this.url=o.split("/_scan")[0];try{const t=(new R["a"]).id;n["a"].logClick(29,152147,t,JSON.stringify({openId:t,coding:this.url.split("/").pop(),ua:navigator.userAgent}))}catch(t){console.error(t)}}navigator.userAgent.indexOf("AlipayClient")>-1&&navigator.userAgent.indexOf("MiniProgram")>-1&&(this.alipay=!0),o&&o.indexOf("/alipayApp")>-1&&(this.url=o.split("/alipayApp").join(""),this.alipay=!0),(o&&o.indexOf("/rd/")>-1||o&&o.split("/")[2]&&("r"===o.split("/")[2].charAt(0)||Object(b["I"])(["record","task","state"],o.split("/")[2])))&&(this.codeShow=!1,this.recordShow=!0)}else this.url=this.url?this.url:this.$mp.options.url,this.url&&this.url.indexOf("/share")>-1&&(this.url=this.url.split("/share").join("")),this.url&&this.url.indexOf("/mina_enterprise")>-1&&(this.url=this.url.split("/mina_enterprise").join("")),this.url&&this.url.indexOf("/from_price")>-1&&(this.url=this.url.split("/from_price").join(""))}initValidInfo(t){const{open_location_info:e,open_time_info:i,open_password_info:o}=this.$$getValue(t,"visible_auth_info",{}),a=t=>(t=t||{},"00:00"===t.start_time&&"23:59"===t.end_time?{startTime:"",endTime:""}:{startTime:t.start_time,endTime:t.end_time}),s=t=>t?t>=1e3?Math.round(t/1e3)+"公里":t+"米":"";return{validLocation:{address:this.$$getValue(e,"address",""),radius:s(this.$$getValue(e,"radius"))},validOpenTime:a(i),validOpenPsd:{hasPsd:this.$$getValue(o,"status")}}}validTime(t){const e=t.valid_days_num||-2,i=t.start_time,o=t.end_time,a={1:"一天",3:"三天",180:"六个月",360:"一年",720:"二年",1800:"五年",3600:"十年",[-1]:"自定义",[-2]:"长期有效"},s=t=>t||"",r=new Date,n=r.getMonth()+1,c=r.getDate(),l=`${r.getFullYear()}-${n<10?"0"+n:n}-${c<10?"0"+c:c}`,d=new Date(l).getTime()>new Date(o).getTime(),p=new Date(l).getTime()<new Date(i).getTime()||d;return{validDay:a[e],startTime:s(i),endTime:s(o),isLimit:p,hasExpired:d}}isWechatOpen(){const t=this.$$getValue(navigator,"userAgent","").toLowerCase();return t.indexOf("micromessenger")>-1&&t.indexOf("wxwork")<0}isHighVersion(t){const e=this.$$getValue(t,"edition_msg.from_edition_id",1);return parseInt(e,10)>1}isShowToMinaTips(t){if(this.scanIndex||0===this.scanIndex)return!1;if(this.isHighVersion(t))return!1;if(!this.isWechatOpen())return!1;const e=this.$$getValue(t,"qrcode_record.route_type",1);return 2!==e}codeLoaded(t){var e,i,o,a;this.renderPwd=!this.renderPwd,this.codeData=t;const s=t.qrcode_msg?"qrcode_msg":"";this.showToMinaTips=this.isShowToMinaTips(t);const{h5QueryString:r}=this.$$appStore;if("nc_check"===r.from)return this.validInfo=this.initValidInfo(t),this.pageHeaderColor=t.codeCommonInfo.codeColorInfo.foreColor,this.pageHeaderBackground=t.codeCommonInfo.codeColorInfo.themeColor,this.errorPage=!1,this.lockedPage=!1,this.validPage=!1,void(this.codeShow=!0);const{valid_time:n}=this.$$getValue(t,s,{});if(n){const{isLimit:t,...e}=this.validTime(n);if(t)return this.validInfo={validCode:1,validTime:e},this.validPage=!0,void(this.codeShow=!1)}const{open_methods:c}=this.$$getValue(t,s,{});if(c){const t=this.$$getValue(navigator,"userAgent","").toLowerCase();if(!c.share&&(1===+r.wxscene||"timeline"===r.from||"groupmessage"===r.from||"singlemessage"===r.from)||!c.other_app&&-1===t.indexOf("micromessenger"))return this.validInfo={validCode:2,validOpen:{canShare:c.share,allowOtherApp:c.other_app}},this.validPage=!0,void(this.codeShow=!1)}if(this.validInfo=this.initValidInfo(t),"19"===t.code){const e=this.$$getValue(t,"qrcode_msg.qrcode_record.tpl_qrcode_status",0),i=this.$$getValue(t,"qrcode_msg.qrcode_record.tpl_qrcode_id",0),o=this.$$getValue(t,"qrcode_msg.qrcode_record.id",0),a=2===e?i:o;return this.codeId=a,this.lockedPage=!0,this.errorPage=!1,this.codeShow=!1,void(this.reminder=t.visible_auth_info.open_password_info.psw_tip)}if("24"===t.code)return this.validPosCount>=1?(this.validInfo.validCode=4,this.validPage=!0):(this.$$getLocation({type:"gcj02"}).then(async t=>{const e={lat:t.lat,lon:t.lng};await this.$$appStore.setKey({key:"position",value:e}),this.$refs.viewCodeComp.getCodeInfo()}).catch(()=>{this.validPage=!0,this.validInfo.validCode=5}),this.validPosCount=this.validPosCount+1,this.validPage=!1),void(this.codeShow=!1);if("25"===t.code)return this.validInfo.validCode=3,this.validPage=!0,void(this.codeShow=!1);if(0!==+t.code&&"31"!==t.code)return this.errorPage=!0,this.lockedPage=!1,this.codeShow=!1,void(this.errorTips=t.errorTips);var l;(this.rememberPsw&&this.codeId&&(localStorage.setItem("codePsw_"+this.codeId,this.pwd),localStorage.setItem("isNewCodePsw","true")),this.orgName=this.$$getValue(t,"org_msg.name","未知企业"),this.pageHeaderColor=null===t||void 0===t||null===(e=t.codeCommonInfo)||void 0===e||null===(i=e.codeColorInfo)||void 0===i?void 0:i.foreColor,this.pageHeaderBackground=null===t||void 0===t||null===(o=t.codeCommonInfo)||void 0===o||null===(a=o.codeColorInfo)||void 0===a?void 0:a.themeColor,this.errorPage=!1,this.lockedPage=!1,this.validPage=!1,this.codeShow=!0,"31"===t.code)&&(null===(l=this.$refs.viewCodeComp)||void 0===l||l.handleCode31(t))}codeReloaded(t){this.pwd===t&&this.$$toast("密码错误，请重试！"),this.pwd=t}checkboxChange(t){this.rememberPsw=t}onPageScroll({scrollTop:t}){if(t<=50&&(this.headerbg="transparent",this.headerTitle=""),t>=50)return this.headerbg=this.pageHeaderBackground,void(this.headerTitle=this.codeData.codeCommonInfo.codeHeaderTitleInfo.title);this.headerbg="transparent",this.headerTitle=""}onPullDownRefresh(){setTimeout(()=>{},1e3)}scanNext(){const{scanIndex:t,scanObj:e}=this;if(t===e.length-1)return void this.$$toast("It is already the last QR code!");let i=`${e[t+1].enter_url}&scanIndex=${t+1}`;this.isUserCode&&(i=`${e[t+1].enter_url}&scanIndex=${t+1}&isUserCode=true`),window.location.href=`${i}?v=${(new Date).getTime()}`}scanPrev(){const{scanIndex:t,scanObj:e}=this;if(0===t)return void this.$$toast("It is already the first QR code!");let i=`${e[t-1].enter_url}&scanIndex=${t-1}`;this.isUserCode&&(i=`${e[t-1].enter_url}&scanIndex=${t-1}&isUserCode=true`),window.location.href=`${i}?v=${(new Date).getTime()}`}scanUserinfo(){const{scanIndex:t,scanObj:e}=this;window.location.href="https://h5.clewm.net//user-info.html?orgid="+e[t].org_id}getCoding(t){let e=t;return e||(e=""),e&&e.indexOf("://")>-1&&([,e]=e.split("://")),e&&([,,e]=e.split("/")),e||""}};Object(s["a"])([Object(r["e"])("validPage")],Is.prototype,"validPageChanged",null),Object(s["a"])([Object(r["e"])("$route",{deep:!0})],Is.prototype,"urlChanged",null),Is=Object(s["a"])([Object(r["a"])({components:{ViewCodeComp:es,PageHeader:is["a"],ErrorPage:ls,LockedPage:vs,ValidPage:Ss,RecordRemind:js["a"]}})],Is);var Ts=Is,xs=Ts,ks=(i("22a3"),Object(M["a"])(xs,o,a,!1,null,"7c377f13",null));e["default"]=ks.exports},8759:function(t,e,i){},"8a2d":function(t,e,i){},"8f00":function(t,e,i){},9508:function(t,e,i){},"97ea":function(t,e,i){"use strict";i("a66a")},"9a3e":function(t,e,i){"use strict";i("821b")},"9a85":function(t,e,i){},a13c:function(t,e,i){},a602:function(t,e,i){"use strict";i("07cd")},a66a:function(t,e,i){},a6c3:function(t,e,i){},a9bd:function(t,e,i){"use strict";i("aee5")},aa2e:function(t,e,i){},adef:function(t,e,i){},aee5:function(t,e,i){},b889:function(t,e,i){"use strict";i("6de8")},b890:function(t,e,i){"use strict";i("9508")},bb90:function(t,e,i){"use strict";i("5c40")},bf1e:function(t,e,i){"use strict";i("ca8e")},c35b:function(t,e,i){},c745:function(t,e,i){},c746:function(t,e,i){"use strict";i("772e")},c803:function(t,e,i){"use strict";i("c35b")},ca8e:function(t,e,i){},cac3:function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return h}));var o=i("d6ad"),a=(i("6260"),i("a607")),s=(i("08f7"),i("1ddc"),i("dfe4"),i("300c"),i("a719"),i("6b40")),r=i("d197"),n=i("f1d0");const c={Default:1,Admin:8,Group:1,Any:4,Password:3,None:12,WithinGroup:13,WxWork:14,Tpl:2},l=r["a"];c.Any;var d;(function(t){t[t["CONTENT_STR"]=0]="CONTENT_STR",t[t["CONTENT_CODE"]=1]="CONTENT_CODE"})(d||(d={}));c.Default;const p=t=>(Object(a["a"])(t,t=>{var e,i,o,a,s,r;if(1===(null===t||void 0===t||null===(e=t.tpl_number)||void 0===e?void 0:e.number_type)&&(0===(null===t||void 0===t||null===(i=t.tpl_number)||void 0===i?void 0:i.status)&&1===(null===t||void 0===t||null===(o=t.tpl_number)||void 0===o?void 0:o.show_static_qrcode_status)&&(t.tpl_number.show_static_qrcode_status=0),t.tpl_number.number_type=2,null===t||void 0===t||null===(a=t.tpl_number)||void 0===a||!a.number_type_options||null===t||void 0===t||null===(s=t.tpl_number)||void 0===s||null===(r=s.number_type_options)||void 0===r||!r.length)){const e=[{option_type:1,option_value:5,number_content_type:d.CONTENT_STR},{option_type:1,option_value:5,number_content_type:d.CONTENT_CODE}];t.tpl_number.number_type_options=e}}),t),h=t=>{var e;const i={},{log_msg_tag:a,expand_log:r,expand_btn:c,promise_info:l,recordview_position:d,record_summary_title:h,isRecordCase:u,operateItems:m,record_summary_status:g,subscribe_status:_,recordview_extend:f}=t;let{data_list:v}=t;return null!==(e=v)&&void 0!==e&&e.length&&(v=p(v)),i.log_msg=v||[],i.log_msg_tag=a||"",i.record_summary_title=h||(u?s["e"]:""),i.recordview_position=d||s["f"],i.expand_log=null==r?s["d"]:r,i.expand_btn=c||s["c"],i.promise_info=l||{skip_promise:1,promise_tpl:null,promise_record:null},i.operateItems=m||[],i.record_summary_status=null!==g&&void 0!==g?g:1,i.subscribe_status=null!==_&&void 0!==_?_:n["i"].NONE,i.recordview_extend=f,{...i,_oldData:Object(o["a"])(i)}}},d3cd:function(t,e,i){"use strict";i("9a85")},da7e:function(t,e,i){"use strict";i("aa2e")},de35:function(t,e,i){},e195:function(t,e,i){"use strict";i("38cb")},e56b:function(t,e,i){},ec24:function(t,e,i){"use strict";i("c745")},ecca:function(t,e,i){"use strict";i("f402")},eda5:function(t,e,i){"use strict";i("8f00")},efa1:function(t,e,i){},effc:function(t,e,i){"use strict";i("7e2f")},f402:function(t,e,i){},f6c1:function(t,e,i){"use strict";i("4d7d")},f8b0:function(t,e,i){"use strict";i("8a2d")},fe7b:function(t,e,i){},fffd:function(t,e,i){"use strict";i("3d40")}}]);